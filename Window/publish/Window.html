<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--
          ******* WARNING ********
          This document was automatically generated using the Re-Spec specification
          publishing system. Edits made here are likely to be lost when it is
          regenerated.
          ******* WARNING ********
        --><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Window Object 1.0</title><link rel="stylesheet" href="respec-w3c.css" type="text/css"></link><link rel="stylesheet" href="http://www.w3.org/StyleSheets/TR/base" type="text/css"></link><meta name="revision" content="$Id: Window.html,v 1.5 2006-03-25 09:20:38 mstachow Exp $"></meta></head><body><div class="head"><p><a href="http://www.w3.org/"><img class="head" src="http://www.w3.org/Icons/w3c_home" width="72" height="48" alt="W3C"></img></a></p><h1 class="head">Window Object 1.0</h1><h2 id="pagesubtitle">W3C Editor's Draft <em>24 March 2006</em></h2><dl><dt>This version:</dt><dd><a href="http://dev.w3.org/cvsweb/~checkout~/2006/webapi/Window/publish/Window.html">http://dev.w3.org/cvsweb/~checkout~/2006/webapi/Window/publish/Window.html</a></dd><dt>Latest version:</dt><dd><a href="http://dev.w3.org/cvsweb/~checkout~/2006/webapi/Window/publish/Window.html">http://dev.w3.org/cvsweb/~checkout~/2006/webapi/Window/publish/Window.html</a></dd><dt>Editors:</dt><dd><span class="person">Ian Davis (<a href="http://www.talis.com/">Talis Information Ltd.</a>) &lt;<a href="mailto:ian.davis@talis.com">ian.davis@talis.com</a>&gt;</span></dd><dd><span class="person">Maciej Stachowiak (<a href="http://apple.com/">Apple Computer, Inc.</a>) &lt;<a href="mailto:mjs@apple.com">mjs@apple.com</a>&gt;</span></dd></dl><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©2006
        <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>,
        <a href="http://www.ercim.org/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and 
        <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document  use</a> rules apply.
      </p></div><hr></hr>
  

  <h2 id="specabstract">Abstract</h2><div class="section">
    

    <p>
      This specification defines the Window object, which provides the
      global namespace for web scripting languages, access to other
      documents in a compound document by reference, navigation to
      other locations, and timers. The Window object is a longstanding
      de facto standard for HTML user agents. However, it should not
      be assumed based on this or the name "Window" that it is limited to HTML
      or to visual user agents.
    </p>
  </div>

  <div class="section"><h2 id="sotd">Status of this Document</h2>
    

    <p>
      <em>This section describes the status of this document at the time of its publication.
      Other documents may supersede this document. A list of current <acronym title="World Wide Web Consortium">W3C</acronym> publications and the
      latest revision of this technical report can be found in the 
      <a href="http://www.w3.org/TR/"><acronym title="World Wide Web Consortium">W3C</acronym> technical reports index</a> at http://www.w3.org/TR/.</em>
    </p>
    <p>
      This document is produced by the <a href="http://www.w3.org/2006/webapi">Web API
      <acronym title="Working Group">WG</acronym></a> (part of the
      <a href="http://www.w3.org/2006/rwc/Activity">Rich Web Clients Activity</a>).
      This document has no formal standing within the <acronym title="World Wide Web Consortium">W3C</acronym>. 
      Please send comments to <a href="mailto:public-webapi@w3.org">public-webapi@w3.org</a>, 
      the public email list for issues related to Web APIs.
    </p>
    <p>
      The patent policy for this document is the 
      <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>. 
      Patent disclosures relevant to this specification may be found on the 
      <a href="http://www.w3.org/2004/01/pp-impl/38482/status" rel="disclosure">Web API Working Group's patent
      disclosure page</a>. An individual who has actual knowledge of a patent which the individual believes 
      contains Essential Claim(s) with respect to this specification should disclose the information in
      accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6
      of the <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>.
    </p>
    <p>
      Publication as an Editor's Draft does not imply endorsement by the <acronym title="World Wide Web Consortium">W3C</acronym> Membership.
      This is a draft document and may be updated, replaced or obsoleted by other 
      documents at any time. It is inappropriate to cite this document as other than
      work in progress.
    </p>
  </div>

  <div class="section"><h2 id="contents">Table of contents</h2>
    
    <ul class="toc"><li><a href="#introduction">1. Introduction</a></li><li><ul class="toc"><li><a href="#usage">1.1. Examples of usage</a></li><li><a href="#notcovered">1.2. Not in This Specification</a></li><li><a href="#conformance">1.3. Conformance</a></li></ul></li><li><a href="#browsing">2. Browsing Contexts</a></li><li><ul class="toc"><li><a href="#window">2.1. The <em>Window</em> Interface, Basic Attributes</a></li><li><ul class="toc"><li><a href="#window-basic-attributes">2.1.1. Attributes</a></li><li><a href="#window-basic-scripting">2.1.2. Use in scripting</a></li></ul></li><li><a href="#document-window">2.2. The <em>DocumentWindow</em> Interface, Basic Attributes</a></li></ul></li><li><a href="#navigation">3. Navigation</a></li><li><ul class="toc"><li><a href="#window-location">3.1. The <em>Window</em> Interface, Location Attributes</a></li><li><ul class="toc"><li><a href="#window-location-attributes">3.1.1. Attributes</a></li></ul></li><li><a href="#document-location">3.2. The <em>DocumentWindow</em> Interface, Location Attributes</a></li><li><ul class="toc"><li><a href="#document-location-attributes">3.2.1. Attributes</a></li></ul></li><li><a href="#location">3.3. The <em>Location</em> Interface</a></li><li><ul class="toc"><li><a href="#location-attributes">3.3.1. Attributes</a></li><li><a href="#location-methods">3.3.2. Methods</a></li></ul></li></ul></li><li><a href="#embedding">4. Embedding: Compound Documents by Reference</a></li><li><ul class="toc"><li><a href="#window-embedding">4.1. The <em>Window</em> Interface, Embedding Attributes</a></li><li><a href="#embeddingelt">4.2. The <em>EmbeddingElement</em> Interface</a></li></ul></li><li><a href="#timers">5. Timers</a></li><li><ul class="toc"><li><a href="#window-timers">5.1. The <em>Window</em> Interface, Timer Attributes</a></li><li><a href="#timerlistener">5.2. The <em>TimerListener</em> Interface</a></li></ul></li><li><a href="#security">6. Security Considerations</a></li></ul><ul class="toc"><li><a href="#idl">A. IDL Definitions</a></li><li><a href="#ecmascript">B. ECMAScript Language Binding</a></li><li><a href="#java">C. Java Language Binding</a></li><li><a href="#acknow">D. Acknowledgements</a></li><li><a href="#bibref">E. References</a></li></ul>
  </div>

  <div class="section"><h2 id="introduction">1. Introduction</h2>
    

    <p>
      The <strong>Window Object 1.0</strong> specification defines a subset of the
      features of the Window object, a widely implemented part of HTML
      User Agents, with parts also found in non-HTML UAs that offer
      scripting and DOM access. With this specification, it is recommended
      for all implementations that present documents to the user or provide
      the equivalent of a browsing context.
    </p>

    <p>
      The main purpose of the Window object is to provide the global
      namespace for script execution. This specification defines four
      features of the window object, in addition to its use for the
      global namespace. It describes the use of the Window object as a
      <strong>browsing context</strong>: a container that displays a
      document, or a series of documents in sequence. It describes
      interfaces for <strong>navigation</strong>, the ability to go to
      a new document in the same browsing context. It describes
      interfaces for <strong>embedding</strong>, a feature also known
      as <strong>compound document by reference</strong>, where one
      document includes another separate document by external
      reference. And finally it provides <strong>timers</strong>.
    </p>
    
    <div class="section"><h3 id="usage">1.1. Examples of usage</h3>
      
      <p>(this section is informative)</p>

      <div class="ednote">Need to fill this in.</div>
    </div>

    <div class="section"><h3 id="notcovered">1.2. Not in This Specification</h3>
      
      <p>(this section is informative)</p>

      <p>
      This specification does not include the following features,
      which are also found on the Window Object in some
      implementations. It is possible they will defined by other
      specifications or found in a future version of this specification.
      </p>

      <ul>
      <li>History <div class="ednote">(may have to reconsider this)</div></li>
      <li>Access to frames by name <div class="ednote">(may have to reconsider this)</div></li>
      <li>Opening new windows</li>
      <li>Manipulating UI of existing windows</li>
      <li>Window size and position information</li>
      <li>Client information ("window.navigator")</li>
      <li>Window events</li>
      <li>Printing</li>
      <li>Focus</li>
      <li>Selection</li>
      <li>Editing</li>
      <li>Networking APIs</li>
      <li>Handling of binary data</li>
      </ul>
    </div>

    <div class="section"><h3 id="conformance">1.3. Conformance</h3>
      

      <p>
        The key words "<em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em>", "<em class="rfc2119" title="Keyword in RFC 2119 context">MUST NOT</em>", "<em class="rfc2119" title="Keyword in RFC 2119 context">REQUIRED</em>", "<em class="rfc2119" title="Keyword in RFC 2119 context">SHALL</em>", "<em class="rfc2119" title="Keyword in RFC 2119 context">SHALL NOT</em>", "<em class="rfc2119" title="Keyword in RFC 2119 context">SHOULD</em>", "<em class="rfc2119" title="Keyword in RFC 2119 context">SHOULD NOT</em>",
        "<em class="rfc2119" title="Keyword in RFC 2119 context">RECOMMENDED</em>", "<em class="rfc2119" title="Keyword in RFC 2119 context">MAY</em>", and "<em class="rfc2119" title="Keyword in RFC 2119 context">OPTIONAL</em>" in this document are to be interpreted as described in
        RFC 2119 [<cite><a href="#RFC2119" class="bibref">RFC2119</a></cite>].
      </p>
      <p>

	Sometimes, for readability, conformance requirements are
	phrased as requirements on elements, attributes, methods,
	interfaces, properties or functions. In all cases these are
	conformance requirements on implementations.
      </p>
      <p>
        This specification defines three classes of conformance:

      </p>
      <dl>
        <dt><dfn class="term" id="def-conforming-impl">conforming implementation</dfn></dt>
        <dd>
          A <a class="term" href="#def-conforming-impl" ref="def-conforming-impl">conforming
	  implementation</a> of the Window Object specification is
	  one that implements all the interfaces in this
	  specification, and satisfies all other <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em>, <em class="rfc2119" title="Keyword in RFC 2119 context">REQUIRED</em> and
	  <em class="rfc2119" title="Keyword in RFC 2119 context">SHALL</em> level criteria in all parts of this document other
	  than language binding appendices.
	</dd>

        <dt><dfn class="term" id="def-conforming-ecmascript-impl">conforming ECMAScript implementation</dfn></dt>
        <dd>
	  A <a class="term" href="#def-conforming-ecmascript-impl" ref="def-conforming-ecmascript-impl">conforming
          ECMAScript implementation</a> of the <strong>Window
          Object</strong> specification is a <a class="term" href="#def-conforming-impl" ref="def-conforming-impl">conforming implementation</a>
          that maps all of the interfaces in this specification to
          ECMAScript [<cite><a href="#ECMAScript" class="bibref">ECMAScript</a></cite>], and satisfies the additional
          requirements in the <a href="#ecmascript">ECMAScript
          Language Binding Appendix</a>.  
	</dd>

        <dt><dfn class="term" id="def-conforming-java-impl">conforming Java implementation</dfn></dt>
        <dd>
	  A <a class="term" href="#def-conforming-ecmascript-impl" ref="def-conforming-ecmascript-impl">conforming Java
          implementation</a> of the <strong>Window Object</strong>
          specification is a <a class="term" href="#def-conforming-impl" ref="def-conforming-impl">conforming implementation</a>
          that maps all of the interfaces in this specification to
          Java [<cite><a href="#Java" class="bibref">Java</a></cite>], and satisfies the additional requirements in
          the <a href="#java">Java Language Binding Appendix</a>.
        </dd> 
    
      </dl>

    </div>

  </div>

  <div class="section"><h2 id="browsing">2. Browsing Contexts</h2>
    

    <p>
      A <dfn class="term" id="def-browsing-context">browsing
      context</dfn> is a place where a user agent presents a
      document or a sequence of documents to the user, using one or
      more views. Only one document of this sequence is presented at a
      time. A <a class="term" href="#def-browsing-context" ref="def-browsing-context">browsing context</a>
      is said to <dfn class="term" id="def-navigate">navigate</dfn>
      when it changes from presenting one document to another, for
      example by following a hyperlink. More is specified about
      navigation behavior in the <a href="#navigation">Navigation</a>
      section.
    </p>

    <p>
      An visual user agent typically presents a document by rendering
      it to a display. However, even non-visual agents could have a
      browsing context. For example, a voice browser also presents
      documents to the user. This also establishes a browsing
      context.
    </p>

    <p>
      In a conforming implementation, a document that implements the
      DOM Core <code>Document</code> [<cite><a href="#DOM3Core" class="bibref">DOM3Core</a></cite>] interface and is
      presented in a browsing context <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> also implement the
      <code>DocumentWindow</code> interface.
    </p>

    <p>
      Each view of a <code>Document</code> presented in a <a class="term" href="#def-browsing-context" ref="def-browsing-context">browsing context</a> <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be
      represented by an object that implements the <code>Window</code>
      interface. One of these is the <dfn class="term" id="def-default-view">default view</dfn>. The <a class="term" href="#def-default-view" ref="def-default-view">default view</a> is typically the
      primary mode of presentation to the user, and in interactive
      user agents, the primary means of interaction for the
      user. <div class="ednote">Are there any UAs out there that implement
      AbstractViews and actually have multiple views? In this case do
      all the views implement the Window interface, or only the
      primary view? Maybe we shouldn't specify too much about multiple
      views unless we can find actual implementations of
      this.</div>
    </p>

    <p>
      An object that implements the <code>Window</code> interface is
      referred to as a <dfn id="def-window-object">Window
      object</dfn>. Note: despite the name, a Window object does not
      necessarily represent an onscreen overlapping window, even in
      visual user agents.
    </p>

    <p>
      A document presented in a browsing context may have elements
      that embed additional documents, forming a Compound Document by
      Reference. Such elements create nested browsing contexts. This
      mechanism is described in <a href="#embedding">Embedding:
      Compound Documents by Reference</a>.
    </p>

    <p>
      When a DOM Events [<cite><a href="#DOM3EV" class="bibref">DOM3EV</a></cite>] <code>UIEvent</code> is dispatched on
      any node in a <code>Document</code> presented in a browsing
      context, the value of the <code>view</code> attribute of the
      event <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be the Window object where the user originated the
      event. <div class="ednote">Should we specify how the Window is actually part
      of the capture and bubble phases of DOM event dispatch?  Should
      we specify anything about events at all? Maybe all event
      considerations should be deferred to a future Window Events
      spec. And the particular requirement on UIEvent here appears to
      duplicate what DOM Level 2 Views already says.</div>
    </p>

    <div class="section"><h3 id="window">2.1. The <em>Window</em> Interface, Basic Attributes</h3>
      

      <p>To better organize this specification, the <code>Window</code>
      interface is presented in mulitple IDL fragments. The full
      normative IDL interface is presented in the <a href="#idl">IDL
      Definitions Appendix</a>. This fragment defines only the most basic
      methods and attributes of the <code>Window</code> interface.</p>

      <p>The <code>Window</code> interface inherits from the DOM Level
      2 Views [<cite><a href="#DOM2Views" class="bibref">DOM2Views</a></cite>] <code>AbstractView</code> interface.</p>

      <div class="ednote">Should we give a requirement or explanatory note here that
      if you implement CSSOM then the Window and ViewCSS interfaces should
      be implemented by the same object?</div>

      <div class="boxed"><p><span class="idlTitle"></span></p><pre class="schema" title="">

interface Window : views::AbstractView {
    // ...

    // self-references
    readonly attribute Window window;
    readonly attribute Window self;

    // ...
};</pre></div>

      <p>
        The value of the <code>document</code> property inherited by
        Window objects from the <code>AbstractView</code> interface
        <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be the document for which the <code>Window</code> is a
        view. In addition to the <code>DocumentView</code> interface,
        the document <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> implement the <code>Document</code> and
        <code>DocumentWindow</code> interfaces.
      </p>

      <div class="section"><h4 id="window-basic-attributes">2.1.1. Attributes</h4>
        
       
        <p>Window objects <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> implement the following attributes:</p>

        <dl>
          <dt><dfn id="attr-window">window</dfn></dt> 
          <dd> 
	    The value of the <code>window</code> attribute <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be the
            same Window object that has the attribute: the attribute
            is a self-reference.  
          </dd>

          <dt><dfn id="attr-self">self</dfn></dt>
          <dd>
	    The value of the <code>self</code> attribute <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be to
            the same <code>Window</code> object that has the attribute
            (a self-reference). Consequently, it <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> have the same
            value as the <code>window</code> attribute.
          </dd> 
        </dl>

      </div>

      <div class="section"><h4 id="window-basic-scripting">2.1.2. Use in scripting</h4>
        

        <p>
          The <code>Window</code> object also has a special role as the
          global scope for scripts in the document in languages such as
          ECMAScript [<cite><a href="#ECMAScript" class="bibref">ECMAScript</a></cite>]. Such use is specified by individual
          language bindings. For ECMAScript it is specified in the <a href="#ecmascript">ECMAScript Language Binding
          Appendix</a>.
        </p>

      </div>

    </div>

    <div class="section"><h3 id="document-window">2.2. The <em>DocumentWindow</em> Interface, Basic Attributes</h3>
      

      <p>To better organize this specification, the
      <code>DocumentWindow</code> interface is presented in mulitple
      IDL fragments. The full normative IDL interface is presented in
      the <a href="#idl">IDL Definitions Appendix</a>. This fragment
      defines only the most basic methods and attributes of the
      <code>Window</code> interface.</p>

<div class="ednote">Should we also specify the parentWindow property? It is
effectively a synonym for defaultView but implemented by a different
set of UAs.</div>

      <div class="boxed"><p><span class="idlTitle"></span></p><pre class="schema" title="">

interface DocumentWindow : views::DocumentView {
    // ...
};</pre></div>

      <p>
        The value of the <code>defaultView</code> property inherited
        by objects that implement the <code>DocumentWindow</code>
        interface inherit from the <code>AbstractView</code> interface
        <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be the default view for the browsing context presenting
        the document, if any. In addition to the
        <code>AbstractView</code> interface, the default view <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em>
        implement the <code>Window</code> interface. For documents not
        being presented in a browsing context, the value of the
        <code>defaultView</code> attribute <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be null. <div class="ednote">Is
        this reasonably testable?  There are ways (XMLHttpRequest, DOM
        3 L&amp;S, xml data islands, DOMParser) in browser-like UAs to
        have a document that's not being presented in a browsing
        context, but how to test this?  Maybe the spec just shouldn't
        say anything about documents not presented in a browsing
        context.</div>
      </p>
    </div>

  </div>

  <div class="section"><h2 id="navigation">3. Navigation</h2>
    <div class="ednote">Need prose description for this section, including
    definition of terms, etc.</div>

    

    <div class="section"><h3 id="window-location">3.1. The <em>Window</em> Interface, Location Attributes</h3>
      

      <div class="boxed"><p><span class="idlTitle"></span></p><pre class="schema" title="">

interface Window : views::AbstractView {
    // ...

    // assigning this has special behavior in ECMAScript, but it is otherwise 
    // read only. specifically, in ES a string URI can be assigned to location, 
    // having the same effect as location.assign(URI)
    readonly attribute Location location;

    // ...
};</pre></div>

      <div class="section"><h4 id="window-location-attributes">3.1.1. Attributes</h4>
        
       
        <p><code>Window</code> objects <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> implement the following attributes:</p>

    <dl>
        <dt><dfn id="attr-location">location</dfn></dt>
        <dd>
          The value of the location attribute <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be the Location
          object that represents the window's current
          location. <div class="ednote">Need to define the term "current location"
          in prose.</div>
        </dd>
    </dl>

    </div>

    </div>

    <div class="section"><h3 id="document-location">3.2. The <em>DocumentWindow</em> Interface, Location Attributes</h3>
      
      <div class="boxed"><p><span class="idlTitle"></span></p><pre class="schema" title="">

interface DocumentWindow  : views::DocumentView {
    // ...
    // same special JS assignment as window.location
    readonly attribute Location location;
    // ...
};</pre></div>

      <div class="section"><h4 id="document-location-attributes">3.2.1. Attributes</h4>
        

    <p><code>DocumentWindow</code> objects <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> implement the following attributes:</p>

    <dl>
        <dt><dfn id="attr-doc-location">location</dfn></dt>
        <dd>The value of the location attribute <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be a Location
        object that represents the DocumentWindow's current
        location. The value <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be the same as the Location for all
        views of the document. <div class="ednote">Need to define the term
        "current location" in prose.</div></dd>
    </dl>

    </div>

    </div>

    <div class="section"><h3 id="location">3.3. The <em>Location</em> Interface</h3>
      
    
    <div class="ednote">Should all the instances of DOMString be core::DOMString?</div>
      <div class="boxed"><p><span class="idlTitle"></span></p><pre class="schema" title="">

interface Location {
    attribute DOMString href;
		
    // pieces of the URI, per the generic URI syntax
    attribute DOMString hash;
    attribute DOMString host;
    attribute DOMString hostname;
    attribute DOMString pathname;
    attribute DOMString port;
    attribute DOMString protocol;
    attribute DOMString search;

    void assign(in DOMString url);
    void replace(in DOMString url);
    void reload();

    DOMString toString();
};</pre></div>

      <div class="section"><h4 id="location-attributes">3.3.1. Attributes</h4>
        

    <p><code>Location</code> objects <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> implement the following attributes:</p>

      <dl>
        <dt><dfn id="attr-href">href</dfn></dt>

        <dd>
          The value of the <code>href</code> attribute <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be the
          absolute URI reference [<cite><a href="#RFC2396" class="bibref">RFC2396</a></cite>] that is the Location's
          current location. When the <code>href</code> atribute is
          set, the Location's window <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> <em>navigate</em> to the newly set value.
	  <div class="ednote">Must define the term navigate</div>
	  <div class="ednote">Should resulution of relative URI references be 
	  defined here or in the bindings?</div>
        </dd>

        <dt><dfn id="attr-hash">hash</dfn></dt>
        <dd>
          If the absolute URI reference[<cite><a href="#RFC2396" class="bibref">RFC2396</a></cite>] for the Location's
          current location has a fragment identifier[<cite><a href="#RFC2396" class="bibref">RFC2396</a></cite>], then
          the value of the <code>hash</code> attribute the value of
          this attribute <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be the string concatenation of the hash
          mark(#) and the fragment identifier. Otherwise, the value of
          the <code>hash</code> attribute <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> be the empty
          string. <div class="ednote">what about non-HTTP? -- I think fragment IDs
          should apply to all URI schemes.</div> When this atribute is 
	  set to a new value <var>new-hash</var>, user agents <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> perform
	   the following steps:
	  <ol>
	  <li>Give the hash attribute the value <var>new-hash</var>.</li>
	  <li><em>Reconstruct the location URI</em><div class="ednote">Need to define the 
	  term "reconstruct the location URI".</div></li>
	  <li><em>Navigate</em> to the result of step 2.</li>
	  </ol>
        </dd>

<div class="ednote">The remainder of these attribute descriptions need to be
rewritten to state conformance requirements. In the manner of the above.</div>

        <dt><dfn id="attr-host">host</dfn></dt>
        <dd>
          This attribute represents the network host of the Location's
          URI. If the port attribute is not null then the host
          attribute's value is the concatenation of the hostname
          attribute, a colon (:) and the port attribute. If the port
          attribute is null then the host attribute's value is
          identical to the hostname attribute.
        </dd>


        <dt><dfn id="attr-hostname">hostname</dfn></dt>
        <dd>
          This attribute represents the name or IP address of the
          network location without any port number.
        </dd>

        <dt><dfn id="attr-pathname">pathname</dfn></dt>
        <dd>
          This attribute represents the path component of the
          Location's URI which consists of everything after the host
          and port up to and excluding the first question mark (?) or
          hash mark (#).
        </dd>

        <dt><dfn id="attr-port">port</dfn></dt>
        <dd>
          This attribute represents the port number of the network
          location.
        </dd>
        
        <dt><dfn id="attr-protocol">protocol</dfn></dt>
        <dd>
          This attribute represents the scheme of the URI including
          the trailing colon (:)
        </dd>

        <dt><dfn id="attr-search">search</dfn></dt>
        <dd>
          This attribute represents the query portion of a URI. It
          consists of everything after the pathname up to and
          excluding the first hash mark (#).
       </dd>
     </dl>

     </div>

      <div class="section"><h4 id="location-methods">3.3.2. Methods</h4>
        

    <p><code>Location</code> objects <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em> implement the following methods:</p>

      <div class="ednote">These all need to be rewritten to state conformance requirements.</div>

      <dl>

        <div class="ednote">Need description for assign.</div>

	<div class="ednote">Need description for toString, if we specify that. It
	has the same value as href; not all implementations have this
	explicitly but toString is always available in ECMAScript, and
	probably this should be explicit for the sake of Java. Or we
	could skip it since it matches href, and define string
	conversion in the JS bindings.</div>

        <dt><dfn id="meth-replace">replace(<var>url</var>)</dfn></dt>
        <dd>This function replaces the current history entry with the url specified. <div class="ednote">we haven't specified history - but we need to if we are to support this</div></dd>

        <dt><dfn id="meth-reload">reload()</dfn></dt>
        <dd>This function forces the host application to reload the resource identified by the Location. <div class="ednote">Netscape used to allow a bool argument to force an unconditional GET from the network</div></dd>
     </dl>
     </div>

    </div>

  </div>

  <div class="section"><h2 id="embedding">4. Embedding: Compound Documents by Reference</h2>
    

    <div class="ednote">Need to fold in Anne's prose for this section.</div>

    <div class="section"><h3 id="window-embedding">4.1. The <em>Window</em> Interface, Embedding Attributes</h3>
      

      <div class="boxed"><p><span class="idlTitle"></span></p><pre class="schema" title="">

interface Window {
    // name attribute of referencing frame/iframe/object, or name passed to 
    // window.open, does it make sense to spec this without being html-specific 
    // or defining open?
    attribute DOMString name;

    // global object of containing document
    readonly attribute Window parent;

    // global object of outermost containing document
    readonly attribute Window top;

    // referencing &lt;html:frame&gt;, &lt;html:iframe&gt;, &lt;html:object&gt;, &lt;svg:foreignObject&gt;, 
    // &lt;svg:animation&gt; or other embedding point, or null if none
    readonly attribute core::Element frameElement;
};</pre></div>

      <div class="ednote">This needs fixing to clearly state the conformance requirements.</div>

      <dl>
        <dt><dfn id="attr-parent">parent</dfn></dt>
        <dd>An attribute containing a reference to Window object that contains this object. <div class="ednote">What behaviour if no parent - null? [if this is a top-level browsing context, the value is self - mjs]</div></dd>

        <dt><dfn id="attr-top">top</dfn></dt>
        <dd>An attribute containing a reference to the topmost Window object in the hierarchy that contains this object. <div class="ednote">What behaviour if this is the top - self reference or null? [if this is a toplevel browsing context, the value is self - mjs]</div></dd>

        <dt><dfn id="attr-name">name</dfn></dt>
        <dd>An attribute containing a unique name used to refer to this Window object.
	<div class="ednote">Need to describe how this could come from a containing element.</div>
	</dd>

        <dt><dfn id="attr-frameElement">frameElement</dfn></dt>
        <dd><div class="ednote">@@TODO</div></dd>
      </dl>


    </div>

    <div class="section"><h3 id="embeddingelt">4.2. The <em>EmbeddingElement</em> Interface</h3>
      
      <div class="boxed"><p><span class="idlTitle"></span></p><pre class="schema" title="">

// must be on an object that also implements core::Element
interface EmbeddingElement {
    readonly attribute core::Document contentDocument;
    readonly attribute Window contentWindow;
};</pre></div>

    </div>

    <div class="ednote">Need actual description.</div>

  </div>

  <div class="section"><h2 id="timers">5. Timers</h2>
    

    <div class="ednote">Need to describe processing model for timers.</div>

    <div class="section"><h3 id="window-timers">5.1. The <em>Window</em> Interface, Timer Attributes</h3>
      

      <div class="boxed"><p><span class="idlTitle"></span></p><pre class="schema" title="">

interface Window {
    // should timers allow more than long, maybe a floating point type? 
    // don't think anyone's timers have more precision

    // one-shot timer
    long setTimeout(in TimerListener listener, in long milliseconds);
    void clearTimeout(in long timerID);

    // repeating timer
    long setInterval(in TimerListener listener, in long milliseconds);
    void clearInterval(in long timerID);
};</pre></div>

<dl>
        <dt><dfn id="meth-setTimeout">setTimeout(<var>function</var>, <var>milliseconds</var>)</dfn></dt>
        <dd>This method calls the function once after a specified number of milliseconds elapses, until canceled by a call to clearTimeout. The methods returns a timerID which may be used in a subsequent call to clearTimeout to cancel the interval.</dd>

        <dt><dfn id="meth-setInterval">setInterval(<var>function</var>, <var>milliseconds</var>)</dfn></dt>
        <dd>This method calls the function every time a specified number of milliseconds elapses, until canceled by a call to clearInterval. The methods returns an intervalID which may be used in a subsequent call to clearInterval to cancel the interval.</dd>

        <dt><dfn id="meth-clearTimeout">clearTimeout(<var>timerID</var>)</dfn></dt>
        <dd>Cancels a timeout that was set with the setTimeout method.</dd>

        <dt><dfn id="meth-clearInterval">clearInterval(<var>intervalID</var>)</dfn></dt>
        <dd>Cancels an interval that was set with the setTimeout method.</dd>
    </dl>

    </div>

    <div class="section"><h3 id="timerlistener">5.2. The <em>TimerListener</em> Interface</h3>
      
      <div class="boxed"><p><span class="idlTitle"></span></p><pre class="schema" title="">

// behavior is always special in ECMAScript, this is defined only for the benefit
// of other languages
interface TimerListener {
    // what to put here?
};</pre></div>

    <div class="ednote">Need to define this. In ES bindings, a function or string is the only thing allowed.</div>

    </div>

  </div>

  <div class="section"><h2 id="security">6. Security Considerations</h2>
    

    <div class="ednote">Needs a discussion of various kinds of cross-site
    scripting and phishing exploits, and known defenses against
    them.</div>

  </div>

  <div class="section"><h2 id="idl">A. IDL Definitions</h2>
    

    <div class="ednote">Need to fill in the full IDL here.</div>
  </div>


  <div class="section"><h2 id="ecmascript">B. ECMAScript Language Binding</h2>
    

    <div class="ednote">Need to define all the ECMAScript-specific issues, such as which properties
    are shadowable or replaceable, assigning to the location property, passing functions or
    strings as timers, etc.</div>
  </div>

  <div class="section"><h2 id="java">C. Java Language Binding</h2>
    

    <div class="ednote">Need to write this.</div>
  </div>

  <div class="section"><h2 id="acknow">D. Acknowledgements</h2>
    
    
    <p>
      The WebAPI <acronym title="Working Group">WG</acronym> would like to thanks the following people for contributing to this specification:
    </p>

    <p>
      Special thanks to Ian Hickson for making the first attempt to
      standardize the Window object in Web Apps 1.0, drafts of which
      heavily influenced this document. In particular, he coined the
      term "browsing context".
    </p>

  </div>

  <div class="section"><h2 id="bibref">E. References</h2>
    

    <div class="ednote">Need to be able to include organization and date for references.</div>

    <div class="ednote">Need appropriate cites for DOM Core and OMG IDL.</div>

    <div class="ednote">Need titles and authors for DOM2Views</div>
    <div class="ednote">Need titles and authors for DOM3Core</div>
    <div class="ednote">Need titles and authors for ECMAScript</div>
    <div class="ednote">Need titles and authors for Java</div>

    <dl class="bibliography">
      
      
      
      
      
    <dt id="DOM2Views">DOM2Views</dt><dd><cite><a href=""></a></cite>,
    </dd><dt id="DOM3Core">DOM3Core</dt><dd><cite><a href=""></a></cite>,
    </dd><dt id="DOM3EV">DOM3EV</dt><dd><cite><a href="http://www.w3.org/TR/DOM-Level-3-Events/">Document Object Model (DOM) Level 3 Events Specification</a></cite>,
    <span class="person">Philippe Le Hégaret (W3C)</span>, and <span class="person">Tom Pixley (Netscape Communications Corporation)</span>.</dd><dt id="ECMAScript">ECMAScript</dt><dd><cite><a href=""></a></cite>,
    </dd><dt id="Java">Java</dt><dd><cite><a href=""></a></cite>,
    </dd><dt id="RFC2119">RFC2119</dt><dd><cite><a href="http://www.ietf.org/rfc/rfc2119.txt">Key words for use in RFCs to Indicate Requirement Levels</a></cite>,
    <span class="person">S. Bradner</span>.</dd><dt id="RFC2396">RFC2396</dt><dd><cite><a href="http://www.ietf.org/rfc/rfc2396.txt">Uniform Resource Identifiers (URI): Generic Syntax</a></cite>,
    <span class="person">T. Berners-Lee</span>, <span class="person">R. Fielding</span>, and <span class="person">L. Masinter</span>.</dd></dl>
  </div>
</body></html>
