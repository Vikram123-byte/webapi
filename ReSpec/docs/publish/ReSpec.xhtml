<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
          ******* WARNING ********
          This document was automatically generated using the Re-Spec specification
          publishing system. Edits made here are likely to be lost when it is
          regenerated.
          ******* WARNING ********
        -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>ReSpec Documentation 1.0</title>
<link rel="stylesheet" href="respec-w3c.css" type="text/css" />
<link rel="stylesheet" href="http://www.w3.org/StyleSheets/TR/W3C-MO" type="text/css" />
<meta name="revision" content="$Id: ReSpec.xhtml,v 1.1 2006-03-06 16:34:06 rberjon Exp $" />
</head>
<body><div class="head"><p><a href="http://www.w3.org/"><img class="head" src="http://www.w3.org/Icons/w3c_home" width="72" height="48" alt="W3C" /></a></p><h1 class="head">ReSpec Documentation 1.0</h1><h2 id="pagesubtitle">Informal Document <em>  </em></h2><dl><dt>Editor:</dt><dd><span class="person"><a href="http://berjon.com/">Robin Berjon</a> (Expway) &lt;<a href="mailto:robin.berjon@expway.fr">robin.berjon@expway.fr</a>&gt;</span></dd></dl><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©2006
        <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>,
        <a href="http://www.ercim.org/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and 
        <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document  use</a> rules apply.
      </p></div><hr />
  
  
  <div class="section"><h2 id="toc">Table of contents</h2>
    
    <ul class="toc"><li><a href="#intro">1. Introduction</a></li><li><ul class="toc"><li><a href="#features">1.1. Key features</a></li><li><ul class="toc"><li><a href="#feat-split">1.1.1. Splitting (@TODO)</a></li><li><a href="#feat-relink">1.1.2. Relinking (@TODO)</a></li><li><a href="#feat-style">1.1.3. Multi-styling</a></li><li><a href="#feat-rng">1.1.4. RelaxNG (@PARTIAL)</a></li><li><a href="#feat-rfc">1.1.5. RFC2129 keyword highlighting</a></li><li><a href="#feat-acro">1.1.6. Acronym detection</a></li><li><a href="#feat-idl">1.1.7. IDL support (@TODO)</a></li><li><a href="#feat-app">1.1.8. Autogenerated appendices (@TODO)</a></li><li><a href="#feat-gloss">1.1.9. Glossary support (@TODO)</a></li><li><a href="#feat-bundle">1.1.10. Autobundling (@TODO)</a></li><li><a href="#feat-checks">1.1.11. Various checks (@TODO)</a></li><li><a href="#feat-biblodb">1.1.12. Bibliography database</a></li><li><a href="#feat-testable">1.1.13. Testable assertion management (@TODO)</a></li></ul></li></ul></li><li><a href="#elements">2. Elements</a></li><li><ul class="toc"><li><a href="#structure">2.1. Structural elements</a></li><li><ul class="toc"><li><a href="#elem-specification">2.1.1. The specification element</a></li><li><a href="#elem-section">2.1.2. The section element</a></li><li><a href="#elem-title">2.1.3. The title element</a></li><li><a href="#elem-include">2.1.4. The include element</a></li><li><a href="#elem-ednote">2.1.5. The ednote element</a></li><li><a href="#elem-schema">2.1.6. The schema element</a></li></ul></li><li><a href="#inline">2.2. Inline elements</a></li><li><ul class="toc"><li><a href="#elem-at">2.2.1. The at element</a></li><li><a href="#elem-el">2.2.2. The el element</a></li><li><a href="#elem-ev">2.2.3. The ev element</a></li><li><a href="#elem-pi">2.2.4. The pi element</a></li><li><a href="#elem-prop">2.2.5. The prop element</a></li></ul></li><li><a href="#bibliographic">2.3. Bibliographic elements</a></li><li><ul class="toc"><li><a href="#elem-bibliography">2.3.1. The bibliography element</a></li><li><a href="#elem-bibentry">2.3.2. The bibentry element</a></li><li><a href="#elem-entry">2.3.3. The entry element</a></li><li><a href="#elem-link">2.3.4. The link element</a></li></ul></li><li><a href="#metadata">2.4. Metadata elements</a></li><li><ul class="toc"><li><a href="#elem-metadata">2.4.1. The metadata element</a></li><li><a href="#elem-people">2.4.2. Elements describing people</a></li><li><a href="#elem-date">2.4.3. The date element</a></li><li><a href="#elem-styling">2.4.4. The styling element</a></li><li><a href="#elem-version">2.4.5. Elements describing versions</a></li></ul></li><li><a href="#elem-xhtml">2.5. Elements taken from XHTML</a></li><li><a href="#generated">2.6. Generated elements</a></li><li><ul class="toc"><li><a href="#elem-rfc2119">2.6.1. The rfc2119 element</a></li><li><a href="#elem-bibref">2.6.2. The bibref element</a></li></ul></li><li><a href="#pis">2.7. Processing Instructions</a></li><li><ul class="toc"><li><a href="#pi-respec-toc">2.7.1. The respec-toc processing instruction</a></li></ul></li></ul></li><li><a href="#scheme-respec">3. The respec: scheme</a></li><li><a href="#special-ids">4. Special identifiers for elements</a></li></ul><ul class="toc"><li><a href="#bibref">A. References</a></li></ul>
  </div>
  
  <div class="section"><h2 id="intro">1. Introduction</h2>
    
    <p>
      The goal of Re-Spec is to provide a convenient framework in which
      to write specifications of various kinds but mostly orientated towards
      the W3C style. It does not claim or intend to be a perfect specification
      framework or better than other solutions such as XMLSpec [<cite><a href="#XMLSpec" class="bibref">XMLSpec</a></cite>] or
      XHTML+classes. Simply, it has been created to suit the needs of its
      author, and perhaps those of like-minded individuals, assuming such
      entities even exist. It does, however, have a much cooler name than 
      any of the other options.
    </p>

    <p>
      Please note that some parts of this document are loosely described
      compared to what a proper specification would mandate. This is because
      here we are merely <em>documenting</em> how the one and only implementation
      of Re-Spec works, not <em>specifying</em> in order to make independent
      interoperable implementations. If you are interested in implementing
      Re-Spec differently from the current single implementation, please
      contact the author and I will tighten up this document.
    </p>

    <div class="section"><h3 id="features">1.1. Key features</h3>
      
      <p>
        A first pass at implementing the features below has been done
        but a fair number remains. The latter are identified by @TODO
        or @PARTIAL. The version of ReSpec documented here is 0.04.
      </p>

      <div class="section"><h4 id="feat-split">1.1.1. Splitting (@TODO)</h4>
        
        <p>
          The tool should know how to create a multipage document by 
          splitting on the root sections, naming the pages based on the
          ID of that section, and know how to rewrite all the internal 
          links so that they work (look for the ID, then its section 
          ancestors, and point to that).
        </p>
      </div>

      <div class="section"><h4 id="feat-relink">1.1.2. Relinking (@TODO)</h4>
        
        <p>
          The links in the spec should only ever point to IDs, so that 
          the XSLT can decide which extension to use.
        </p>
      </div>

      <div class="section"><h4 id="feat-style">1.1.3. Multi-styling</h4>
        
        <p>
          Through the use of a sensible base stylesheet, it ought to be
          possible to produce new styles easily by overriding a minimal
          amount of templates.
        </p>
      </div>

      <div class="section"><h4 id="feat-rng">1.1.4. RelaxNG (@PARTIAL)</h4>
        
        <p>
          RelaxNG should be embeddable straight into the specification, 
          along with annotations that describe the elements and attributes,
          as well as ways to override the auto-generated description. The 
          style of the RNG will have to be specific. The XSLT will then
          auto-generate descriptions of the element and attributes based 
          on that. Weenies will want RNC, they get that option but later.
          The RNG may get some syntax highlighting.
        </p>
      </div>

      <div class="section"><h4 id="feat-rfc">1.1.5. RFC2129 keyword highlighting</h4>
        
        <p>
          Automatically any capitalized <em class="rfc2119" title="Keyword in RFC 2119 context">MUST</em>, <em class="rfc2119" title="Keyword in RFC 2119 context">SHOULD</em>, <em class="rfc2119" title="Keyword in RFC 2119 context">SHALL</em>, <em class="rfc2119" title="Keyword in RFC 2119 context">MAY</em>, possibly
          followed by a NOT will find themselves wrapped in an <a href="#elem-rfc2119" class="elem-name">&lt;rfc2119&gt;</a>
          element which'll be transformed into something nice by the XSLT.
        </p>
      </div>

      <div class="section"><h4 id="feat-acro">1.1.6. Acronym detection</h4>
        
        <p>
          Any occurence of an abbr or acronym element will cause a search so
          that all the other occurences of the same term that aren't marked 
          up will be marked up.
        </p>
      </div>

      <div class="section"><h4 id="feat-idl">1.1.7. IDL support (@TODO)</h4>
        
        <p>
          Handling IDL is horrible. We will use an XML syntax that will fully
          describe the IDL and the spec prose, and that will be used to 
          generate both the prose and the IDL snippets. The IDL may get 
          some syntax highlighting. Or not. We might just parse the IDL
          using some code that has been written for SVG.
        </p>
      </div>

      <div class="section"><h4 id="feat-app">1.1.8. Autogenerated appendices (@TODO)</h4>
        
        <p>
          Based on the above, lists of elements, attributes, and interfaces
          can be generated if need be for the appendix.
        </p>
      </div>

      <div class="section"><h4 id="feat-gloss">1.1.9. Glossary support (@TODO)</h4>
        
        <p>
          If a glossary is defined, links will be auto-generated from occurences
          to it. This should ideally be done without elements to mark defined
          terms.
        </p>
      </div>

      <div class="section"><h4 id="feat-bundle">1.1.10. Autobundling (@TODO)</h4>
        
        <p>
          All the dependencies of a spec can be listed and then packed into a
          zip file and a tarball.
        </p>
      </div>

      <div class="section"><h4 id="feat-checks">1.1.11. Various checks (@TODO)</h4>
        
        <p>
          When being published a Re-Spec document will have its spelling,
          its pubrules-validity, and various other things validated.
          One thing that notably needs to be checked is that when an internal
          link to an anchor is created, it needs to exist.
        </p>
      </div>
      
      <div class="section"><h4 id="feat-biblodb">1.1.12. Bibliography database</h4>
        
        <p>
          Many specs tend to reuse always the same set of bibliographic
          references. Rather than having to always create or copy them anew,
          ReSpec provides a pre-existing database using the typical keys
          for those references. Simply using the square-bracket markup
          will cause the right entry to be added to the bibliography.
        </p>
      </div>

      <div class="section"><h4 id="feat-testable">1.1.13. Testable assertion management (@TODO)</h4>
        
        <p>
          Each section can be categorised by normativity (reference, content,
          ua, discussion, etc.). Then a tool would expose present the various
          sections that have a given normativity (ua for test suite production,
          content for validation suite production) and in those split each
          sentence that it would present on separate lines. For each of those
          sentences one could say if it's a testable assertion or not, and if
          it is give it an ID. The tool would save that information in a separate
          document, using both the XPath relative to the closest ancestor with
          a given ID and the text of the sentence. This is to be used once the
          text is reasonably stable, but when reloading a document it would make
          a best effort to re-locate things that have changed. One could also
          associate TAs with tests, produce a coverage report, etc.
        </p>
      </div>
    </div>
  </div>

	<div class="section"><h2 id="elements">2. Elements</h2>
		
		<p>
      This section presents a rather simplified descriptions of the
      elements which are available for use within Re-Spec. The categories
      may not be the most intuitive in all cases.
    </p>
    <p>
      All elements are in the <code>http://berjon.com/ns/re-spec/</code> 
      namespace, unless otherwise specified.
    </p>
    <p>
      Most elements in this draft documentation don't have a corresponding
      RNG snippet yet. They'll get one as things go.
    </p>
		
		<div class="section"><h3 id="structure">2.1. Structural elements</h3>
			
			<p>
			  These elements define the backbone of the document.
			</p>

			<div class="section"><h4 id="elem-specification">2.1.1. The specification element</h4>
				
				<p>
				  This is the root element for all documents. The version attribute
				  must be present and its value must currently be equal to "1.0".
				  Note that this is not currently enforced.
				</p>
				<p>
				  Typically, it would contain one <a href="#elem-metadata" class="elem-name">&lt;metadata&gt;</a> element and
				  several <a href="#elem-section" class="elem-name">&lt;section&gt;</a> elements.
			  </p>
				<div class="boxed"><p><span class="schemaTitle">The specification element</span></p><pre class="schema" title="The specification element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-specification" title="Definition of |specification|" class="rngref">specification</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">specification</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-section">2.1.2. The section element</h4>
				
				<p>
				  The section element defines a section inside a specification,
				  and can be nested to arbitrary depths. It must have an
				  
        '<a href="#attr-xml:id" class="attr-name">xml:id</a>'
       attribute, may have a 
        '<a href="#attr-type" class="attr-name">type</a>'
       attribute,
				  must have a <a href="#elem-title" class="elem-name">&lt;title&gt;</a> child, and may then contain a variety
				  of XHTML block-level elements such as <a href="#elem-p" class="elem-name">&lt;p&gt;</a>, <a href="#elem-ul" class="elem-name">&lt;ul&gt;</a>, 
				  or <a href="#elem-table" class="elem-name">&lt;table&gt;</a>.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The section element</span></p><pre class="schema" title="The section element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-section" title="Definition of |section|" class="rngref">section</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">section</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
				<p>
				  The 
        '<a href="#attr-type" class="attr-name">type</a>'
       attribute has a variety of predefined values with
				  specific behaviours.
			  </p>
				<dl>
				  <dt>abstract</dt>
				  <dd>
				    Identifies the section as an abstract. This removes it from the TOC.
			    </dd>
				  <dt>w3c-abstract</dt>
				  <dd>
				    Identifies the section as an abstract following W3C style. This removes
				    it from the TOC and also applies some W3C specific processing.
			    </dd>
				  <dt>w3c-sotd</dt>
				  <dd>
				    Identifies the section as a state of this document section following W3C
				    style. This removes it from the TOC and also applies some W3C specific processing.
			    </dd>
				  <dt>toc</dt>
				  <dd>
				    Identifies the section as a table of contents.  This removes it from the TOC.
				    Note that this does not cause a TOC to be generated, you need the <a href="#pi-respec-toc" class="pi-name">&lt;?respec-toc?&gt;</a>
				    processing instruction for that.
			    </dd>
				  <dt>appendix</dt>
				  <dd>
				    Identifies the section as an appendix. This causes its numbering to use letters
				    instead of numbers in the present style sheets.
			    </dd>
			  </dl>
			</div>

			<div class="section"><h4 id="elem-title">2.1.3. The title element</h4>
				
				<p>
				  The title element is used to capture titles. Inside the <a href="#elem-metadata" class="elem-name">&lt;metadata&gt;</a>
				  element it's the specification's title, inside other elements it applies
				  directly to its parent element (<a href="#elem-section" class="elem-name">&lt;section&gt;</a>, <a href="#elem-section" class="elem-name">&lt;section&gt;</a>, 
				  <a href="#elem-example" class="elem-name">&lt;example&gt;</a>, <a href="#elem-schema" class="elem-name">&lt;schema&gt;</a>, etc.).
				</p>
				<p>
				  While most of the time only its textual content will be used, for section
				  titles the <a href="#elem-at" class="elem-name">&lt;at&gt;</a>, <a href="#elem-pi" class="elem-name">&lt;pi&gt;</a>, <a href="#elem-ev" class="elem-name">&lt;ev&gt;</a>, <a href="#elem-prop" class="elem-name">&lt;prop&gt;</a>, and <a href="#elem-el" class="elem-name">&lt;el&gt;</a>
				  elements will be processed specially.
			  </p>
				<div class="boxed"><p><span class="schemaTitle">The title element</span></p><pre class="schema" title="The title element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-title" title="Definition of |title|" class="rngref">title</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">title</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-include">2.1.4. The include element</h4>
				
				<p>
				  This is used to include other documents (which are not required to be ReSpec 
				  documents, they only need to be XML) with the 
        '<a href="#attr-href" class="attr-name">href</a>'
       attribute
				  pointing relative to the document in which the element occurs. Future
				  improvements will likely include the ability to have absolute links,
				  <a href="#scheme-respec">respec:</a> links, and to taking xml:base into
				  account. Some XPointer schemes, notably the xpath scheme, may be 
				  considered as well.
				</p>
				<p>
				  Note that fragment identifiers will always be processed as if the linked
				  document was of type application/xml, which is to say that the element
				  with the given ID will be included. This is often used to include part of
				  an external RelaxNG schema inside a <a href="#elem-schema" class="elem-name">&lt;schema&gt;</a> element (this document
				  does precisely that).
			  </p>
				<div class="boxed"><p><span class="schemaTitle">The include element</span></p><pre class="schema" title="The include element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-include" title="Definition of |include|" class="rngref">include</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">include</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-ednote">2.1.5. The ednote element</h4>
				
				<p>
				  This element is meant to flag that part of the document is an editorial note.
				  This normally causes them to stick out strongly. Editorial notes are not
				  normally meant for public consumption. It is possible that future versions
				  will provide a flag to turn them on and off.
				</p>
				<p>
				  This element can contain pretty much anything else.
			  </p>
				<div class="boxed"><p><span class="schemaTitle">The ednote element</span></p><pre class="schema" title="The ednote element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-ednote" title="Definition of |ednote|" class="rngref">ednote</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">ednote</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-schema">2.1.6. The schema element</h4>
				
				<p>
				  The schema element is used to capture schemata. These can be of several
				  types. Currently, RelaxNG is largely supported (at least for many simple
				  RelaxNG constructs), EBNF is supported but will be extended, and IDL
				  support is planned for very soon. The way the type is decided is
				  by looking at the child elements. It should also contain a title child.
				  XML Schema support may be added some day.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The schema element</span></p><pre class="schema" title="The schema element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-schema" title="Definition of |schema|" class="rngref">schema</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">schema</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
				<dl>
				  <dt>namespace is RelaxNG</dt>
				  <dd>
				    If the namespace of its content is the RelaxNG namespace, then this
				    mode is used.
			    </dd>
				  <dt xml:id="elem-ebnf" id="elem-ebnf">ebnf</dt>
				  <dd>
				    If it contains an <a href="#elem-ebnf" class="elem-name">&lt;ebnf&gt;</a> element then the EBNF mode is used.
				    The <a href="#elem-ebnf" class="elem-name">&lt;ebnf&gt;</a> element contains an EBNF grammar in raw text that
				    will be re-indented and should in the future gain autogenerated links.
			    </dd>
				  <dt xml:id="elem-idl" id="elem-idl">idl</dt>
				  <dd>
				    If it contains an <a href="#elem-idl" class="elem-name">&lt;idl&gt;</a> element then the IDL mode is used.
				    The <a href="#elem-idl" class="elem-name">&lt;idl&gt;</a> element contains an IDL interface in raw text that
				    once supported will be re-indented and gain autogenerated links with
				    specific IDs for cross-referencing.
			    </dd>
			  </dl>
			</div>
    </div>

		<div class="section"><h3 id="inline">2.2. Inline elements</h3>
			
			<p>
			  Inline elements are used to markup regular text in a variety of convenient ways.
			</p>

			<div class="section"><h4 id="elem-at">2.2.1. The at element</h4>
				
				<p>
				  This element is used to mark that its content is an attribute name. The 
        '<a href="#attr-at-el" class="attr-name">el</a>'
      
				  attribute can be used to say that it's an attribute that belongs to that
				  given element. The content must be an attribute name, and that only. A
				  link will be generated to an ID as per the rules documented in 
				  <a href="#special-ids">the section on special identifiers</a>.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The at element</span></p><pre class="schema" title="The at element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-at" title="Definition of |at|" class="rngref">at</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">at</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-el">2.2.2. The el element</h4>
				
				<p>
				  This element is used to mark that its content is an element name. 
				  The content must be an element name, and that only. A
				  link will be generated to an ID as per the rules documented in 
				  <a href="#special-ids">the section on special identifiers</a>.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The el element</span></p><pre class="schema" title="The el element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-el" title="Definition of |el|" class="rngref">el</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">el</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-ev">2.2.3. The ev element</h4>
				
				<p>
				  This element is used to mark that its content is an event name. 
				  The content must be an event name, and that only. A
				  link will be generated to an ID as per the rules documented in 
				  <a href="#special-ids">the section on special identifiers</a>.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The ev element</span></p><pre class="schema" title="The ev element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-ev" title="Definition of |ev|" class="rngref">ev</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">ev</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-pi">2.2.4. The pi element</h4>
				
				<p>
				  This element is used to mark that its content is a PI name. 
				  The content must be a PI name, and that only. A
				  link will be generated to an ID as per the rules documented in 
				  <a href="#special-ids">the section on special identifiers</a>.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The pi element</span></p><pre class="schema" title="The pi element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-pi" title="Definition of |pi|" class="rngref">pi</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">pi</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-prop">2.2.5. The prop element</h4>
				
				<p>
				  This element is used to mark that its content is a property name. 
				  The content must be a property name, and that only. A
				  link will be generated to an ID as per the rules documented in 
				  <a href="#special-ids">the section on special identifiers</a>.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The prop element</span></p><pre class="schema" title="The prop element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-prop" title="Definition of |prop|" class="rngref">prop</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">prop</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>
		</div>

		<div class="section"><h3 id="bibliographic">2.3. Bibliographic elements</h3>
			
			<p>
			  These elements are used in the creation of bibliographies.
			</p>

			<div class="section"><h4 id="elem-bibliography">2.3.1. The bibliography element</h4>
				
				<p>
				  This is the root of a bibliography. Future versions may distinguish
				  between normative and informative ones. It contains a series of
				  <a href="#elem-bibentry" class="elem-name">&lt;bibentry&gt;</a> elements.
				</p>
				<p>
				  If you wish to only use the bibliographic database without bothering
				  to create the entries yourself, you can have an empty bibliography
				  element to which the entries will get added at generation time.
				  Please keep in mind though that the DB is currently somewhat limited
				  (but I'm adding to it as I go).
			  </p>
				<div class="boxed"><p><span class="schemaTitle">The bibliography element</span></p><pre class="schema" title="The bibliography element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-bibliography" title="Definition of |bibliography|" class="rngref">bibliography</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">bibliography</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-bibentry">2.3.2. The bibentry element</h4>
				
				<p>
				  Captures a single entry, or a group of entries that are commonly
				  referred in most cases. If it is a single entry, the entry is
				  described directly inside this element. If a group entry, then
				  there may be several <a href="#elem-p" class="elem-name">&lt;p&gt;</a> elements introducing the group
				  followed by several <a href="#elem-entry" class="elem-name">&lt;entry&gt;</a> elements which will capture
				  individual entries. The content model for the single entry version
				  is described as part of the <a href="#elem-entry" class="elem-name">&lt;entry&gt;</a> element.
				</p>
				<p>
				  It is required that there be an 
        '<a href="#attr-xml:id" class="attr-name">xml:id</a>'
       attribute that
				  corresponds exactly to the short name of the entry used in 
				  the specs' references.
			  </p>
				<div class="boxed"><p><span class="schemaTitle">The bibentry element</span></p><pre class="schema" title="The bibentry element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-bibentry" title="Definition of |bibentry|" class="rngref">bibentry</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">bibentry</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-entry">2.3.3. The entry element</h4>
				
				<p>
				  Describes a single bibliographic entry. This is expected to have
				  a <a href="#elem-title" class="elem-name">&lt;title&gt;</a>, a <a href="#elem-link" class="elem-name">&lt;link&gt;</a>, a <a href="#elem-date" class="elem-name">&lt;date&gt;</a>, and an
				  <a href="#elem-authors" class="elem-name">&lt;authors&gt;</a> element.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The entry element</span></p><pre class="schema" title="The entry element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-entry" title="Definition of |entry|" class="rngref">entry</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">entry</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-link">2.3.4. The link element</h4>
				
				<p>
				  Contains a single IRI that is the link to that entry. Currently
				  only online resources may be referenced in a bibliography.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The link element</span></p><pre class="schema" title="The link element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-link" title="Definition of |link|" class="rngref">link</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">link</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>
		</div>

		<div class="section"><h3 id="metadata">2.4. Metadata elements</h3>
			
			<p>
			  A variety of elements are available to describe what can be
			  vaguely called metadata. They are not restricted to the
			  metadata headers in the document but are also reused in
			  other contexts such as bibliographic entries.
			</p>

			<div class="section"><h4 id="elem-metadata">2.4.1. The metadata element</h4>
				
				<p>
				  This is the header element for the entire specification. It contains
				  a <a href="#elem-title" class="elem-name">&lt;title&gt;</a>, <a href="#elem-styling" class="elem-name">&lt;styling&gt;</a> information, a <a href="#elem-date" class="elem-name">&lt;date&gt;</a>,
				  and possibly <a href="#elem-editors" class="elem-name">&lt;editors&gt;</a> and <a href="#elem-authors" class="elem-name">&lt;authors&gt;</a>.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The metadata element</span></p><pre class="schema" title="The metadata element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-metadata" title="Definition of |metadata|" class="rngref">metadata</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">metadata</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-people">2.4.2. Elements describing people</h4>
				
				<p>
				  Describing people is always a tricky business, and this set of elements
				  is just about as ad hoc as many other attempts. It simply tries to capture
				  what is normally used in specifications.
				</p>
				<p>
				  The <a href="#elem-editors" class="elem-name">&lt;editors&gt;</a> and <a href="#elem-authors" class="elem-name">&lt;authors&gt;</a> elements contain a list of 
				  <a href="#elem-person" class="elem-name">&lt;person&gt;</a> elements who are editors or authors of a specification
				  or reference.
			  </p>
				<p>
				  The <a href="#elem-person" class="elem-name">&lt;person&gt;</a> element describes an individual, and is rendered differently
				  depending on its location. The various child elements that it may contain are
				  <a href="#elem-name" class="elem-name">&lt;name&gt;</a> for the full name, <a href="#elem-email" class="elem-name">&lt;email&gt;</a> for that person's email,
				  <a href="#elem-url" class="elem-name">&lt;url&gt;</a> for the person's IRI, <a href="#elem-company" class="elem-name">&lt;company&gt;</a> being the company that
				  person works for, and <a href="#elem-company-url" class="elem-name">&lt;company-url&gt;</a> its IRI.
			  </p>
				<div class="boxed"><p><span class="schemaTitle">Elements describing people</span></p><pre class="schema" title="Elements describing people">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-editors" title="Definition of |editors|" class="rngref">editors</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">editors</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-authors" title="Definition of |authors|" class="rngref">authors</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">authors</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-person" title="Definition of |person|" class="rngref">person</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">person</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-company" title="Definition of |company|" class="rngref">company</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">company</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-company-url" title="Definition of |company-url|" class="rngref">company-url</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">company-url</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-url" title="Definition of |url|" class="rngref">url</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">url</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-email" title="Definition of |email|" class="rngref">email</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">email</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-name" title="Definition of |name|" class="rngref">name</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">name</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-date">2.4.3. The date element</h4>
				
				<p>
				  The date element contains three attributes for the year, month and day.
				  The intent is to use it to generate dates in specification headers but
				  it is not currently implemented. It is expected that this will be
				  remedied very soon.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The date element</span></p><pre class="schema" title="The date element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-date" title="Definition of |date|" class="rngref">date</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">date</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-styling">2.4.4. The styling element</h4>
				
				<p>
				  The styling element contains metadata about the style of the specification.
				  It's type attribute provides the type of the specification, a set currently
				  limited to "W3C", "robin", and "Expway" but which can be extended.
				</p>
				<p>
				  The status attribute indicates the current status of the specification. This
				  is currently mostly useful for the "W3C" type. The possible values are:
				  ED (Editor's Draft), EDMO (the same, but Member-only), N (Note), INF (informal
				  document), MO (Member-only informal document), WD, LC, CR, PR, and REC. I am
				  aware that this does not capture all document types that can be produced within
				  W3C and will be adding more as needed.
			  </p>
				<div class="boxed"><p><span class="schemaTitle">The styling element</span></p><pre class="schema" title="The styling element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-styling" title="Definition of |styling|" class="rngref">styling</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">styling</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-version">2.4.5. Elements describing versions</h4>
				
				<p>
				  The <a href="#elem-versions" class="elem-name">&lt;versions&gt;</a> element, contained inside the <a href="#elem-metadata" class="elem-name">&lt;metadata&gt;</a> element,
				  is used to include pointers to multiple versions of the document. It is
				  currently extremely ad hoc and it is expected that a better scheme will be
				  provided in the close future. It contains three elements: <a href="#elem-current" class="elem-name">&lt;current&gt;</a>, <a href="#elem-latest" class="elem-name">&lt;latest&gt;</a>
				  and <a href="#elem-previous" class="elem-name">&lt;previous&gt;</a>, the content of each of which is merely a link to the version
				  being either the current, latest, or previous one.
				</p>
				<div class="boxed"><p><span class="schemaTitle">Elements describing versions</span></p><pre class="schema" title="Elements describing versions">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-versions" title="Definition of |versions|" class="rngref">versions</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">versions</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-current" title="Definition of |current|" class="rngref">current</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">current</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-latest" title="Definition of |latest|" class="rngref">latest</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">latest</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-previous" title="Definition of |previous|" class="rngref">previous</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">previous</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>
		</div>

		<div class="section"><h3 id="elem-xhtml">2.5. Elements taken from XHTML</h3>
			
			<p>
			  The following elements have been lifted as is from XHTML. For convenience their
			  namespace is the ReSpec one: p, a, abbr, acronym, code, dl, dd, dt, ol, ul, li,
			  table, thead, tbody, tfoot, caption, tr, th, td, em, strong, br.
			</p>
			<p>
			  All their attributes in no namespace are copied over as is. If they have an
			  xml:id attribute (the only to be recognised as an ID inside ReSpec) the output
			  will also have a matching id attribute.
		  </p>
			<div class="boxed"><p><span class="schemaTitle">Elements taken from XHTML</span></p><pre class="schema" title="Elements taken from XHTML">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-xhtml" title="Definition of |xhtml|" class="rngref">xhtml</a>'&gt;
&lt;/define&gt;
</pre></div>
		</div>

		<div class="section"><h3 id="generated">2.6. Generated elements</h3>
			
			<p>
			  The following elements are described for completeness' sake, but
			  are not actually available for use while editing ReSpec documents.
			  They are automatically generated in the pre-processing phase of a ReSpec
			  run, and the downstream XSLT then handles them. It may therefore be
			  useful to XSLT authors to know about them.
			</p>

			<div class="section"><h4 id="elem-rfc2119">2.6.1. The rfc2119 element</h4>
				
				<p>
				  Whenever an RFC 2119 [<cite><a href="#RFC2119" class="bibref">RFC2119</a></cite>] keyword in uppercase is found, it gets wrapped in this
				  element.
				</p>
				<div class="boxed"><p><span class="schemaTitle">The rfc2119 element</span></p><pre class="schema" title="The rfc2119 element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-rfc2119" title="Definition of |rfc2119|" class="rngref">rfc2119</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">rfc2119</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>

			<div class="section"><h4 id="elem-bibref">2.6.2. The bibref element</h4>
				
				<p>
				  Whenever a bibliographic reference is found, it is wrapped in this element
				  (the square brackets are not removed, they are placed right before and right
				  after the element).
				</p>
				<div class="boxed"><p><span class="schemaTitle">The bibref element</span></p><pre class="schema" title="The bibref element">&lt;define name='<a xmlns="http://www.w3.org/1999/xhtml" id="rng-bibref" title="Definition of |bibref|" class="rngref">bibref</a>'&gt;
  &lt;element name='<strong xmlns="http://www.w3.org/1999/xhtml">bibref</strong>'&gt;
  &lt;/element&gt;
&lt;/define&gt;
</pre></div>
			</div>
		</div>

		<div class="section"><h3 id="pis">2.7. Processing Instructions</h3>
			
			<p>
			  The one and only PI understood by the ReSpec processor is <a href="#pi-respec-toc" class="pi-name">&lt;?respec-toc?&gt;</a>.
			</p>

			<div class="section"><h4 id="pi-respec-toc">2.7.1. The respec-toc processing instruction</h4>
				
				<p>
				  This instructs the final step style sheet to generate a table of contents
				  in place of the PI.
				</p>
			</div>
		</div>
	</div>

	<div class="section"><h2 id="scheme-respec">3. The respec: scheme</h2>
		
		<p>
		  It is generally considered a bad idea to introduce new URI schemes, and the
		  introduction of this one has been given extensive thought. In the end, I
		  figured that since it would never be used in the wild but only within
		  ReSpec documents (that are not meant for widespread distribution). When
		  ReSpec documents are transformed, all mentions of the respec: scheme are
		  removed.
		</p>
		<p>
		  The goal of this scheme is to provide locators for resources that are
		  bundled with ReSpec, so that the ReSpec processor may access them easily.
		  A typical use for this would be to specify an additional style sheet
		  that ships with ReSpec and have it copied to the publish directory.
	  </p>
	  <p>
	    Currently, the only two sorts of resources that ReSpec knows to locate through
	    this scheme are its CSS and XSLT style sheets. Simply provide the sheet's name
	    and it will know where to look for it. This may be extended to include more
	    resource types.
    </p>
	</div>

	<div class="section"><h2 id="special-ids">4. Special identifiers for elements</h2>
		
		<p>
		  Links to the following special identifiers are generated for some various items in the
		  grammar. More will be added for EBNF and IDL support. If you give this ID to
		  a section, the <a href="#elem-at" class="elem-name">&lt;at&gt;</a>, <a href="#elem-pi" class="elem-name">&lt;pi&gt;</a>, <a href="#elem-ev" class="elem-name">&lt;ev&gt;</a>, <a href="#elem-prop" class="elem-name">&lt;prop&gt;</a>, and <a href="#elem-el" class="elem-name">&lt;el&gt;</a>
		  elements will then work correctly (NOTE: this is not always the case in this document
		  which was written a little too fast).
		</p>
		
		<table>
		  <tr>
		    <th>Identifier</th>
		    <th>Description</th>
	    </tr>
	    <tr>
	      <td>prop-&lt;name&gt;</td>
	      <td>
	        Generated for properties, where <code>&lt;name&gt;</code> is the name of the property.
        </td>
      </tr>
	    <tr>
	      <td>event-&lt;name&gt;</td>
	      <td>
	        Generated for events, where <code>&lt;name&gt;</code> is the name of the event. I haven't
	        yet thought of how to get that to work cleanly for namespaced events should we ever
	        need to describe events in multiple namespaces from within a single document.
        </td>
      </tr>
	    <tr>
	      <td>elem-&lt;name&gt;</td>
	      <td>
	        Generated for elements, where <code>&lt;name&gt;</code> is the name of the element.
        </td>
      </tr>
	    <tr>
	      <td>attr-&lt;name&gt;</td>
	      <td>
	        Generated for attributes, where <code>&lt;name&gt;</code> is the name of the attribute.
        </td>
      </tr>
	    <tr>
	      <td>attr-&lt;elem&gt;-&lt;name&gt;</td>
	      <td>
	        Generated for attributes that are local to a given element, where <code>&lt;name&gt;</code>
	        is the name of the attribute and <code>&lt;elem&gt;</code> that of the element.
        </td>
      </tr>
	    <tr>
	      <td>pi-&lt;piname&gt;</td>
	      <td>
	        Generated for processing instructions, where <code>&lt;piname&gt;</code> is the name of
	        the PI.
        </td>
      </tr>
	    <tr>
	      <td>rng-&lt;defname&gt;</td>
	      <td>
	        Unlike the previous instances, this is not a generated link but rather a generated
	        anchor, so that using such an ID will cause duplicate IDs to be present in the document.
	        Needless to say, don't do that. Use this to link to RelaxNG schema snippets from the body
	        of the specification. Whenever the ReSpec processor finds a RelaxNG <code>ref</code> element,
	        it creates a link to the corresponding <code>define</code>.
        </td>
      </tr>
	  </table>
	</div>

  <div class="section"><h2 id="bibref">A. References</h2>
    

    <dl class="bibliography"><dt id="RFC2119">RFC2119</dt><dd><cite><a href="http://www.ietf.org/rfc/rfc2119.txt">Key words for use in RFCs to Indicate Requirement Levels</a></cite>,
    <span class="person">S. Bradner</span>.</dd><dt id="XMLSpec">XMLSpec</dt><dd><cite><a href="http://www.w3.org/2002/xmlspec/">XML Spec</a></cite>,
    <span class="person"><a href="http://nwalsh.com/people/ndw/">Norman Walsh</a> &lt;<a href="mailto:norman.walsh@sun.com">norman.walsh@sun.com</a>&gt;</span>.</dd></dl>
  </div>

</body>
</html>
