<!DOCTYPE html>
<html><head>
	<title> Clipboard API and events </title>
	<link href="http://www.w3.org/TR/DOM-Level-3-Events/geek.css" rel="stylesheet">
	<link href="http://www.w3.org/TR/DOM-Level-3-Events/spec.css" rel="stylesheet">
	<link href="http://www.w3.org/StyleSheets/TR/w3c-tr.css" rel="stylesheet">
	<link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel="stylesheet">
  <link rel="contents" href="#Contents">
</head>
<!--
	The source of this spec contains a number of tests for extraction. Here are some requirements for the test framework:
		each SCRIPT in this file will be turned into one test case per listed event in Events: comment and per Targets: comment
		extra inline HTML code for test case can be given with Test HTML: comment (defaults to single input)
		defines test method that returns true for pass, false for failure and string for other unexpected statuses.
		framework must set up a listener for the relevant event(s) that calls the test() method with the event object as argument, and check return value
		framework will then focus suitable element and trigger relevant event. For paste, data will be given in 'paste data:' comment.
		(If there is no "paste data:" instruction, the framework shall clear the clipboard before each test is run)
		for cut/copy, framework will select element contents before triggering command
		if test function returns undefined, the test is async and will call a result() method the framework must define with pass/fail
		An "External pass condition - clipboard data:" comment indicates that the pass/fail result of the test can not be checked from JavaScript, and the framework must check if the expected data is on the clipboard to know if the test passed or failed
		If the test code defines triggerTestManually() the tester or framework needs to do specific actions before the test runs.
		If the test code defines onTestSetupReady() it must be called after event listeners were defined to trigger the actual test
-->

<body lang="en">

<div class="head">
<a href="http://www.w3.org/"><img src="http://www.w3.org/Icons/w3c_home"
alt="W3C" height="48" width="72"></a>

<h1>Clipboard API and events</h1>

<h2>(not yet a@) W3C Working Draft 24 January 2011</h2>
<dl>
  <dt>This version:</dt>
    <dd><a
      href="http://dev.w3.org/cvsweb/2006/webapi/clipops/clipops.html?rev=1.14&amp;content-type=text/html;charset=utf-8">http://dev.w3.org/cvsweb/2006/webapi/clipops/clipops.html?rev=1.8&amp;content-type=text/html;charset=utf-8</a></dd>
  <dt>Latest Editors' version:</dt>
    <dd><a
      href="http://dev.w3.org/cvsweb/2006/webapi/clipops/clipops.html">http://dev.w3.org/cvsweb/2006//webapi/clipops/clipops.html</a></dd>
  <dt>Previous Editors' version:</dt>
    <dd><a
      href="http://dev.w3.org/cvsweb/2006/webapi/clipops/clipops.html?rev=1.7&amp;content-type=text/html;charset=utf-8">http://dev.w3.org/cvsweb/2006/webapi/clipops/clipops.html?rev=1.7&amp;content-type=text/html;charset=utf-8</a></dd>
  <dt>Editors:</dt>
    <dd><a href="mailto:hallvord@opera.com">Hallvord R. M. Steen</a>, <a
      href="http://www.opera.com/">Opera Software</a></dd>
<!--     <dd><a href="mailto:chaals@opera.com">Charles McCathieNevile</a>, <a
      href="http://www.opera.com/">Opera Software</a></dd>
    <dd>Doug Schepers, Vectoreal</dd> -->
</dl>

<p class="copyright"><a
href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
© 2011 <a href="http://www.w3.org/"><acronym
title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a
href="http://www.csail.mit.edu/"><acronym
title="Massachusetts Institute of Technology">MIT</acronym></a>, <a
href="http://www.ercim.org/"><acronym
title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>,
<a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
<a
href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document
use</a> rules apply.</p>
<hr>
</div>

<div>
<h2 class="notoc"><a id="abstract" name="abstract">Abstract</a></h2>

<p>This document describes APIs for clipboard operations such as copy, cut and
paste in web applications.</p>
</div>
<hr>

<div>
<h2 id="Status">Status of this Document</h2>

<p><em>This section describes the status of this document at the time of its
publication. Other documents may supersede this document. A list of current
W3C publications and the latest revision of this technical report can be
found in the <a href="http://www.w3.org/TR/">W3C technical reports index</a>
at http://www.w3.org/TR/.</em></p>

<p>This document is (in preparation as@) a first public working draft
prepared by the <a href="http://www.w3.org/2006/webapps/">Web Apps group</a>,
part of the Rich Web Client Activity.</p>

<p>This document is published to solicit comments from interested parties.
All comments are welcome and may be sent to <a
href="mailto:public-webapps@w3.org">public-webapps@w3.org</a>. All messages
received at this address are viewable in a <a
href="http://lists.w3.org/Archives/Public/public-webapps/">public archive</a>.
After reviewing comments and further feedback, the Working Group intends to
publish a new Working Draft of this document.</p>

<p>This document was produced by a group operating under the <a
href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004
W3C Patent Policy</a>. W3C has a <a
href="http://www.w3.org/2004/01/pp-impl/35495/status">public list of any
patent disclosures</a> made in connection with the deliverables of the Web
API Working Group; that page also includes instructions for disclosing a
patent. An individual who has actual knowledge of a patent which the
individual believes contains <a
href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
Claim(s)</a> must disclose the information in accordance with <a
href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
6 of the W3C Patent Policy</a>.</p>

<p>Publication as an Editors' Draft does not imply endorsement by the working
group or the W3C Membership. This is a draft document and may be updated,
replaced or obsoleted by other documents at any time. It is inappropriate to
cite this document as other than work in progress.</p>
</div>

<div>
<h2 id="Contents">Table of Contents</h2>

<!--toc-->

</div>

<div>

<div>
<h2 id="secintro">Introduction</h2>

<p>This section is informative</p>

<p>This specification defines the common clipboard operations of cutting,
copying and pasting, in such a way that they are exposed to Web Applications
and can be adapted to provide advanced functionalities. Its goal is to
provide for compatibility where possible with existing implmentations.</p>
</div>

<div>
<h2 id="Cases">Use Cases</h2>

<p>This section is informative</p>

<p>There are many use cases for being able to change the default clipboard
operations (cut/copy/paste). We have collected
a few samples to demonstrate possible uses, although these may not all be
supported by this specification.</p>

<h3 id="Rich">Rich content editing</h3>

<p>When copying text which contains hyperlinks or other structure,
it is often useful to be able to reformat the content to preserve important
information.</p>

<h3>Graphics with built-in semantics</h3>
<p>In order to make web applications which allow the manipulation of rich
text, or of graphic content such as SVG, it is useful to provide a mechanism
that allows for copying more than just the rendered content.</p>

<h3 id="Mathematic">Mathematical information</h3>

<p>With content such as mathematics, simply copying rendered text and pasting
it into another application generally leads to most of the semantics being
lost. MathML often needs to be transformed to be copied as plain text, for example to make sure "to the power of" is shown with the caret  "^" sign. Also, the XML source
could be placed in the clipboard with the appropriate transformation
occurring when pasting.</p>

</div>

<div>
<h2 id="Conformanc">Conformance</h2>

<p>The terms <strong>must</strong>, <strong>should</strong>,
<strong>may</strong>, <strong>must not</strong>, <strong>should not</strong>,
are used in this document in accordance with [<a
href="#ref-rfc2119">RFC2119</a>]. A conformant implementation of this
specification meets all requirements identified by the use of these terms.</p>
</div>


<div>

<h2>Events</h2>
<h3>copy event</h3>
<p>When the user initiates a copy operation, the implementation <em>must</em> fire a copy event. Its default action is to place the selected data on the clipboard. 
<script>
/** ClipboardEvent - events fire  */
/* Events: copy cut */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="copied text"></form>*/
/* Targets: document 'input_text' */
function test(e){
	var passed = e.type === window.eventType;
	passed = passed && e.target.id==='input_text';
	return passed;
}
</script>
<script>
/** cancelling default action, basic test  */
/* Events: copy cut */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="copied text"></form>*/
/* Targets: document 'input_text' */
/* paste data: "clipboard text" */
/* External pass condition - clipboard data: "clipboard text" */
function test(e){
	e.preventDefault();
}
</script>

<p>The current selection <em>must not</em> be affected.</p>
<script>
/** copy event does not modify selection  */
/* Events: copy */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="copied text"></form>*/
/* Targets: document 'input_text' */
function test(e){
	setTimeout(function(){
    /* what is the "most standardised" way to test this? */
    var passed = document.activeElement == document.getElementById('input_text') ;
    passed = passed && document.activeElement.selectionStart == 0 && document.activeElement.selectionEnd == document.activeElement.value.length;
    result(passed);
  }, 10);
}
</script>

<p>If there is no selection, the event has no default action, and the clipboard <em>must not</em> be modified unless in response to the <a href="#datatransfer-setdata">setData() method</a>.</p>

<script>
/** copy event when there is no selection  */
/* Events: copy */
/* Test HTML: <form><input id="input_text"  onfocus="this.blur()" value="copied text"></form>*/
/* Targets: document */
/* paste data: "clipboard text" */
/* External pass condition - clipboard data: "clipboard text" */
function test(e){
  void(0);
}
</script>

<script>
/** copy event when there is no selection and script uses setData()  */
/* Events: copy */
/* Test HTML: <form><input id="input_text"  onfocus="this.blur()" value="copied text"></form>*/
/* Targets: document */
/* paste data: "clipboard text" */
/* External pass condition - clipboard data: "modified text" */
function test(e){
  e.clipboardData.setData('text/plain', 'modified text');
  /* normally we'd need e.preventDefault() here, but since there is no selection the event does not have a default action */
  /* or so goes the logic anyway, we'll see if reality obeys */
}
</script>


<div class="event-definition">
	<table border="0" summary="Overview of the copy event" cellpadding="2" cellspacing="0">
		<tr class="assert must"><th>Type</th><td>copy</td></tr>
		<tr class="assert must"><th>Interface</th><td><a href="#clipboardevent">ClipboardEvent</a></td></tr>
		<tr class="assert must"><th>Cancelable</th><td>Yes</td></tr>
		<tr class="assert must"><th>Bubbles</th><td>Yes</td></tr>
		<tr class="assert must"><th>Target</th><td>Elements</td></tr>
	</table>
</div>


<h3>cut event</h3>
<p>When the user initiates a cut operation, the implementation <em>must</em> fire a cut event. In an editable context, its default action is to place the selected data on the clipboard and remove the selection from the document.</p>
<!-- Tests are above, under copy. One additional test for preventing default action here: -->
<script>
/** cancelling default action of cut prevents removal of text from editable context  */
/* Events: cut */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="copied text"></form>*/
/* Targets: document 'input_text' */
function test(e){
	e.preventDefault();
	var theTarget=e.target;
	setTimeout( function(){ var passed = theTarget.value === theTarget.defaultValue; result(passed);   }, 10 );
}
</script>
<p>In a non-editable context, or if there is no selection, the cut event has no default action, but the implementation <em>must</em> fire the event regardless.</p>
<script>
/** no default action for cut in non-editable context */
/* Events: cut */
/* Targets: document  */
/* paste data: "clipboard text" */
/* External pass condition - clipboard data: "clipboard text" */
function test(e){
	return true; /* this is intentionally a no-op, the point of the test is to make sure that the event fires but the clipboard data is not altered */
}
</script>
<script>
/** modifying data for cut event in non-editable context */
/* Events: cut */
/* Targets: document  */
/* paste data: "clipboard text" */
/* External pass condition - clipboard data: "cut text" */
function test(e){
	if(e.clipboardData && e.clipboardData.setData){
		e.clipboardData.setData('text/plain', 'cut text');
    /* note: no e.preventDefault() call, this event should have no default action since there is no selection.. */
	}else{
    return false;
  }
}
</script>
<script>
/** modifying data for cut event in non-editable context with selection */
/* Events: cut */
/* Targets: document  */
/* Test HTML: <script> function onTestSetupReady(){ var range=document.createRange(); range.selectNodeContents(document.body); window.getSelection().addRange(range);}<\/script>*/
/* paste data: "clipboard text" */
/* External pass condition - clipboard data: "cut text" */
function test(e){
	if(e.clipboardData && e.clipboardData.setData){
		e.clipboardData.setData('text/plain', 'cut text');
    /* note: no e.preventDefault() call, this event should have no default action since the selection can not be removed.. */
	}else{
    return false;
  }
}
</script>
<p>The cut event <em>must</em> fire before the selected data is removed.
<script>
/** cut fires before text is removed  */
/* Events: cut */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="cut text"></form>*/
/* Targets: document 'input_text' */
function test(e){
	var passed = e.target.value === e.target.defaultValue;
  return passed;
}
</script>

 When the cut operation is completed, the selection <em>must</em> be collapsed.</p>
<script>
/** cut collapses selection  */
/* Events: cut */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="cut text"></form>*/
/* Targets: 'input_text' */
function test(e){
	setTimeout(function(){
    var elm=document.getElementById('input_text');
    var passed = elm.selectionStart === 0 && elm.selectionEnd === 0;
    result( passed );
  }, 20);
}
</script>

<div class="event-definition">
	<table border="0" summary="Overview of the cut event" cellpadding="2" cellspacing="0">
		<tr class="assert must"><th>Type</th><td>cut</td></tr>
		<tr class="assert must"><th>Interface</th><td><a href="#clipboardevent">ClipboardEvent</a></td></tr>
		<tr class="assert must"><th>Cancelable</th><td>Yes</td></tr>
		<tr class="assert must"><th>Bubbles</th><td>Yes</td></tr>
		<tr class="assert must"><th>Target</th><td>Elements</td></tr>
	</table>
</div>


<h3>paste event</h3>
<p>When the user initiates a paste operation, the implementation <em>must</em> fire a paste event. The event <em>must</em> fire before any clipboard data is inserted.</p>
<script>
/** events fire  */
/* Events: paste */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="original text"></form>*/
/* Targets: document 'input_text' */
/* paste data: "pasted text" */
function test(e){
	var passed = e.type === window.eventType;
	passed = passed && e.target.id==='input_text';
	return passed;
}
</script>

<script>
/** paste event fires before data is inserted */
/* Events: paste */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="original text"></form>*/
/* Targets: document 'input_text' */
/* paste data: "pasted text" */
function test(e){
	var passed = e.type == 'paste' && document.getElementById('input_text').value=='original text';
	return passed;
}
</script>


<p>If the cursor is in an editable element, the default action is to insert clipboard data in the most suitable format supported for the given context.</p>
<script>
/** preventing default action  */
/* Events: paste */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="original text"></form>*/
/* Targets: document 'input_text' */
/* paste data: "pasted text" */
function test(e){
	e.preventDefault();
	var theTarget=e.target;
	setTimeout( function(){ var passed = theTarget.value === 'original text'; result(passed);   }, 10 );
}
</script>
<p>In an editable context, the paste event's target property <em>must</em> refer to the element that contains the start of the selection.
<script>
/** event target when selection spans several elements  */
/* Events: paste */
/* Test HTML: <p id="a" contentEditable="true">This<b id="b"> is </b>filler <b>text</b></p><script>var range=document.createRange();range.setStartBefore(document.getElementsByTagName('b')[0].firstChild);range.setEnd(document.getElementById('a').childNodes[3].firstChild,2);window.getSelection().addRange(range);<\/script> */
/* paste data: "pasted text" */
function test(e){
	var passed = e.target.id === 'b';
	return passed;
}
</script>

In a non-editable document, the event is targeted at a node focused for example by clicking or by an interactive cursor. If the node that has focus is not a text node, the event is targeted at the BODY element. <span class="issue">The latter is WebKit/Chrome behaviour but seems sub-optimal</span></p>
<script>
/** event target when focused element has no text node inside  */
/* Events: paste */
/* Test HTML: <form><input id="input_img" autofocus onfocus="this.select()" type="image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAI0lEQVR4nGNkYNjCgARYGBgY/v/3hnAYGbcyMaACdD4jmn4A7CkEc/PaWSMAAAAASUVORK5CYII="></form><script>document.getElementById('input_img').focus()<\/script>*/
/* paste data: "pasted text" */
function test(e){
	var passed = e.target === document.body;
	return passed;
}
</script>
<p> The paste event has no default action in a non-editable context, but implementations <em>must</em> fire the event regardless.</p>

<script>
/** paste event fires even in non-editable context */
/* Events: paste */
/* Targets: document 'input_text' */
/* paste data: "pasted text" */
function test(e){
	var passed = e.type === 'paste';
	return passed;
}
</script>


<div class="event-definition">
	<table border="0" summary="Overview of the paste event" cellpadding="2" cellspacing="0">
		<tr class="assert must"><th>Type</th><td>paste</td></tr>
		<tr class="assert must"><th>Interface</th><td><a href="#clipboardevent">ClipboardEvent</a></td></tr>
		<tr class="assert must"><th>Cancelable</th><td>Yes</td></tr>
		<tr class="assert must"><th>Bubbles</th><td>Yes</td></tr>
		<tr class="assert must"><th>Target</th><td>Element</td></tr>
	</table>
</div>

<h2 id="datatransfer">Interface DataTransfer</h2>
<p>Clipboard events require the DataTransfer interface from the HTML5 specification <a href="#refsHTML5">[HTML5]</a>. </p>
<p class="issue">TODO: review/sync with <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html#the-datatransfer-interface">DataTransfer</a>. 
There will be a very brief informative (not normative) text below for each method, clearly indicating that the normative stuff is in the HTML5 spec. We will however maintain tests for this, so keeping in sync with HTML5 will remain important.</p>
<!-- <h3>IDL definition</h3>
<pre class="idl idl-code">
interface <dfn>DataTransfer</dfn> {
    void <a href="#datatransfer-cleardata">clearData</a>( in optional DOMString type );
    DOMString <a href="#datatransfer-getdata">getData</a>(in DOMString type);
    void <a href="#datatransfer-setdata">setData</a>(in DOMString type, in DOMString data);
    DOMStringList <a href="datatransfer-types">types</a>;
}
</pre>
 -->
 <h2 class="issue">Issues we need addressed in HTML5</h2>
 <table summary="issues we need addressed in HTML5" border="1">
  <tr><th>Summary</th><th>HTML5 bug</th><th>Browser ref</th></tr>
  <tr><td>Return value of getData() with unknown type should be undefined</td><td><a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=11856">11856</a></td><td>WebKit (Chrome)</td></tr>
  <tr><td>Calling getData() too many or too few arguments should throw</td><td><a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=11857">11857</a></td><td>WebKit (Chrome)</td></tr>
  <tr><td>Can make better use of .types for copy/cut events, to indicate what types are supported by the implementation and/or system clipboard?</td><td><a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id="></a></td><td>(Suggestion, not implemented anywhere)</td></tr>
  <!-- Suggested text: In the paste event, it lists those formats available on the clipboard the implementation supports returning to the script.
  In the copy and cut events, the types property returns a list of supported formats for the copy operation - for example, if the implementation supports copying plain text and HTML it would return a DOMStringList with the values 'text/plain' and 'text/html'.
  -->
  
  <tr><td>Can we extend setData() with extra argument "append" to place multiple alternate formats on the clipboard? </td><td><a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id="></a></td><td>(Suggestion, not implemented anywhere)</td></tr>
 </table>
 
<script>
/** Clipboard event's clipboardData API */
/* Events: cut copy paste */
function test(e){
	var passed = typeof e.clipboardData === 'object';
	passed = passed && typeof  e.clipboardData.clearData === 'function';
	passed = passed && typeof  e.clipboardData.setData === 'function';
	passed = passed && typeof  e.clipboardData.getData === 'function';
	passed = passed && typeof  e.clipboardData.types != 'undefined'; // TODO...
	return passed;
}
</script>
<h3>Attributes</h3>

<h4 id="datatransfer-types">types</h4>
<p>The types property returns a DOMStringList of MIME type strings <a href="#refsRFC2046">[RFC2046]</a>, see HTML5 for details <a href="#refsHTML5">[HTML5]</a>.</p>
<script>
/** types property - all implementations must return 'text/plain' as one of the .types entries when there is plain text on the clipboard */
/* Events: cut copy paste */
/* paste data: "clipboard text" */
function test(e){
	var hasTextPlain=false;
	if(e.clipboardData.types){
		for(var i=0; i<e.clipboardData.types.length;i++){
			if(e.clipboardData.types[i]==='text/plain')hasTextPlain=true;
		}
	}
	return hasTextPlain;
}
</script>

<h3>Methods</h3>
<h4 id="datatransfer-getdata">getData</h4>
<p>Calling getData() from within a paste event handler will return the clipboard data in the specified format. See HTML5 for details <a href="#refsHTML5">[HTML5]</a>.</p>
<p class="note">Implementations are encouraged to support 'text/html' to retrieve any HTML formatted data on the system clipboard, but see <a href="#security">the security section of this spec</a> for security and privacy concerns.</p>
<script>
/** getData() method in paste event retrieving plain text */
/* Events: paste */
/* paste data: "pasted text" */
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.getData){
		if(e.clipboardData.getData('text/plain')==='pasted text')passed=true;
	}
	return passed;
}
</script>
<!-- <p>If getData() is not called from within a paste event handler, or if the type is not available, the method returns undefined.</p> -->
<script>
/** getData() method in cut and copy events should return undefined */
/* Events: cut copy */
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.getData){
		if(e.clipboardData.getData('text/plain')===undefined)passed=true;
	}
	return passed;
}
</script>
<script>
/** getData() method when type is unsupported should return undefined */
/* Events: paste */
/* paste data: "pasted text" */
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.getData){
		if(e.clipboardData.getData('text/foobarbogustype')===undefined)passed=true;
	}
	return passed;
}
</script>
<script>
/** getData() method when called outside event handler should return undefined */
/* Events: paste */
/* paste data: "pasted text" */
function test(e){
	var cbData=e.clipboardData;
	setTimeout( function(){
		var passed = cbData.getData('text/plain')===undefined;
		result(passed);
	}, 1 );
}
</script>
<!-- <p>If the method is called with too many or too few arguments, it throws a syntax error exception.</p> -->
<script>
/** getData() method with wrong number of arguments */
/* Events: paste */
/* paste data: "pasted text" */
function test(e){
	var passed=true;
	try{
		e.clipboardData.getData();
		passed=false;
	}catch(e){}
	try{
		e.clipboardData.getData( 'text/plain', 'wrong number of arguments' );
		passed=false;
	}catch(e){}
	return passed;
}
</script>
<!-- <p class="note">Note: for compatibility purposes, the value 'text' (case-insensitive) must be treated as 'text/plain'.</p> -->
<script>
/** getData() method supports legacy 'text' argument */
/* Events: paste */
/* paste data: "pasted text" */
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.getData){
		if(  e.clipboardData.getData('text')==='pasted text'
		&& e.clipboardData.getData('tEXt')==='pasted text' )passed=true;
	}
	return passed;
}
</script>
<script>
/** getData() method's type argument not case sensitive */
/* Events: paste */
/* paste data: "pasted text" */
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.getData){
		if( e.clipboardData.getData('text/PLAIN')==='pasted text' &&
			e.clipboardData.getData('TEXT/PLAIN')==='pasted text' &&
			e.clipboardData.getData('Text/Plain')==='pasted text' &&
			e.clipboardData.getData('TeXt/PlAin')==='pasted text'
		)passed=true;
	}
	return passed;
}
</script>

<h4 id="datatransfer-setdata">setData</h4>
<p>Calling setData() from within an event handler modifies the data which will be placed on the clipboard, for the specified format. See HTML5 for details <a href="#refsHTML5">[HTML5]</a></p>
<script>
/** setData() method */
/* Events: copy cut paste */
/* External pass condition - clipboard data: "copycutpaste modified text" */
/* paste data: "pasted text" */
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.setData){
		e.clipboardData.setData('text/plain', 'copycutpaste modified text');
	}
	e.preventDefault();
}
</script>
<!-- <p>If the type argument is not supported, the setData() call does nothing.</p> -->
<p class="issue">TODO: how are unknown types reflected on the OS clipboard??</p>
<script>
/** setData() method does not throw when implementation does not know the type */
/* Events: copy cut paste */
/* External pass condition - clipboard data: "unmodified text" */
/* Test HTML: <form><input autofocus onfocus="this.select()" value="unmodified text"></form>*/
/* paste data: "pasted text" */
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.setData){
		try{
			e.clipboardData.setData('text/foobarbogustype', 'copycutpaste modified text');
      e.preventDefault();
			passed=true;
		}catch(e){
		}
	}
	return passed;
}
</script>
<p>Calling setData() from a paste event handler will modify the data on the clipboard before it is inserted.</p>
<script>
/** setData() modifies text that is about to be inserted in a paste event */
/* Events: paste */
/* paste data: "pasted text" */
/* Test HTML: <form><input autofocus></form> */
function test(e){
	if(e.clipboardData && e.clipboardData.setData){
		e.clipboardData.setData('text/plain', 'modified text');
	}
	setTimeout(function(){
		var passed=false;
		if( e.target.value ){
			/*form element..*/
			passed=e.target.value==='modified text';
		}else{
			passed = e.target.data==='modified text'
		}
		result(passed);
	}, 10);
}
</script>
<script>
/** setData() modifies text on the clipboard even when called from a paste event */
/* Events: paste */
/* paste data: "pasted text" */
/* Test HTML: <form><input autofocus></form> */
/* External pass condition - clipboard data: "modified text" */

function test(e){
	if(e.clipboardData && e.clipboardData.setData){
		e.clipboardData.setData('text/plain', 'modified text');
	}
}
</script>
<p>The default action of a copy and cut event is to place the selection on the clipboard. Hence, after calling setData() the script must cancel the default action of the event, otherwise the data placed on the clipboard with the setData() call will immediately be overwritten by the default action.</p>
<script>
/** setData() method without preventing events's default action */
/* Events: copy cut */
/* External pass condition - clipboard data: "unmodified text" */
/* Test HTML: <form><input autofocus onfocus="this.select()" value="unmodified text"></form>*/
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.setData){
		e.clipboardData.setData('text/plain', 'copycutpaste modified text');
	}
	//e.preventDefault(); // The point of this test is that we do NOT call preventDefault() here.
}
</script>


<script>
/** setData() method with text/html (experimental) */
/* Events: copy cut */
/* External pass condition - clipboard data: "<p>copycut <b>modified</b> text</p>" */
/* IE's CF_HTML can not be emulated from JS with the existing clipboard API. The format includes quite some meta data:
Version:1.0
StartHTML:000000224
EndHTML:000007594
StartFragment:000006999
EndFragment:000007548
StartSelection:000006999
EndSelection:000007530
SourceURL: ...
and a document containing all parents of the selection, plus the full HEAD section. Plus magic <!--StartFragment--> and EndFragment comments.

So..what should an implementation do if the script tries to place text/html data on the clipboard? Preferably support magically using the CF_HTML format. What is an implementation that doesn't support CF_HTML supposed to do?? //TODO!
Note: IE throws.
*/
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.setData){
		e.clipboardData.setData('text/html', '<p>copycut <b>modified</b> text</p>');
	}
}
</script>
<p></p>

<h4 id="datatransfer-cleardata">clearData</h4>
<p>Calling clearData() empties the system clipboard, or removes the specified type of data from the clipboard. See HTML5 for details <a href="#refsHTML5">[HTML5]</a>.</p>
<script>
/** clearData() method without arguments */
/* Events: copy cut paste */
/* External pass condition - clipboard data: "" */
/* paste data: "clipboard text" */
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.clearData){
		e.clipboardData.clearData();
	}
	e.preventDefault();
}
</script>
<script>
/** clearData() method with text/plain argument */
/* Events: copy cut paste */
/* External pass condition - clipboard data: "" */
/* paste data: "clipboard text" */
// TODO: not completely tested, this test requires making sure there are alternate formats on the clipboard..
function test(e){
	var passed = false;
	if(e.clipboardData && e.clipboardData.clearData){
		e.clipboardData.clearData('text/plain');
	}
	e.preventDefault();
}
</script>
<script>
/** clearData() method without preventing events's default action */
/* Events: copy cut */
/* External pass condition - clipboard data: "unmodified text" */
/* Test HTML: <form><input autofocus onfocus="this.select()" value="unmodified text"></form>*/
function test(e){
	var passed = false;
	if(e.clipboardData){
		e.clipboardData.clearData();
	}
	//e.preventDefault(); // The point of this test is that we do NOT call preventDefault() here.
}
</script>


<h2>Clipboard event interface</h2>
<h3>IDL definition</h3>
<pre class="idl idl-code">interface <dfn id="clipboardevent">ClipboardEvent</dfn> : <a href="http://www.w3.org/TR/DOM-Level-3-Events/#events-Events-Event">Event</a> {
  readonly attribute <a href="#datatransfer">DataTransfer</a> clipboardData;
  void <a href="#clipboardevent-initclipboardevent">initClipboardEvent</a>( in DOMString eventType,
		in boolean canBubble,
		in boolean cancelable,
		in DOMString dataType,
		in DOMString data );
};
</pre>
<p>The ClipboardEvent interface extends the Event interface.  [<a href="#refsDOMEVENTS ">DOMEVENTS</a>]</p>

<h3>Attributes</h3>
<h4 id="clipboardevent-clipboarddata">clipboardData</h4>
<p>The clipboardData attribute is an instance of the <a href="#datatransfer">DataTransfer</a> interface which lets a script read and manipulate values on the system clipboard during user-initiated copy, cut and paste operations.</p>
<h3>Methods</h3>
<h4 id="clipboardevent-initclipboardevent">initClipboardEvent</h4>
<p>This method initializes attributes of an Event created through the DocumentEvent.createEvent() method. [<a href="#refsDOMEVENTS ">DOMEVENTS</a>]. The dataType argument is a MIME type describing the format of the data argument. Event listeners triggered by the synthetic event can get access to the data by calling DataTransfer.getData() with a string which case-insensitively matches the dataType argument.</p>

<script>
/** ClipboardEvent interface - synthetic events  */
/* Events: paste */
/* paste data: "clipboard text" */
function test(e){
	return e.clipboardData.getData('text/plain')=='synthetic event text';
}
function triggerTestManually(){
	onTestSetupReady();
}
function onTestSetupReady(){
	try{
		var evt=document.createEvent('ClipboardEvent');
		evt.initClipboardEvent( window.eventType, true, true, 'text/plain', 'synthetic event text' );
		document.dispatchEvent(evt);
	}catch(e){
		result('Unexpected Exception when initiating ClipboardEvent: '+e);
		return;
	}
}
</script>
<script>
/** ClipboardEvent interface - synthetic events with non-standard MIME type  */
/* Events: paste */
/* paste data: "clipboard text" */
function test(e){
	return e.clipboardData.getData('text/foobarbogustype')=='synthetic event text';
}
function triggerTestManually(){
	onTestSetupReady();
}
function onTestSetupReady(){
	try{
		var evt=document.createEvent('ClipboardEvent');
		evt.initClipboardEvent( window.eventType, true, true, 'text/foobarbogustype', 'synthetic event text' );
		document.dispatchEvent(evt);
	}catch(e){
		result('Unexpected Exception when initiating ClipboardEvent: '+e);
		return;
	}
}
</script>
<p>A synthetic paste event <em>must not</em> give a script access to data on the real system clipboard. Synthetic cut and copy events <em>must not</em> modify data on the system clipboard.</p>
<script>
/** ClipboardEvent interface - synthetic copy/cut events must not affect system clipboard */
/* Events: copy cut */
/* paste data: "clipboard text" */
/* External pass condition - clipboard data: "clipboard text" */
function test(e){

}
function triggerTestManually(){
	onTestSetupReady();
}
function onTestSetupReady(){
	try{
		var evt=document.createEvent('ClipboardEvent');
		evt.initClipboardEvent( window.eventType, true, true, 'text/plain', 'synthetic event text' );
		/* make a selection to check if selected text is copied by the synthetic event.. */
		var range=document.createRange();
		range.selectNodeContents(document.body);
		window.getSelection().addRange(range);
		document.dispatchEvent(evt);
		window.getSelection().removeAllRanges();
	}catch(e){
		result('Unexpected Exception when initiating ClipboardEvent: '+e);
		return;
	}
}
</script>


<h2>Integration with other scripts and events</h2>
<h3>Integration with rich text editing APIs</h3>
<p>If an implementation supports the document.execCommand method and allows calling it with the commands "cut", "copy" and "paste", the implementation must fire the corresponding events. The event is syncronous and may prevent the execCommand() call from having its normal effect.</p>
<script>
/** integration with execCommand, events are syncronous */
/* Events: copy cut paste */
/* Test HTML: <iframe id="ifr"></iframe>*/
/* Targets: 'ifr.contentWindow' */
function test(e){
	return window.afterExecCommand===false; /* the event is syncronous, must not run after the execCommand call is finished */
}
function onTestSetupReady(){
  document.getElementsByTagName('p')[0].firstChild.data='FAILED'; // if event doesn't fire, this test failed..
	var ifr=document.getElementById('ifr');
	ifr.contentDocument.designMode='on';
	ifr.contentWindow.focus();
	try{
		window.afterExecCommand=false;
		ifr.contentDocument.execCommand(window.eventType, false, false);
		window.afterExecCommand=true;
	}catch(e){
		result('Can not test - exception from execCommand '+e);
	}
}
</script>
<script>
/** integration with execCommand, can prevent default action */
/* Events: copy cut */
/* paste data: "clipboard text" */
/* Test HTML: <iframe id="ifr"></iframe>*/
/* Targets: 'ifr.contentWindow' */
/* External pass condition - clipboard data: "clipboard text" */

function test(e){
	e.preventDefault();
}

function triggerTestManually(){
  document.getElementsByTagName('p')[0].firstChild.data='FAILED'; // if event doesn't fire, this test failed..
	var ifr=document.getElementById('ifr');
	var doc=ifr.contentDocument;
	doc.designMode='on';
	ifr.contentWindow.focus();
	doc.body.innerHTML='<p>This is filler text</p>';
	var range=doc.createRange();
	range.selectNodeContents(doc.getElementsByTagName('p')[0]);
	doc.defaultView.getSelection().addRange(range);
	try{
		doc.execCommand(window.eventType, false, false);
    // result(doc.body.innerHTML=='<p>This is filler text</p>'); // sorry, pass condition here is external
	}catch(e){
		result('Can not test - exception from execCommand '+e);
	}
}
</script>

<script>
/** integration with execCommand, can prevent default action */
/* Events: paste */
/* paste data: "clipboard text" */
/* Test HTML: <iframe id="ifr"></iframe>*/
/* Targets: 'ifr.contentWindow' */
function test(e){
	window.eventFired=true;
	e.preventDefault();
}
function triggerTestManually(){
	var ifr=document.getElementById('ifr');
	ifr.contentDocument.designMode='on';
	ifr.contentWindow.focus();
	try{
		ifr.contentDocument.execCommand(window.eventType, false, false);
		setTimeout(function(){
			var passed= window.eventFired === true && ifr.contentDocument.body.innerHTML.indexOf('clipboard text')==-1;
			result(passed);
		}, 10);
	}catch(e){
		result('Can not test - exception from execCommand '+e);
	}
}
</script>
<div>

<h3 id="otherevents">Interaction with other events</h3>
<p>If the clipboard operation is triggered by keyboard input, the implementation <em>must</em> fire the corresponding event as the default action of the <b>keydown</b> event that initiates the clipboard operation. For example, if the user presses <kbd>Ctrl-C</kbd> to copy, dispatching a copy event <em>must</em> be the default action of the C key's keydown event. The event is asyncronous but <em>must</em> be dispatched before <b>keyup</b> events for the relevant keys.</p>

<script>
/** clipboard events relative to key events  */
/* Events: copy cut paste */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="copied text"></form><p>Note: please trigger event from keyboard (ctrl+x/c/v) for this test</p>*/
/* Targets: 'input_text' */

var eventsFired=[];
function logEvent(e){eventsFired.push(e.type);};
document.addEventListener('DOMContentLoaded', function(){
  document.getElementById('input_text').addEventListener( 'keydown', logEvent, false );
  document.getElementById('input_text').addEventListener( 'keyup', logEvent, false );
  document.getElementById('input_text').addEventListener( 'keypress', logEvent, false );
},false);

function test(e){
  logEvent(e);
	setTimeout(function(){
    var passed = eventsFired.join(',') === 'keydown,keydown,'+window.eventType+',keyup,keyup' ;
    result( passed, 'Got: '+eventsFired.join(',') );
  }, 500);
}
</script>


<p>The default action of the cut and paste events <em>may</em> cause the implementation to dispatch other supported events, such as textInput, input, change, validation events, DOMCharacterDataModified and DOMNodeRemoved / DOMNodeInserted. Any such events are queued up to fire after processing of the cut/paste event is finished.</p>
<script>
/** clipboard events relative to other input events  */
/* Events: cut */
/* Test HTML: <form action=""><input id="input_text" autofocus onfocus="this.select()" value="copied text" required></form>*/
/* Targets: 'input_text' */

var eventsFired=[];
function logEvent(e){eventsFired.push(e.type);};
document.addEventListener('DOMContentLoaded', function(){
  document.getElementById('input_text').addEventListener( 'change', logEvent, false );
  document.getElementById('input_text').addEventListener( 'input', logEvent, false );
  document.getElementById('input_text').addEventListener( 'invalid', logEvent, false );
  document.getElementById('input_text').addEventListener( 'textInput', logEvent, false );
},false);

function test(e){
  logEvent(e);
  setTimeout(function(){
    e.target.blur(); // causes change event
    e.target.form.checkValidity(); // causes invalid event
  }, 10);
	setTimeout(function(){
    var evString = eventsFired.join(',')
    var passed =  evString === 'cut,cut handler done,input,change,invalid'; // Issue: should textInput fire? Chrome doesn't but I don't know if it's on purpose
    result( passed, 'Got: '+evString );
  }, 500);
  logEvent( {type: e.type+' handler done'} );
}
</script>

<script>
/** clipboard events relative to other input events  */
/* Events:  paste */
/* Test HTML: <form action=""><input id="input_text" autofocus onfocus="this.select()" value="copied text" required></form>*/
/* paste data: "clipboard text" */
/* Targets: 'input_text' */

var eventsFired=[];
function logEvent(e){eventsFired.push(e.type);};
document.addEventListener('DOMContentLoaded', function(){
  document.getElementById('input_text').addEventListener( 'change', logEvent, false );
  document.getElementById('input_text').addEventListener( 'input', logEvent, false );
  document.getElementById('input_text').addEventListener( 'invalid', logEvent, false );
  document.getElementById('input_text').addEventListener( 'textInput', logEvent, false );
},false);

function test(e){
  logEvent(e);
  setTimeout(function(){
    e.target.blur(); // causes change event
    e.target.form.checkValidity(); // causes invalid event
  }, 10);
	setTimeout(function(){
    var evString = eventsFired.join(',')
    var passed =  evString ==='paste,paste handler done,textInput,input,change' || evString ==='paste,paste handler done,input,change' ;
    result( passed, 'Got: '+evString );
  }, 500);
  logEvent( {type: e.type+' handler done'} );  
}
</script>

<p>The implementation <em>must not</em> dispatch other input-related events like textInput, input, change, and validation events in response to the copy operation. </p>
<script>
/** copy operation does not dispatch other events  */
/* Events: copy */
/* Test HTML: <form><input id="input_text" autofocus onfocus="this.select()" value="copied text"></form>*/
/* Targets: document 'input_text' */
function test(e){
  var otherEventsFired=[];
  var events=[ 'input', 'textInput', 'change' ];
  for( var i=0,ev; ev=events[i];i++ )e.currentTarget.addEventListener(ev, function(e){ otherEventsFired.push(e.type); }, false);
	setTimeout(function(){
    var passed = otherEventsFired.length===0;
    result(passed);
  }, 50);
  e.target.blur(); // might provoke a change event, but should not
}
</script>
<h3 id="selection-mod">Event listeners that modify selection or focus</h3>
<p>If the event listener modifies the selection or focus, the clipboard action <em>must</em> be completed on the modified selection.</p>
<script>
/** event listener that modifies focus */
/* Events: copy cut */
/* Test HTML: <input id="input_text" onfocus="this.select()" autofocus value="input 1"><input id="second" onfocus="this.select()" value="input 2">*/
/* Targets: 'input_text' */
/* External pass condition - clipboard data: "input 2" */

function test(e){
	document.getElementById('second').focus();
}

</script>
<script>
/** event listener that modifies focus */
/* Events: paste */
/* Test HTML: <input id="input_text" onfocus="this.select()" autofocus value="input 1"><input id="second" onfocus="this.select()" value="input 2">*/
/* Targets: 'input_text' */
/* paste data: "clipboard text" */

function test(e){
	document.getElementById('second').focus();
  setTimeout( function(){ 
    var passed = document.getElementById('second').value==='clipboard text';
    result( passed );
  }, 20 );
}
</script>
<script>
/** event listener that modifies selection */
/* Events: copy */
/* Test HTML: <div>This is demo text</div>*/
/* Targets: document */
/* External pass condition - clipboard data: "This is demo text" */

function test(e){
	var range=document.createRange();
  range.selectNodeContents(document.getElementsByTagName('div')[0]);
  window.getSelection().removeAllRanges();
  window.getSelection().addRange(range);
}

</script>

<h2 id="binary-paste">Pasting data with multiple parts</h2>
<p>Some formats may contain multiple parts and embed images or other forms of data. Implementations <em>must</em> handle data with sub-parts by populating the FileList <b>files</b> attribute of the <a href="#datatransfer">DataTransfer interface</a>. References to sub-parts <em>must</em> be replaced by content-id references using the cid: URL scheme [<a href="#refsRFC2392">RFC2392</a>]. The identifier of each sub-part is its index in the FileList.</p>
<p class="note">For example, if the user pastes some HTML that contains one IMG tag linking to an image on the local hard drive, a compliant implementation would add a File item to the files list, and modify the SRC attribute of the IMG tag to read src="cid:0" to reference the 0<sup>th</sup> file in the filelist.</p>
<p class="issue">We have a gaping security hole here if we allow scripts to also insert text/html data on the clipboard: simply copying once and pasting once would let an attacker read a local file of their choice. How do we make this safe? Only do the File object thing for truly embedded (clipboard-based) parts? That means leaving &lt;img src="file://..."&gt; case unsupported.</p>

<h2 id="security">Security and privacy considerations</h2>
<p>Enabling authors to change what is copied by a user, or to make an automated copy of something that was never selected and allowing unrestricted calls to paste information can raise various security and privacy concerns.</p>

<p>An example scenario of a problem is where a user selects a link and copies it, but a different link is copied to the clipboard. The effect of this can range from an unexpected result on pasting to an attempted "phishing" attack.</p>

<h3 id="privacy">Privacy concerns</h3>
<p>Untrusted scripts should not get uncontrolled access to a user's clipboard data. This specification assumes that granting access to the current clipboard data when a user explicitly initiates a paste operation from the UA's trusted chrome is acceptable. However, implementors must proceed carefully, and as a minimum implement the precautions below:</p>
<ul>
<li>Objects implementing the DataTransfer interface to return clipboard data <em>must not</em> be available outside the ClipboardEvent event handler.</li>
<li>If a script stores a reference to an object implementing the DataTransfer interface to use from outside the ClipboardEvent event handler, all methods <em>must</em> be no-ops when called outside the expected context</li>
<script>
/** setData() called outside event handler method */
/* Events: copy cut paste */
/* paste data: "clipboard text" */
/* External pass condition - clipboard data: "clipboard text" */
function test(e){
	var cbData=e.clipboardData;
	setTimeout( function(){
		cbData.setData('text/plain', 'Test failed');
	}, 1 );
}
</script>
<script>
/** clearData() called outside event handler method */
/* Events: copy cut paste */
/* paste data: "clipboard text" */
/* External pass condition - clipboard data: "clipboard text" */
function test(e){
	var cbData=e.clipboardData;
	setTimeout( function(){
		cbData.clearData();
	}, 1 );
}
</script>
<li>Implementations <em>must not</em> let scripts create synthetic clipboard events to get access to real clipboard data</li>
</ul>
<p>Implementations may choose to further limit the functionality provided by the DataTransfer interface. For example, an implementation may allow the user to disable this API, or configure which web sites should be granted access to it.</p>
<h3 id="nuisances">Nuisance considerations</h3>
<p>Scripts may use the DataTransfer API to annoy and confuse users by altering the data on the system clipboard from copy and cut events. This specification does not attempt to prevent such nuisances, though implementations may add additional restrictions.</p>
<p>Implementations must handle scripts that try to place excessive amounts of data on the clipboard gracefully.</p>

<h3 id="cross-origin-html-paste">Cross-origin copy/paste of source code</h3>
<p class="issue">How do we safeguard cross-origin copy/paste of source code? Are below rules sufficient to prevent sneaky cross-site request forgery attacks?</p>
<p>Pasting HTML and other markup-based content copied from one site into another site might compromise the security of the former site, for example by giving the second site access to passwords, nonces and other sensitive data that might be embedded in the markup.</p>
<p>If a script calls getData('text/html'), the implementation supports pasting HTML, and the data available on the clipboard is from a different origin, the implementation <em>must</em> sanitize the content by following these steps:</p>
<ol>
	<li>Parse the code on the clipboard to a DOM tree</li>
	<li>Remove all of the following elements: SCRIPT, APPLET, OBJECT, FORM, INPUT, BUTTON, TEXTAREA, SELECT, OPTION, OPTGROUP and comment nodes. For all mentioned elements except FORM, also remove all child nodes.</li>
	<li>Remove all event handler attributes from all elements</li>
	<li>Remove all data- attributes from all elements</li>
	<li>Serialize the DOM and return the generated string to the script</li>
</ol>
<p>Implementations may implement additional restrictions, for example only support text/plain if the user does a cross-origin paste, or only support text/plain if content from an encrypted origin is pasted into a non-encrypted page.</p>


<h2>References</h2>
<dl>
<dt id="refsDOMEVENTS">[DOMEVENTS]</dt>
<!--
   <dd><cite><a
   href="http://www.w3.org/TR/DOM-Level-3-Events/">Document Object
   Model (DOM) Level 3 Events Specification</a></cite>,
   B. H&ouml;hrmann, P. Le Hegaret, T. Pixley. W3C, December
   2007.</dd>
   -->
<dd>
<cite>
<a href="http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html">Document Object Model (DOM) Level 3 Events Specification</a>
</cite>
, D. Schepers. W3C, July 2009.
</dd>
<dt id="refsHTML5">[HTML5]</dt>
<dd>
<cite>
<a href="http://www.w3.org/TR/html5/">HTML5 Specification</a>
</cite>
, Ian Hickson. W3C, January 2011.
</dd>
<dt id="refsRFC2046">[RFC2046]</dt>
<dd>
<cite>
<a href="http://www.ietf.org/rfc/rfc2046.txt">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>
</cite>
, N. Freed, N. Borenstein. IETF, November 1996.
</dd>
<dt id="refsRFC2392">[RFC2392]</dt>
<dd>
<cite>
<a href="http://tools.ietf.org/html/rfc2392"> Content-ID and Message-ID Uniform Resource Locators</a>
</cite>
, E. Levinson. IETF, August 1998.
</dd>
</dl>

<h2 id="Acknowledg">Acknowledgements</h2>

<p>This section is informative</p>

<p>The editors would like to acknowledge their intellectual debt to the
documentation of Data Transfer functionalities from Microsoft [<a
href="#ref-mdt">MDT</a>]. The draft specification of them from the WHAT
Working Group published as part of their draft "Web Applications 1.0" [<a
href="#WHAT-WA">WHAT-WA</a>] which essentially repeats the
drag-and-drop-specific parts of that were heavily used to prepare the initial
drafts of this specification. We are also grateful for the draft "safe copy
and paste" [<a href="#ref-scp">SCP</a>] from Paul Libbrecht.</p>

<p>We would like to acknowledge the contributions made by the following:</p>

<p>Shawn Carnell, Daniel Dardailler, Al Gilman, Lachlan Hunt, Aaron
Leventhal, Jim Ley, Paul Libbrecht, "Martijn", Dave Poehlman, "ROBO Design",
Janina Sajka, Rich Schwerdtfeger, Jonas Sicking, Maciej Stachowiak, Mihai
Sucan, Tom Wlodkowski, Anne van Kesteren, Tarquin Wilton-Jones</p>
</div>



<div>
<h2 id="References">References</h2>

<h3 id="Normative">Normative references:</h3>
<dl>
  <dt id="ref-rfc2119">[RFC2119]</dt>
    <dd>The specification for how to use english to specify normativity, as
      if it were a technical language. Available at <a
      href="http://rfc.net/rfc2119.html">http://rfc.net/rfc2119.html</a></dd>
</dl>

<h3 id="Informativ">Informative References</h3>
<dl>
  <dt id="ref-mdt">[MDT]</dt>
    <dd>Microsoft's information on Clipboard Operations in Internet Explorer.
      Available at <a
      href="http://msdn.microsoft.com/library/default.asp?url=/workshop/author/datatransfer/overview.asp">http://msdn.microsoft.com/library/default.asp?url=/workshop/author/datatransfer/overview.asp</a>.</dd>
  <dt id="ref-scp">[SCP]</dt>
    <dd>Paul Libbrecht, submission for Web API WG and WHAT-WG. Available at
      <a
      href="http://www.activemath.org/~paul/tmp/Ideal-Browser-Behaviour.html">http://www.activemath.org/~paul/tmp/Ideal-Browser-Behaviour.html</a>.</dd>
  <dt>[<a name="WHAT-WA" id="WHAT-WA">WHAT-WA</a>]</dt>
    <dd>Web Applications 1.0 Working Draft, I Hickson ed. Unstable draft,
      available at <a
      href="http://whatwg.org/specs/web-apps/current-work/">http://whatwg.org/specs/web-apps/current-work/</a>.</dd>
</dl>
</div>

<div>

<p></p>
</body>
</html>
