<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html lang=en-US>
 <head>
  <title>Web DOM Core</title>

  <style type="text/css">
      div.example { border-left:double }
      .note { margin-left:2em; font-weight:bold; font-style:italic; color:green }
      p.note::before { content:"Note: " }
      dfn { font-style:normal; font-weight:bold }
      code { color:orangered }
      code :link, code :visited { color:inherit }
      pre code { color:inherit }
    </style>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet>

 <body>
  <div class=head>
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a></p>

   <h1 id=html5-diff>Web DOM Core</h1>

   <h2 class="no-num no-toc" id=w3c-doctype>Editor's Draft 31 August 2010</h2>

   <dl>
    <dt>This Version:

    <dd><a
     href="http://www.w3.org/TR/2010/ED-webdomcore-20100831/">http://www.w3.org/TR/2010/ED-webdomcore-20100831/</a>

    <dt>Latest Published Version:

    <dd><a
     href="http://www.w3.org/TR/webdomcore/">http://www.w3.org/TR/webdomcore/</a>

    <dt>Latest Editor's Draft:

    <dd><a
     href="http://dev.w3.org/2006/webapi/webdomcore/">http://dev.w3.org/2006/webapi/webdomcore/</a>

    <dt>Previous Versions:

    <dd><a
     href="http://www.w3.org/TR/DOM-Level-3-Core/">http://www.w3.org/TR/DOM-Level-3-Core/</a>

    <dt>Editors:

    <dd><a href="http://annevankesteren.nl/">Anne van Kesteren</a> (<a
     href="http://www.opera.com/">Opera Software ASA</a>) &lt;<a
     href="mailto:annevk@opera.com">annevk@opera.com</a>>

    <dd>Geoffrey Sneddon &lt;gsneddon@opera.com>

    <dd>Simon Pieters &lt;simonp@opera.com>
   </dl>
   <!-- XXX copyright --></div>

  <hr>

  <h2 class="no-num no-toc" id=issues>Issues</h2>

  <ul class=XXX>
   <li>define moving nodes between documents <a
    href="http://html5.org/tools/web-apps-tracker?from=1729&amp;to=1730">http://html5.org/tools/web-apps-tracker?from=1729&amp;to=1730</a>
    <a
    href="http://www.w3.org/mid/Pine.LNX.4.62.0806020441160.504@hixie.dreamhostps.com">http://www.w3.org/mid/Pine.LNX.4.62.0806020441160.504@hixie.dreamhostps.com</a>
    <a
    href="http://www.w3.org/mid/3292C233-9089-4733-9226-15ED8DCA23FE@apple.com">http://www.w3.org/mid/3292C233-9089-4733-9226-15ED8DCA23FE@apple.com</a>
    

   <li>getAttribute/getAttributeNS returning null

   <li>innerHTML etc on all Elements? <a
    href="http://osdir.com/ml/org.w3c.webapi/2007-08/msg00069.html">http://osdir.com/ml/org.w3c.webapi/2007-08/msg00069.html</a>
    

   <li>\0 <a
    href="http://krijnhoetmer.nl/irc-logs/whatwg/20080321#l-312">http://krijnhoetmer.nl/irc-logs/whatwg/20080321#l-312</a>
    

   <li>clarify lookupNamespaceURI <a
    href="http://www.w3.org/mid/4878DFC6.40401@lachy.id.au">http://www.w3.org/mid/4878DFC6.40401@lachy.id.au</a>
    

   <li>document.parseError? <a
    href="http://www.w3.org/mid/op.ucv5axjp64w2qv@annevk-t60.oslo.opera.com">http://www.w3.org/mid/op.ucv5axjp64w2qv@annevk-t60.oslo.opera.com</a>
    

   <li>exceptions for createDocument <a
    href="http://osdir.com/ml/web.dom.general/2005-12/msg00058.html">http://osdir.com/ml/web.dom.general/2005-12/msg00058.html</a>
    

   <li>empty string getElementById <a
    href="http://osdir.com/ml/web.svg/2005-03/msg00079.html">http://osdir.com/ml/web.svg/2005-03/msg00079.html</a>
    

   <li>sourceIndex? <a
    href="http://www.quirksmode.org/dom/w3c_core.html">http://www.quirksmode.org/dom/w3c_core.html</a>
    

   <li>xmlVersion <a
    href="http://lists.w3.org/Archives/Public/www-dom/2003JulSep/0049.html">http://lists.w3.org/Archives/Public/www-dom/2003JulSep/0049.html</a>
    

   <li>textContent <a
    href="http://www.w3.org/mid/c9e12660808271343v58990698gabac29d2123a82ce@mail.gmail.com">http://www.w3.org/mid/c9e12660808271343v58990698gabac29d2123a82ce@mail.gmail.com</a>
    

   <li>lookupNamespaceURI, isDefaultNamespace <a
    href="http://html5.org/tools/web-apps-tracker?from=2125&amp;to=2126">http://html5.org/tools/web-apps-tracker?from=2125&amp;to=2126</a>
    

   <li>Range.createContextualFragment <a
    href="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-March/018892.html">http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-March/018892.html</a>
    

   <li>attributes.length should always return the length.

   <li>[Reflect] <a
    href="http://krijnhoetmer.nl/irc-logs/whatwg/20090622#l-90">http://krijnhoetmer.nl/irc-logs/whatwg/20090622#l-90</a>
    
  </ul>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>This specification defines the DOM Core part of the Web platform. The
   Document Object Model is a language- and platform neutral interface that
   allows programs and scripts to dynamically access and update the content,
   structure and style of documents. Web DOM Core mostly subsets DOM3 Core,
   but redefines some things and adds some features that were widely
   implemented already.

  <h2 class="no-num no-toc" id=table-of-contents>Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#common-infrastructure"><span class=secno>1. </span>Common
    infrastructure</a>
    <ul class=toc>
     <li><a href="#terminology"><span class=secno>1.1. </span>Terminology</a>
      

     <li><a href="#conformance-requirements"><span class=secno>1.2.
      </span>Conformance requirements</a>

     <li><a href="#case-sensitivity"><span class=secno>1.3.
      </span>Case-sensitivity</a>

     <li><a href="#dom-features"><span class=secno>1.4. </span>DOM
      features</a>

     <li><a href="#cloning-nodes"><span class=secno>1.5. </span>Cloning
      nodes</a>

     <li><a href="#legal-hierarchy"><span class=secno>1.6. </span>Legal
      hierarchy</a>
    </ul>

   <li><a href="#basic-types"><span class=secno>2. </span>Basic types</a>

   <li><a href="#interfaces"><span class=secno>3. </span>Interfaces</a>
    <ul class=toc>
     <li><a href="#exception-domexception"><span class=secno>3.1.
      </span>Exception <code title>DOMException</code></a>

     <li><a href="#interface-domimplementation"><span class=secno>3.2.
      </span>Interface <code title>DOMImplementation</code></a>

     <li><a href="#interface-documentfragment"><span class=secno>3.3.
      </span>Interface <code title>DocumentFragment</code></a>

     <li><a href="#interface-document"><span class=secno>3.4.
      </span>Interface <code title>Document</code></a>

     <li><a href="#interface-node"><span class=secno>3.5. </span>Interface
      <code title>Node</code></a>

     <li><a href="#interface-nodelist"><span class=secno>3.6.
      </span>Interface <code title>NodeList</code></a>

     <li><a href="#interface-namednodemap"><span class=secno>3.7.
      </span>Interface <code title>NamedNodeMap</code></a>

     <li><a href="#interface-characterdata"><span class=secno>3.8.
      </span>Interface <code title>CharacterData</code></a>

     <li><a href="#interface-attr"><span class=secno>3.9. </span>Interface
      <code title>Attr</code></a>

     <li><a href="#interface-element"><span class=secno>3.10.
      </span>Interface <code title>Element</code></a>

     <li><a href="#interface-text"><span class=secno>3.11. </span>Interface
      <code title>Text</code></a>

     <li><a href="#interface-comment"><span class=secno>3.12.
      </span>Interface <code title>Comment</code></a>

     <li><a href="#interface-documenttype"><span class=secno>3.13.
      </span>Interface <code title>DocumentType</code></a>

     <li><a href="#interface-processinginstruction"><span class=secno>3.14.
      </span>Interface <code title>ProcessingInstruction</code></a>
    </ul>

   <li class=no-num><a href="#acknowledgements">Acknowledgements</a>
  </ul>
  <!--end-toc-->

  <h2 id=common-infrastructure><span class=secno>1. </span>Common
   infrastructure</h2>

  <h3 id=terminology><span class=secno>1.1. </span>Terminology</h3>

  <p>The term <dfn id=tree-order>tree order</dfn> means a pre-order,
   depth-first traversal of DOM nodes involved (through the <a
   href="#parentnode"><code
   title=dom-Node-parentNode>parentNode</code></a>/<a
   href="#childnodes"><code title=dom-Node-childNodes>childNodes</code></a>
   relationship).

  <p>The term <dfn id=context-node>context node</dfn> means the <a
   href="#node"><code>Node</code></a> on which the method or attribute being
   discussed was called.

  <h3 id=conformance-requirements><span class=secno>1.2. </span>Conformance
   requirements</h3>

  <p class=XXX>RFC2119, WebIDL, HTML5.

  <p>When a method or an attribute is said to call another method or
   attribute, the user agent must invoke its internal API for that attribute
   or method so that e.g. the author can't change the behavior by overriding
   attributes or methods with custom properties or functions in ECMAScript.

  <p>Unless otherwise stated, string comparisons are done in a <a
   href="#case-sensitive">case-sensitive</a> manner.

  <h3 id=case-sensitivity><span class=secno>1.3. </span>Case-sensitivity</h3>

  <p>This specification defines several comparison operators for strings.

  <p>Comparing two strings in a <dfn id=case-sensitive>case-sensitive</dfn>
   manner means comparing them exactly, codepoint for codepoint.

  <p>Comparing two strings in a <dfn id=ascii-case-insensitive>ASCII
   case-insensitive</dfn> manner means comparing them exactly, codepoint for
   codepoint, except that the characters in the range U+0041 .. U+005A (i.e.
   LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z) and the corresponding
   characters in the range U+0061 .. U+007A (i.e. LATIN SMALL LETTER A to
   LATIN SMALL LETTER Z) are considered to also match.

  <p><dfn id=converting-a-string-to-uppercase title="converted to
   uppercase">Converting a string to uppercase</dfn> means replacing all
   characters in the range U+0061 .. U+007A (i.e. LATIN SMALL LETTER A to
   LATIN SMALL LETTER Z) with the corresponding characters in the range
   U+0041 .. U+005A (i.e. LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z).

  <p><dfn id=converting-a-string-to-lowercase title="converted to
   lowercase">Converting a string to lowercase</dfn> means replacing all
   characters in the range U+0041 .. U+005A (i.e. LATIN CAPITAL LETTER A to
   LATIN CAPITAL LETTER Z) with the corresponding characters in the range
   U+0061 .. U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z).

  <h3 id=dom-features><span class=secno>1.4. </span>DOM features</h3>

  <p class=XXX>Features are ASCII case-insensitive. Empty string means any
   version.

  <p class=XXX>Suggest how specs are to define feature strings.

  <h3 id=cloning-nodes><span class=secno>1.5. </span>Cloning nodes</h3>

  <p>When a UA is to <dfn id=clone>clone</dfn> a <a href="#node"><var
   title>node</var></a>, with a <var title>new ownerDocument</var> and with a
   <var title>clone children</var> flag, it must run the following steps:

  <ol>
   <li>
    <p>If <a href="#node"><var title>node</var></a> is a <a
     href="#documenttype"><code>DocumentType</code></a> node, raise a <code
     title="dom-Exception-NOT_SUPPORTED_ERR">NOT_SUPPORTED_ERR</code>
     exception and abort these steps.

   <li>
    <p>Let <var title>copy</var> be a new <a
     href="#node"><code>Node</code></a> that implements the same interfaces
     as <a href="#node"><var title>node</var></a>, with <a
     href="#ownerdocument"><code
     title=dom-Node-ownerDocument>ownerDocument</code></a> set to <var
     title>new ownerDocument</var>, <a href="#prefix"><code
     title=dom-Node-prefix>prefix</code></a>, <a href="#localname"><code
     title=dom-Node-localName>localName</code></a> and <a
     href="#namespaceuri"><code
     title=dom-Node-namespaceURI>namespaceURI</code></a> attributes set to
     the values of the attributes on <a href="#node"><var
     title>node</var></a> with the same names, and other attributes set to
     the values of the attributes on <a href="#node"><var
     title>node</var></a> with the same names depending on the type of <a
     href="#node"><var title>node</var></a> according to the following table:</p>

    <table>
     <thead>
      <tr>
       <th>Type of <a href="#node"><var title>node</var></a>

       <th>Attributes

     <tbody>
      <tr>
       <td><a href="#element"><code>Element</code></a>

       <td>&mdash;

      <tr>
       <td><a href="#attr"><code>Attr</code></a>

       <td><code title=dom-Attr-value>value</code>

      <tr>
       <td><a href="#text"><code>Text</code></a>

       <td><a href="#data"><code title=dom-CharacterData-data>data</code></a>
        

      <tr>
       <td><a
        href="#processinginstruction"><code>ProcessingInstruction</code></a>

       <td><code title=dom-ProcessingInstruction-target>target</code>, <code
        title=dom-ProcessingInstruction-data>data</code>

      <tr>
       <td><a href="#comment"><code>Comment</code></a>

       <td><a href="#data"><code title=dom-CharacterData-data>data</code></a>
        

      <tr>
       <td><a href="#documentfragment"><code>DocumentFragment</code></a>

       <td>&mdash;
    </table>

   <li>
    <p>If <a href="#node"><var title>node</var></a> is an <a
     href="#element"><code>Element</code></a> node, <span class=XXX>copy its
     attributes</span>.

   <li>
    <p>If the <var title>clone children</var> flag is set, <a
     href="#clone">clone</a> all the children of <a href="#node"><var
     title>node</var></a> and append them to <var title>copy</var>, with the
     same <var title>new ownerDocument</var> and the <var title>clone
     children</var> flag being set.

   <li>
    <p>Return <var title>copy</var>.
  </ol>

  <h3 id=legal-hierarchy><span class=secno>1.6. </span>Legal hierarchy</h3>

  <p>A <a href="#node"><code>Node</code></a> is said to have a <dfn
   id=legal-hierarchy0>legal hierarchy</dfn> if all the following conditions
   are true:

  <ul>
   <li>
    <p>The <a href="#node"><code>Node</code></a> is a <a
     href="#document"><code>Document</code></a> node or an <a
     href="#attr"><code>Attr</code></a> node and has no parent node.

   <li>
    <p>The <a href="#node"><code>Node</code></a> is a <a
     href="#document"><code>Document</code></a> node and has no child <a
     href="#text"><code>Text</code></a> nodes.

   <li>
    <p>The <a href="#node"><code>Node</code></a> is a <a
     href="#document"><code>Document</code></a> node and has no more than one
     child <a href="#element"><code>Element</code></a> node.

   <li>
    <p>The <a href="#node"><code>Node</code></a> is an <a
     href="#attr"><code>Attr</code></a> node, a <a
     href="#text"><code>Text</code></a> node, a <a
     href="#processinginstruction"><code>ProcessingInstruction</code></a>
     node, a <a href="#comment"><code>Comment</code></a> node, or a <a
     href="#documenttype"><code>DocumentType</code></a> node, and has no
     child nodes.
  </ul>

  <p>Before running the steps of an algorithm of a method or attribute in
   this specification, the user agent must check that running the algorithm
   will result in a <a href="#legal-hierarchy0">legal hierarchy</a>. If it
   won't, then the user agent must instead raise a <code
   title="dom-domexception-HIERARCHY_REQUEST_ERR">HIERARCHY_REQUEST_ERR</code>
   exception.

  <h2 id=basic-types><span class=secno>2. </span>Basic types</h2>
  <!-- DOMString is defined in WebIDL -->

  <p>A <dfn id=domtimestamp>DOMTimeStamp</dfn> represents a number of
   milliseconds.

  <pre class=idl>typedef unsigned long long DOMTimeStamp;</pre>
  <!-- DOMUserData dropped -->
  <!-- DOMObject dropped -->

  <h2 id=interfaces><span class=secno>3. </span>Interfaces</h2>

  <h3 id=exception-domexception><span class=secno>3.1. </span>Exception <a
   href="#domexception"><code title>DOMException</code></a></h3>

  <pre class=idl>exception <dfn id=domexception>DOMException</dfn> {
  const unsigned short <span title="dom-domexception-INDEX_SIZE_ERR">INDEX_SIZE_ERR</span> = 1;
  const unsigned short <span title="dom-domexception-DOMSTRING_SIZE_ERR">DOMSTRING_SIZE_ERR</span> = 2;
  const unsigned short <span title="dom-domexception-HIERARCHY_REQUEST_ERR">HIERARCHY_REQUEST_ERR</span> = 3;
  const unsigned short <span title="dom-domexception-WRONG_DOCUMENT_ERR">WRONG_DOCUMENT_ERR</span> = 4;
  const unsigned short <span title="dom-domexception-INVALID_CHARACTER_ERR">INVALID_CHARACTER_ERR</span> = 5;
  const unsigned short <span title="dom-domexception-NO_DATA_ALLOWED_ERR">NO_DATA_ALLOWED_ERR</span> = 6;
  const unsigned short <span title="dom-domexception-NO_MODIFICATION_ALLOWED_ERR">NO_MODIFICATION_ALLOWED_ERR</span> = 7;
  const unsigned short <span title="dom-domexception-NOT_FOUND_ERR">NOT_FOUND_ERR</span> = 8;
  const unsigned short <span title="dom-domexception-NOT_SUPPORTED_ERR">NOT_SUPPORTED_ERR</span> = 9;
  const unsigned short <span title="dom-domexception-INUSE_ATTRIBUTE_ERR">INUSE_ATTRIBUTE_ERR</span> = 10;
  const unsigned short <span title="dom-domexception-INVALID_STATE_ERR">INVALID_STATE_ERR</span> = 11;
  const unsigned short <span title="dom-domexception-SYNTAX_ERR">SYNTAX_ERR</span> = 12;
  const unsigned short <span title="dom-domexception-INVALID_MODIFICATION_ERR">INVALID_MODIFICATION_ERR</span> = 13;
  const unsigned short <span title="dom-domexception-NAMESPACE_ERR">NAMESPACE_ERR</span> = 14;
  const unsigned short <span title="dom-domexception-INVALID_ACCESS_ERR">INVALID_ACCESS_ERR</span> = 15;
  const unsigned short <span title="dom-domexception-VALIDATION_ERR">VALIDATION_ERR</span> = 16;
  const unsigned short <span title="dom-domexception-TYPE_MISMATCH_ERR">TYPE_MISMATCH_ERR</span> = 17;
  const unsigned short <span title="dom-domexception-SECURITY_ERR">SECURITY_ERR</span> = 18;
  const unsigned short <span title="dom-domexception-NETWORK_ERR">NETWORK_ERR</span> = 19;
  const unsigned short <span title="dom-domexception-ABORT_ERR">ABORT_ERR</span> = 20;
  const unsigned short <span title="dom-domexception-URL_MISMATCH_ERR">URL_MISMATCH_ERR</span> = 21;
  const unsigned short <span title="dom-domexception-QUOTA_EXCEEDED_ERR">QUOTA_EXCEEDED_ERR</span> = 22;
  const unsigned short <span title="dom-domexception-DATAGRID_MODEL_ERR">DATAGRID_MODEL_ERR</span> = 23;

  unsigned short <a href="#code" title=dom-DOMException-code>code</a>;
  DOMString <a href="#message" title=dom-DOMException-message>message</a>;
  DOMString <a href="#name" title=dom-DOMException-name>name</a>;
};</pre>

  <p>The <dfn id=code title=dom-DOMException-code><code>code</code></dfn>
   exception member must return the code for the exception, which must be one
   of the following:

  <dl class=XXX>
   <dt>...

   <dd>...
  </dl>

  <p>The <dfn id=message
   title=dom-DOMException-message><code>message</code></dfn> exception member
   must return <span class=XXX>...</span>

  <p>The <dfn id=name title=dom-DOMException-name><code>name</code></dfn>
   exception member must return <span class=XXX>...</span></p>
  <!-- DOMStringList dropped -->
  <!-- NameList dropped -->
  <!-- DOMImplementationList dropped -->
  <!-- DOMImplementationSource dropped -->

  <h3 id=interface-domimplementation><span class=secno>3.2. </span>Interface
   <a href="#domimplementation"><code title>DOMImplementation</code></a></h3>

  <p>User agents must create a new <a
   href="#domimplementation"><code>DOMImplementation</code></a> object
   whenever a new <a href="#document"><code>Document</code></a> node is
   created and associate it with the that <a
   href="#document"><code>Document</code></a> node.

  <pre
   class=idl>interface <dfn id=domimplementation>DOMImplementation</dfn> {
  boolean <a href="#hasfeaturefeature-version" title=dom-DOMImplementation-hasFeature>hasFeature</a>(in DOMString feature, [TreatNullAs=EmptyString] in DOMString version);
  DocumentType <a href="#createdocumenttypequalifiedname-publicid" title=dom-DOMImplementation-createDocumentType>createDocumentType</a>([TreatNullAs=EmptyString] in DOMString qualifiedName, in DOMString publicId, in DOMString systemId);
  Document <a href="#createdocumentnamespaceuri-qualifiedname" title=dom-DOMImplementation-createDocument>createDocument</a>([TreatNullAs=EmptyString] in DOMString namespaceURI, [TreatNullAs=EmptyString] in DOMString qualifiedName, in DocumentType doctype);<!--
  DOMObject getFeature(in DOMString feature, in DOMString version);-->
};</pre>

  <p>The <dfn id=hasfeaturefeature-version
   title=dom-DOMImplementation-hasFeature><code>hasFeature(<var
   title>feature</var>, <var title>version</var>)</code></dfn> method must
   return true if the UA supports the given feature <var title>feature</var>
   of version <var title>version</var>, and false otherwise.

  <p>The <dfn id=createdocumenttypequalifiedname-publicid
   title=dom-DOMImplementation-createDocumentType><code>createDocumentType(<var
   title>qualifiedName</var>, <var title>publicId</var>, <var
   title>systemId</var>)</code></dfn> method must run the following steps:

  <ol>
   <li>
    <p>If <var title>qualifiedName</var> doesn't match the <code
     title>Name</code> production in XML, raise an <code
     title="dom-DOMException-INVALID_CHARACTER_ERR">INVALID_CHARACTER_ERR</code>
     exception and abort these steps. [XML]

   <li>
    <p>If <var title>qualifiedName</var> doesn't match the <code
     title>NCName</code> production in Namespaces in XML, raise a <code
     title="dom-DOMException-NAMESPACE_ERR">NAMESPACE_ERR</code> exception
     and abort these steps. [XMLNS]
     <!--<li><p>If <var title>publicId</var> contains a character that doesn't match the <code title>PubidChar</code> production in XML, raise an <code title=dom-DOMException-INVALID_CHARACTER_ERR>INVALID_CHARACTER_ERR</code> exception and abort these steps. [XML]-->
     <!-- DOM3 didn't check this -->
     <!--<li><p>If <var title>systemId</var> contains both a U+0022 QUOTATION MARK ('"') and a U+0027 APOSTROPHE ("'") character, raise an <code title=dom-DOMException-INVALID_CHARACTER_ERR>INVALID_CHARACTER_ERR</code> exception and abort these steps.-->
     <!-- DOM3 didn't check this -->

   <li>
    <p>Return a new <a href="#documenttype"><code>DocumentType</code></a>
     node with <a href="#ownerdocument"><code
     title=dom-Node-ownerDocument>ownerDocument</code></a> set to null, <code
     title=dom-DocumentType-name>name</code> set to <var
     title>qualifiedName</var>, <code
     title=dom-DocumentType-publicId>publicId</code> set to <var
     title>publicId</var>, and <code
     title=dom-DocumentType-systemId>systemId</code> set to <var
     title>systemId</var>.
  </ol>

  <p class=note>No check is performed that the <var title>publicId</var>
   matches the <code title>PublicChar</code> production in XML or that the
   <var title>systemId</var> doesn't contain both a quotation mark (") and an
   apostrophe (').

  <p>The <dfn id=createdocumentnamespaceuri-qualifiedname
   title=dom-DOMImplementation-createDocument><code>createDocument(<var
   title>namespaceURI</var>, <var title>qualifiedName</var>, <var
   title>doctype</var>)</code></dfn> method must run the following steps:

  <ol>
   <li>
    <p>Let <a href="#document"><var title>document</var></a> be a new <a
     href="#document"><code>Document</code></a> node.

   <li>
    <p>Let <a href="#element"><var title>element</var></a> be null.

   <li>
    <p>If <var title>qualifiedName</var> is not the empty string, set <a
     href="#element"><var title>element</var></a> to the result of invoking
     the <a href="#createelementnsnamespaceuri-qualifiednam"><code
     title=dom-Document-createElementNS>createElementNS</code></a> method
     with the arguments <var title>namespaceURI</var> and <var
     title>qualifiedName</var> on <a href="#document"><var
     title>document</var></a>. If that raised an exception, re-raise the same
     exception and abort these steps.

   <li>
    <p>If <var title>doctype</var> is not null, run the following substeps:

    <ol>
     <li>
      <p>If the <var title>doctype</var>'s <a href="#ownerdocument"><code
       title=dom-Node-ownerDocument>ownerDocument</code></a> is not null,
       raise a <code
       title="dom-DOMException-WRONG_DOCUMENT_ERR">WRONG_DOCUMENT_ERR</code>
       exception and abort the overall set of steps.

     <li>
      <p>Set the <var title>doctype</var>'s <a href="#ownerdocument"><code
       title=dom-Node-ownerDocument>ownerDocument</code></a> to <a
       href="#document"><var title>document</var></a>.

     <li>
      <p>Append <var title>doctype</var> to <a href="#document"><var
       title>document</var></a>.
    </ol>

   <li>
    <p>If <a href="#element"><var title>element</var></a> is not null, append
     <a href="#element"><var title>element</var></a> to <a
     href="#document"><var title>document</var></a>.

   <li>
    <p>Return <a href="#document"><var title>document</var></a>.
  </ol>

  <h3 id=interface-documentfragment><span class=secno>3.3. </span>Interface
   <a href="#documentfragment"><code title>DocumentFragment</code></a></h3>

  <pre
   class=idl>interface <dfn id=documentfragment>DocumentFragment</dfn> : <a href="#node">Node</a> {
};</pre>

  <h3 id=interface-document><span class=secno>3.4. </span>Interface <a
   href="#document"><code title>Document</code></a></h3>

  <pre
   class=idl>interface <dfn id=document>Document</dfn> : <a href="#node">Node</a> {
  readonly attribute <a href="#documenttype">DocumentType</a> <a href="#doctype" title=dom-Document-doctype>doctype</a>;
  readonly attribute <a href="#domimplementation">DOMImplementation</a> <a href="#implementation" title=dom-Document-implementation>implementation</a>;
  readonly attribute <a href="#element">Element</a> <a href="#documentelement" title=dom-Document-documentElement>documentElement</a>;
  <a href="#element">Element</a> <a href="#createelementtagname" title=dom-Document-createElement>createElement</a>(in DOMString tagName);
  <a href="#documentfragment">DocumentFragment</a> createDocumentFragment();
  <a href="#text">Text</a> <a href="#createtextnodedata" title=dom-Document-createTextNode>createTextNode</a>(in DOMString data);
  <a href="#comment">Comment</a> <a href="#createcommentdata" title=dom-Document-createComment>createComment</a>(in DOMString data);<!--
  CDATASection createCDATASection(in DOMString data);-->
  <a href="#processinginstruction">ProcessingInstruction</a> <a href="#createprocessinginstructiontarget-data" title=dom-Document-createProcessingInstruction>createProcessingInstruction</a>(in DOMString target, in DOMString data);<!--
  <span>Attr</span> <span title=dom-Document-createAttribute>createAttribute</span>(in DOMString name);
  EntityReference createEntityReference(in DOMString name);-->
  <a href="#nodelist">NodeList</a> <a href="#getelementsbytagnamelocalname" title=dom-Document-getElementsByTagName>getElementsByTagName</a>(in DOMString tagname);
  <a href="#node">Node</a> <a href="#importnodeimportednode-deep" title=dom-Document-importNode>importNode</a>(in <a href="#node">Node</a> importedNode, in boolean deep);
  <a href="#element">Element</a> <a href="#createelementnsnamespaceuri-qualifiednam" title=dom-Document-createElementNS>createElementNS</a>(in DOMString namespaceURI, in DOMString qualifiedName);<!--
  <span>Attr</span> <span title=dom-Document-createAttributeNS>createAttributeNS</span>(in DOMString namespaceURI, in DOMString qualifiedName);-->
  <a href="#nodelist">NodeList</a> <a href="#getelementsbytagnamensnamespaceuri-local" title=dom-Document-getElementsByTagNameNS>getElementsByTagNameNS</a>(in DOMString namespaceURI, in DOMString localName);
  <a href="#element">Element</a> <a href="#getelementbyidelementid" title=dom-Document-getElementById>getElementById</a>(in DOMString elementId);
  readonly attribute DOMString <span title=dom-Document-inputEncoding>inputEncoding</span>;<!--
  readonly attribute DOMString xmlEncoding;
           attribute boolean xmlStandalone;
           attribute DOMString xmlVersion;
           attribute boolean strictErrorChecking;-->
           attribute DOMString <span title=dom-Document-documentURI>documentURI</span>;
  <a href="#node">Node</a> <a href="#adoptnodesource" title=dom-Document-adoptNode>adoptNode</a>(in <a href="#node">Node</a> source);<!--
  readonly attribute DOMConfiguration domConfig;
  void normalizeDocument();
  Node renameNode(in Node n, in DOMString namespaceURI, in DOMString qualifiedName);-->
};</pre>

  <p>The <dfn id=doctype
   title=dom-Document-doctype><code>doctype</code></dfn> attribute must
   return the first child of the <a
   href="#document"><code>Document</code></a> node that is a <a
   href="#documenttype"><code>DocumentType</code></a> node, if there is one,
   or null otherwise.

  <p class=note>In both HTML and XML there will only ever be one <a
   href="#documenttype"><code>DocumentType</code></a> node descendant of the
   <a href="#document"><code>Document</code></a> node. [HTML] [XML]

  <p>The <dfn id=implementation
   title=dom-Document-implementation><code>implementation</code></dfn>
   attribute must return the <a
   href="#domimplementation"><code>DOMImplementation</code></a> object that
   is associated with the <a href="#document"><code>Document</code></a> node.
   

  <p>The <dfn id=documentelement
   title=dom-Document-documentElement><code>documentElement</code></dfn>
   attribute must return the first child of the <a
   href="#document"><code>Document</code></a> node that is an <a
   href="#element"><code>Element</code></a> node, if there is one, or null
   otherwise.

  <p>The <dfn id=createelementtagname
   title=dom-Document-createElement><code>createElement(<var
   title>tagName</var>)</code></dfn> method must run the following steps:</p>
  <!-- XXX can we remove the error checking? -->

  <ol>
   <li>
    <p>If <var title>tagName</var> doesn't match the <code title>Name</code>
     production in XML, raise an <code
     title="dom-DOMException-INVALID_CHARACTER_ERR">INVALID_CHARACTER_ERR</code>
     exception and abort these steps. [XML]

   <li>
    <p>Return a new <a href="#element"><code>Element</code></a> node with no
     attributes, <a href="#namespaceuri"><code
     title=dom-Node-namespaceURI>namespaceURI</code></a> set to "<code
     title>http://www.w3.org/1999/xhtml</code>", <a href="#prefix"><code
     title=dom-Node-prefix>prefix</code></a> set to null, <a
     href="#localname"><code title=dom-Node-localName>localName</code></a>
     set to <var title>tagName</var>, <a
     href="#converting-a-string-to-lowercase">converted to lowercase</a>, and
     <a href="#ownerdocument"><code
     title=dom-Node-ownerDocument>ownerDocument</code></a> set to the <a
     href="#context-node">context node</a>.
  </ol>
  <!-- this is very different from DOM3 -->

  <p class=note>No check is performed that the local name will match the
   <code title>NCName</code> production in Namespaces in XML. [XMLNS]

  <p>The <dfn id=createdocumentfragment
   title=dom-Document-createDocumentFragment><code>createDocumentFragment()</code></dfn>
   method must return a new <a
   href="#documentfragment"><code>DocumentFragment</code></a> node with its
   <a href="#ownerdocument"><code
   title=dom-Node-ownerDocument>ownerDocument</code></a> set to the <a
   href="#context-node">context node</a>.

  <p>The <dfn id=createtextnodedata
   title=dom-Document-createTextNode><code>createTextNode(<var
   title>data</var>)</code></dfn> method must return a new <a
   href="#text"><code>Text</code></a> node with its <a href="#data"><code
   title=dom-CharacterData-data>data</code></a> attribute set to <var
   title>data</var> and <a href="#ownerdocument"><code
   title=dom-Node-ownerDocument>ownerDocument</code></a> set to the <a
   href="#context-node">context node</a>.

  <p class=note>No check is performed that the text node contains characters
   that match the <code title>Char</code> production in XML. [XML]

  <p>The <dfn id=createcommentdata
   title=dom-Document-createComment><code>createComment(<var
   title>data</var>)</code></dfn> method must return a new <a
   href="#comment"><code>Comment</code></a> node with its <a
   href="#data"><code title=dom-CharacterData-data>data</code></a> attribute
   set to <var title>data</var> and <a href="#ownerdocument"><code
   title=dom-Node-ownerDocument>ownerDocument</code></a> set to the <a
   href="#context-node">context node</a>.

  <p class=note>No check is performed that the comment contains characters
   that match the <code title>Char</code> production in XML or that it
   contains two adjacent hyphens or ends with a hyphen. [XML]

  <p>The <dfn id=createprocessinginstructiontarget-data
   title=dom-Document-createProcessingInstruction><code>createProcessingInstruction(<var
   title>target</var>, <var title>data</var>)</code></dfn> method must run
   the following steps:

  <ol>
   <li>
    <p>If <var title>target</var> doesn't match the
     <!--<code title>PITarget</code>--> <code title>Name</code> production in
     XML, raise an <code
     title="dom-DOMException-INVALID_CHARACTER_ERR">INVALID_CHARACTER_ERR</code>
     exception and abort these steps. [XML]
     <!-- DOM3 didn't check for "xml" -->
   </li>
   <!--<li><p>If <var title>target</var> contains a U+003A COLON (":") character, raise a <code title=dom-DOMException-NAMESPACE_ERR>NAMESPACE_ERR</code> exception and abort these steps.-->
   <!-- DOM3 didn't check this -->

   <li>
    <p>Return a new <a
     href="#processinginstruction"><code>ProcessingInstruction</code></a>
     node with its <code title=dom-ProcessingInstruction-target>target</code>
     attribute set to <var title>target</var>, <code
     title=dom-ProcessingInstruction-data>data</code> attribute set to <var
     title>data</var> and <a href="#ownerdocument"><code
     title=dom-Node-ownerDocument>ownerDocument</code></a> set to the <a
     href="#context-node">context node</a>.
  </ol>

  <p class=note>No check is performed that the processing instruction target
   contains "xml" or the colon, or that the data contains characters that
   match the <code title>Char</code> production in XML or that it contains
   the string "<code title>?></code>". [XML]</p>
  <!--<p>The <dfn title=dom-Document-createAttribute><code>createAttribute(<var title>name</var>)</code></dfn> method must run the following steps:</p>
<ol>
 <li><p>If <var title>name</var> doesn't match the <code title>Name</code> production in XML, raise an <code title=dom-DOMException-INVALID_CHARACTER_ERR>INVALID_CHARACTER_ERR</code> exception and abort these steps. [XML]
 <li><p>Return a new <code>Attr</code> node with its <code title=dom-Node-namespaceURI>namespaceURI</code> set to null, <code title=dom-Node-prefix>prefix</code> set to null, <code title=dom-Node-localName>localName</code> set to <var title>name</var>, and <code title=dom-Node-ownerDocument>ownerDocument</code> set to the <span>context node</span>.
</ol>-->
  <!-- this is different from DOM3 -->
  <!--<p class=note>No check is performed that the local name will match the <code title>NCName</code> production in Namespaces in XML. [XMLNS]-->

  <p>The <dfn id=getelementsbytagnamelocalname
   title=dom-Document-getElementsByTagName><code>getElementsByTagName(<var
   title>localName</var>)</code></dfn> method must run the following steps:

  <ol>
   <li>
    <p>If <var title>localName</var> is just the character U+002A ASTERISK
     ("*"), return a <a href="#nodelist"><code>NodeList</code></a> rooted at
     the <a href="#context-node">context node</a>, whose filter matches only
     <a href="#element"><code>Element</code></a> nodes.

   <li>
    <p>Otherwise, return a <a href="#nodelist"><code>NodeList</code></a>
     rooted at the <a href="#context-node">context node</a>, whose filter
     matches only <a href="#element"><code>Element</code></a> nodes that have
     a <a href="#localname"><code
     title=dom-node-localName>localName</code></a> equal to <var
     title>localName</var>.
  </ol>

  <p>The <dfn id=importnodeimportednode-deep
   title=dom-Document-importNode><code>importNode(<var
   title>importedNode</var>, <var title>deep</var>)</code></dfn> method must
   <!--run the following steps:
<ol>-->
   <!--<li><p>If the <span>context node</span> is an XML document, then if any imported <code>Element</code> or <code>Attr</code> node have a <code title=dom-Node-nodeName>nodeName</code> that doesn't match the <code>Name</code> production in XML, raise an <code title=dom-DOMException-INVALID_CHARACTER_ERR>INVALID_CHARACTER_ERR</code> exception and abort these steps. [XML] (browsers don't do this) -->
   <!-- XXX this might be wrong -->
   <!--<li><p>If <var>importedNode</var>'s <code title=dom-Node-ownerDocument>ownerDocument</code>'s <span>effective script origin</span> is not the <span title=same-origin>same</span> as the <span>effective script origin</span> of the <span>context node</span>, raise a <code title=dom-domexception-SECURITY_ERR>SECURITY_ERR</code> exception and abort these steps. [HTML5] (can't get a reference to a node that you can't adopt anyway) -->
   <!--<li><p>R-->return a <a href="#clone">clone</a> of <var
   title>importedNode</var>, with <var title>new ownerDocument</var> being
   the <a href="#context-node">context node</a>, and the <var title>clone
   children</var> flag set if <var title>deep</var> is true. <!--</ol>-->

  <p>The <dfn id=createelementnsnamespaceuri-qualifiednam
   title=dom-Document-createElementNS><code>createElementNS(<var
   title>namespaceURI</var>, <var title>qualifiedName</var>)</code></dfn>
   method must run the following steps:

  <ol>
   <li>
    <p>If <var title>qualifiedName</var> doesn't match the <code
     title>Name</code> production in XML, raise an <code
     title="dom-DOMException-INVALID_CHARACTER_ERR">INVALID_CHARACTER_ERR</code>
     exception and abort these steps. [XML]

   <li>
    <p>If <var title>qualifiedName</var> doesn't match the <code
     title>QName</code> production in Namespaces in XML, raise a <code
     title="dom-DOMException-NAMESPACE_ERR">NAMESPACE_ERR</code> exception
     and abort these steps. [XMLNS]

   <li>
    <p>If <var title>qualifiedName</var> contains a U+003E COLON (":")
     character, then split the string on the colon and let <var
     title>prefix</var> be the part before the colon and <var
     title>localName</var> the part after the colon. Otherwise, let <var
     title>prefix</var> be null and <var title>localName</var> be <var
     title>qualifiedName</var>.

   <li>
    <p>If <var title>prefix</var> is not null and <var
     title>namespaceURI</var> is an empty string, raise a <code
     title="dom-DOMException-NAMESPACE_ERR">NAMESPACE_ERR</code> exception
     and abort these steps.

   <li>
    <p>If <var title>prefix</var> is "xml" and <var title>namespaceURI</var>
     is not "http://www.w3.org/XML/1998/namespace", raise a <code
     title="dom-DOMException-NAMESPACE_ERR">NAMESPACE_ERR</code> exception
     and abort these steps.

   <li>
    <p>If <var title>qualifiedName</var> or <var title>prefix</var> is
     "xmlns" and <var title>namespaceURI</var> is not
     "http://www.w3.org/2000/xmlns/", raise a <code
     title="dom-DOMException-NAMESPACE_ERR">NAMESPACE_ERR</code> exception
     and abort these steps.

   <li>
    <p>If <var title>namespaceURI</var> is "http://www.w3.org/2000/xmlns/"
     and neither <var title>qualifiedName</var> nor <var title>prefix</var>
     is "xmlns", raise a <code
     title="dom-DOMException-NAMESPACE_ERR">NAMESPACE_ERR</code> exception
     and abort these steps.

   <li>
    <p>Return a new <a href="#element"><code>Element</code></a> node with no
     attributes, <a href="#namespaceuri"><code
     title=dom-Node-namespaceURI>namespaceURI</code></a> set to <var
     title>namespaceURI</var>, <a href="#prefix"><code
     title=dom-Node-prefix>prefix</code></a> set to <var title>prefix</var>,
     <a href="#localname"><code title=dom-Node-localName>localName</code></a>
     set to <var title>localName</var>, and <a href="#ownerdocument"><code
     title=dom-Node-ownerDocument>ownerDocument</code></a> set to the <a
     href="#context-node">context node</a>.
  </ol>

  <p>The <dfn id=getelementsbytagnamensnamespaceuri-local
   title=dom-Document-getElementsByTagNameNS><code>getElementsByTagNameNS(<var
   title>namespaceURI</var>, <var title>localName</var>)</code></dfn> method
   must run the following steps:

  <ol>
   <li>
    <p>If both <var title>namespaceURI</var> and <var title>localName</var>
     are just the character U+002A ASTERISK ("*"), return a <a
     href="#nodelist"><code>NodeList</code></a> rooted at the <a
     href="#context-node">context node</a>, whose filter matches only <a
     href="#element"><code>Element</code></a> nodes.

   <li>
    <p>Otherwise, if <var title>namespaceURI</var> is just the character
     U+002A ASTERISK ("*"), return a <a
     href="#nodelist"><code>NodeList</code></a> rooted at the <a
     href="#context-node">context node</a>, whose filter matches only <a
     href="#element"><code>Element</code></a> nodes with the <a
     href="#localname"><code title=dom-Node-localName>localName</code></a>
     equal to <var title>localName</var>.

   <li>
    <p>Otherwise, if <var title>localName</var> is just the character U+002A
     ASTERISK ("*"), return a <a href="#nodelist"><code>NodeList</code></a>
     rooted at the <a href="#context-node">context node</a>, whose filter
     matches only <a href="#element"><code>Element</code></a> nodes with the
     <a href="#namespaceuri"><code
     title=dom-Node-namespaceURI>namespaceURI</code></a> equal to <var
     title>namespaceURI</var>.

   <li>
    <p>Otherwise, return a <a href="#nodelist"><code>NodeList</code></a>
     rooted at the <a href="#context-node">context node</a>, whose filter
     matches only <a href="#element"><code>Element</code></a> nodes that have
     a <code title=dom-Element-namespaceURI>namespaceURI</code> equal to <var
     title>namespaceURI</var> and a <code
     title=dom-Element-localName>localName</code> equal to <var
     title>localName</var> (both in a <a
     href="#case-sensitive">case-sensitive</a> manner).
  </ol>

  <p>The <dfn id=getelementbyidelementid
   title=dom-Document-getElementById><code>getElementById(<var
   title>elementId</var>)</code></dfn> method must return the first <a
   href="#element"><code>Element</code></a> node, in <a
   href="#tree-order">tree order</a>, in the <a href="#context-node">context
   node</a> that has the ID <var title>elementId</var>, or null if there is
   none.
   <!-- XXX <annevk5>		zcorpan, it sort of makes sense if you define DOM ID and then have the respective specs define how they map to that -->
   

  <p>The <dfn id=adoptnodesource
   title=dom-Document-adoptNode><code>adoptNode(<var
   title>source</var>)</code></dfn> method must run the following steps:

  <ol><!-- no security check -->

   <li>
    <p>If <var>source</var>'s <a href="#parentnode"><code
     title=dom-Node-parentNode>parentNode</code></a> is not null, remove
     <var>source</var> from its parent.

   <li>
    <p>Set <var>source</var>'s <a href="#ownerdocument"><code
     title=dom-Node-ownerDocument>ownerDocument</code></a> to the <a
     href="#context-node">context node</a>.

   <li>
    <p>Return <var>source</var>.
  </ol>

  <h3 id=interface-node><span class=secno>3.5. </span>Interface <a
   href="#node"><code title>Node</code></a></h3>

  <pre class=idl>interface <dfn id=node>Node</dfn> {

  // NodeType
  const unsigned short <span title="dom-Node-ELEMENT_NODE">ELEMENT_NODE</span> = 1;
  const unsigned short <span title="dom-Node-ATTRIBUTE_NODE">ATTRIBUTE_NODE</span> = 2;
  const unsigned short <span title="dom-Node-TEXT_NODE">TEXT_NODE</span> = 3;
  const unsigned short <span title="dom-Node-CDATA_SECTION_NODE">CDATA_SECTION_NODE</span> = 4; // historical
  const unsigned short <span title="dom-Node-ENTITY_REFERENCE_NODE">ENTITY_REFERENCE_NODE</span> = 5; // historical
  const unsigned short <span title="dom-Node-ENTITY_NODE">ENTITY_NODE</span> = 6; // historical
  const unsigned short <span title="dom-Node-PROCESSING_INSTRUCTION_NODE">PROCESSING_INSTRUCTION_NODE</span> = 7;
  const unsigned short <span title="dom-Node-COMMENT_NODE">COMMENT_NODE</span> = 8;
  const unsigned short <span title="dom-Node-DOCUMENT_NODE">DOCUMENT_NODE</span> = 9;
  const unsigned short <span title="dom-Node-DOCUMENT_TYPE_NODE">DOCUMENT_TYPE_NODE</span> = 10;
  const unsigned short <span title="dom-Node-DOCUMENT_FRAGMENT_NODE">DOCUMENT_FRAGMENT_NODE</span> = 11;
  const unsigned short <span title="dom-Node-NOTATION_NODE">NOTATION_NODE</span> = 12; // historical

  readonly attribute DOMString <a href="#nodename" title=dom-Node-nodeName>nodeName</a>;
           attribute DOMString <a href="#nodevalue" title=dom-Node-nodeValue>nodeValue</a>;
  readonly attribute unsigned short <a href="#nodetype" title=dom-Node-nodeType>nodeType</a>;
  readonly attribute <a href="#node">Node</a> <a href="#parentnode" title=dom-Node-parentNode>parentNode</a>;
  readonly attribute <a href="#element">Element</a> <a href="#parentelement" title=dom-Node-parentElement>parentElement</a>;
  readonly attribute <a href="#nodelist">NodeList</a> <a href="#childnodes" title=dom-Node-childNodes>childNodes</a>;
  readonly attribute <a href="#node">Node</a> <a href="#firstchild" title=dom-Node-firstChild>firstChild</a>;
  readonly attribute <a href="#node">Node</a> <a href="#lastchild" title=dom-Node-lastChild>lastChild</a>;
  readonly attribute <a href="#node">Node</a> <a href="#previoussibling" title=dom-Node-previousSibling>previousSibling</a>;
  readonly attribute <a href="#node">Node</a> <a href="#nextsibling" title=dom-Node-nextSibling>nextSibling</a>;
  readonly attribute <a href="#namednodemap">NamedNodeMap</a> <a href="#attributes" title=dom-Node-attributes>attributes</a>;
  readonly attribute <a href="#document">Document</a> <a href="#ownerdocument" title=dom-Node-ownerDocument>ownerDocument</a>;
  <a href="#node">Node</a> <a href="#insertbeforenewchild-refchild" title=dom-Node-insertBefore>insertBefore</a>(in <a href="#node">Node</a> newChild, [TreatUndefinedAs=Null] in <a href="#node">Node</a> refChild);
  <a href="#node">Node</a> <a href="#replacechildnewchild-oldchild" title=dom-Node-replaceChild>replaceChild</a>(in <a href="#node">Node</a> newChild, in <a href="#node">Node</a> oldChild);
  <a href="#node">Node</a> <a href="#removechildoldchild" title=dom-Node-removeChild>removeChild</a>(in <a href="#node">Node</a> oldChild);
  <a href="#node">Node</a> <a href="#appendchildnewchild" title=dom-Node-appendChild>appendChild</a>(in <a href="#node">Node</a> newChild);
  boolean <a href="#haschildnodes" title=dom-Node-hasChildNodes>hasChildNodes</a>();
  <a href="#node">Node</a> <a href="#clonenodedeep" title=dom-Node-cloneNode>cloneNode</a>(in boolean deep);<!--
  void normalize();-->
  boolean <a href="#issupportedfeature-version" title=dom-Node-isSupported>isSupported</a>(in DOMString feature, in DOMString version);
  readonly attribute DOMString <a href="#namespaceuri" title=dom-Node-namespaceURI>namespaceURI</a>;
  readonly attribute DOMString <a href="#prefix" title=dom-Node-prefix>prefix</a>;
  readonly attribute DOMString <a href="#localname" title=dom-Node-localName>localName</a>;
  boolean <a href="#hasattributes" title=dom-Node-hasAttributes>hasAttributes</a>();
  readonly attribute DOMString <a href="#baseuri" title=dom-Node-baseURI>baseURI</a>;

  // DocumentPosition
  const unsigned short <span title="dom-Node-DOCUMENT_POSITION_DISCONNECTED">DOCUMENT_POSITION_DISCONNECTED</span> = 0x01;
  const unsigned short <span title="dom-Node-DOCUMENT_POSITION_PRECEDING">DOCUMENT_POSITION_PRECEDING</span> = 0x02;
  const unsigned short <span title="dom-Node-DOCUMENT_POSITION_FOLLOWING">DOCUMENT_POSITION_FOLLOWING</span> = 0x04;
  const unsigned short <span title="dom-Node-DOCUMENT_POSITION_CONTAINS">DOCUMENT_POSITION_CONTAINS</span> = 0x08;
  const unsigned short <span title="dom-Node-DOCUMENT_POSITION_CONTAINED_BY">DOCUMENT_POSITION_CONTAINED_BY</span> = 0x10;
  const unsigned short <span title="dom-Node-DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC">DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC</span> = 0x20;

  unsigned short <a href="#comparedocumentpositionother" title=dom-Node-compareDocumentPosition>compareDocumentPosition</a>(in <a href="#node">Node</a> other);

  [TreatNullAs=EmptyString] attribute DOMString <a href="#textcontent" title=dom-Node-textContent>textContent</a>;
  boolean <a href="#issamenodeother" title=dom-Node-isSameNode>isSameNode</a>(in <a href="#node">Node</a> other);
  DOMString <a href="#lookupprefixnamespaceuri" title=dom-Node-lookupPrefix>lookupPrefix</a>(in DOMString namespaceURI);
  boolean <a href="#isdefaultnamespacenamespaceuri" title=dom-Node-isDefaultNamespace>isDefaultNamespace</a>(in DOMString namespaceURI);
  DOMString <a href="#lookupnamespaceuriprefix" title=dom-Node-lookupNamespaceURI>lookupNamespaceURI</a>(in DOMString prefix);
  boolean <a href="#isequalnodearg" title=dom-Node-isEqualNode>isEqualNode</a>(in <a href="#node">Node</a> arg);<!--
  DOMObject getFeature(in DOMString feature, in DOMString version);
  DOMUserData setUserData(in DOMString key, in DOMUserData data, in UserDataHandler handler);
  DOMUserData getUserData(in DOMString key);-->
};</pre>

  <p>The <dfn id=nodename
   title=dom-Node-nodeName><code>nodeName</code></dfn>, <dfn id=nodevalue
   title=dom-Node-nodeValue><code>nodeValue</code></dfn> and <dfn id=nodetype
   title=dom-Node-nodeType><code>nodeType</code></dfn> attributes must, on
   getting, return what is in the second, third and forth column,
   respectively, if the node also implements the interface in the first
   column on the same row in the following table:

  <table>
   <thead>
    <tr>
     <th>Interface

     <th><a href="#nodename"><code
      title=dom-Node-nodeName>nodeName</code></a>

     <th><a href="#nodevalue"><code
      title=dom-Node-nodeValue>nodeValue</code></a>

     <th><a href="#nodetype"><code
      title=dom-Node-nodeType>nodeType</code></a>

   <tbody>
    <tr>
     <td><a href="#element"><code>Element</code></a>

     <td>same as <a href="#tagname"><code
      title=dom-Element-tagName>tagName</code></a>

     <td>null

     <td>1

    <tr>
     <td><a href="#attr"><code>Attr</code></a>

     <td>same as <code title=dom-Attr-name>name</code>

     <td>same as <code title=dom-Attr-value>value</code>

     <td>2

    <tr>
     <td><a href="#text"><code>Text</code></a>

     <td>"<a href="#text"><code title>#text</code></a>"

     <td>same as <a href="#data"><code
      title=dom-CharacterData-data>data</code></a>

     <td>3

    <tr>
     <td><a
      href="#processinginstruction"><code>ProcessingInstruction</code></a>

     <td>same as <code title=dom-ProcessingInstruction-target>target</code>

     <td>same as <code title=dom-ProcessingInstruction-data>data</code>

     <td>7

    <tr>
     <td><a href="#comment"><code>Comment</code></a>

     <td>"<a href="#comment"><code title>#comment</code></a>"

     <td>same as <a href="#data"><code
      title=dom-CharacterData-data>data</code></a>

     <td>8

    <tr>
     <td><a href="#document"><code>Document</code></a>

     <td>"<a href="#document"><code title>#document</code></a>"

     <td>null

     <td>9

    <tr>
     <td><a href="#documenttype"><code>DocumentType</code></a>

     <td>same as <code title=dom-DocumentType-name>name</code>

     <td>null

     <td>10

    <tr>
     <td><a href="#documentfragment"><code>DocumentFragment</code></a>

     <td>"<code title>#document-fragment</code>"

     <td>null

     <td>11
  </table>

  <p>The <dfn id=parentnode
   title=dom-Node-parentNode><code>parentNode</code></dfn> attribute must, on
   getting, return the parent node of the <a href="#context-node">context
   node</a>, or null if there is no parent.

  <p>The <dfn id=parentelement
   title=dom-Node-parentElement><code>parentElement</code></dfn> attribute
   must, on getting, return the parent node of the <a
   href="#context-node">context node</a> if there is a parent and it is an
   element, or null otherwise.

  <p>The <dfn id=childnodes
   title=dom-Node-childNodes><code>childNodes</code></dfn> attribute must, on
   getting, return a <a href="#nodelist"><code>NodeList</code></a> rooted at
   the <a href="#context-node">context node</a> matching only child nodes.

  <p>The <dfn id=firstchild
   title=dom-Node-firstChild><code>firstChild</code></dfn> attribute must, on
   getting, return the first child node of the <a
   href="#context-node">context node</a>, or null if there is none.

  <p>The <dfn id=lastchild
   title=dom-Node-lastChild><code>lastChild</code></dfn> attribute must, on
   getting, return the last child node of the <a href="#context-node">context
   node</a>, or null if there is none.

  <p>The <dfn id=previoussibling
   title=dom-Node-previousSibling><code>previousSibling</code></dfn>
   attribute must, on getting, return the previous sibling node of the <a
   href="#context-node">context node</a>, or null if there is none.

  <p>The <dfn id=nextsibling
   title=dom-Node-nextSibling><code>nextSibling</code></dfn> attribute must,
   on getting, return the next sibling node of the <a
   href="#context-node">context node</a>, or null if there is none.

  <p>The <dfn id=attributes
   title=dom-Node-attributes><code>attributes</code></dfn> attribute must, on
   getting, return a <a href="#namednodemap"><code>NamedNodeMap</code></a> of
   all the <a href="#attr"><code>Attr</code></a> nodes associated with the
   node of the <a href="#context-node">context node</a>, if it is an <a
   href="#element"><code>Element</code></a> node, or null otherwise.

  <p>The <dfn id=ownerdocument
   title=dom-Node-ownerDocument><code>ownerDocument</code></dfn> attribute
   must, on getting, return the <a href="#document"><code>Document</code></a>
   node that the <a href="#context-node">context node</a> is associated with,
   or null if there is none.

  <p>The <dfn id=insertbeforenewchild-refchild
   title=dom-Node-insertBefore><code>insertBefore(<var>newChild</var>,
   <var>refChild</var>)</code></dfn> method must run the following steps:

  <ol>
   <li>
    <p>If <var>newChild</var> doesn't implement the <a
     href="#node"><code>Node</code></a> interface, or if <var>refChild</var>
     is not null or doesn't implement the <a
     href="#node"><code>Node</code></a> interface, then raise a <code
     title="dom-exception-NOT_SUPPORTED_ERR">NOT_SUPPORTED_ERR</code>
     exception and abort these steps.

   <li>
    <p>If <var>refChild</var> is not null and is not a child of the <a
     href="#context-node">context node</a>, then raise a <code
     title="dom-exception-NOT_FOUND_ERR">NOT_FOUND_ERR</code> exception and
     abort these steps. <!-- no security check -->

   <li>
    <p>If <var>newChild</var> is a <a
     href="#documentfragment"><code>DocumentFragment</code></a> node, then
     while <var>newChild</var>'s <a href="#firstchild"><code
     title=dom-Node-firstChild>firstChild</code></a> is not null, call <a
     href="#insertbeforenewchild-refchild"><code
     title=dom-Node-insertBefore>insertBefore</code></a> on the <a
     href="#context-node">context node</a> with <var>newChild</var>'s <a
     href="#firstchild"><code title=dom-Node-firstChild>firstChild</code></a>
     as first argument and <var>refChild</var> as second argument.

   <li>
    <p>Otherwise, if <var>refChild</var> is null, append <var>newChild</var>
     to the <a href="#context-node">context node</a>.

   <li>
    <p>Otherwise insert <var>newChild</var> in the <a
     href="#context-node">context node</a> as the previous sibling of
     <var>refChild</var>.

   <li>
    <p>Return <var>newChild</var>.
  </ol>

  <p>The <dfn id=replacechildnewchild-oldchild
   title=dom-Node-replaceChild><code>replaceChild(<var>newChild</var>,
   <var>oldChild</var>)</code></dfn> method must run the following steps:

  <ol>
   <li>
    <p>If <var>newChild</var> or <var>oldChild</var> doesn't implement the <a
     href="#node"><code>Node</code></a> interface, then raise a <code
     title="dom-exception-NOT_SUPPORTED_ERR">NOT_SUPPORTED_ERR</code>
     exception and abort these steps.

   <li>
    <p>If <var>oldChild</var> is not a child of the <a
     href="#context-node">context node</a>, then raise a <code
     title="dom-exception-NOT_FOUND_ERR">NOT_FOUND_ERR</code> exception and
     abort these steps. <!-- no security check -->

   <li>
    <p>Let <var>refChild</var> be <var>oldChild</var>'s <a
     href="#nextsibling"><code
     title=dom-Node-nextSibling>nextSibling</code></a>.

   <li>
    <p>Remove <var>oldChild</var> from <a href="#context-node">context
     node</a>.

   <li>
    <p>Call <a href="#insertbeforenewchild-refchild"><code
     title=dom-Node-insertBefore>insertBefore</code></a> on the <a
     href="#context-node">context node</a> with <var>newChild</var> and
     <var>refChild</var> as arguments, respectively.

   <li>
    <p>Return <var>newChild</var>.
  </ol>

  <p>The <dfn id=removechildoldchild
   title=dom-Node-removeChild><code>removeChild(<var>oldChild</var>)</code></dfn>
   method must run the following steps:

  <ol>
   <li>
    <p>If <var>oldChild</var> doesn't implement the <a
     href="#node"><code>Node</code></a> interface, then raise a <code
     title="dom-exception-NOT_SUPPORTED_ERR">NOT_SUPPORTED_ERR</code>
     exception and abort these steps.

   <li>
    <p>If <var>oldChild</var> is not a child of the <a
     href="#context-node">context node</a>, then raise a <code
     title="dom-exception-NOT_FOUND_ERR">NOT_FOUND_ERR</code> exception and
     abort these steps.

   <li>
    <p>Remove <var>oldChild</var> from <a href="#context-node">context
     node</a>.

   <li>
    <p>Return <var>oldChild</var>.
  </ol>

  <p>The <dfn id=appendchildnewchild
   title=dom-Node-appendChild><code>appendChild(<var>newChild</var>)</code></dfn>
   method must run the following steps:

  <ol>
   <li>
    <p>If <var>newChild</var> doesn't implement the <a
     href="#node"><code>Node</code></a> interface, then raise a <code
     title="dom-exception-NOT_SUPPORTED_ERR">NOT_SUPPORTED_ERR</code>
     exception and abort these steps. <!-- no security check -->

   <li>
    <p>Append <var>newChild</var> to the <a href="#context-node">context
     node</a>.

   <li>
    <p>Return <var>newChild</var>.
  </ol>

  <p>The <dfn id=haschildnodes
   title=dom-Node-hasChildNodes><code>hasChildNodes()</code></dfn> method
   must return false if the <a href="#context-node">context node</a>'s <a
   href="#firstchild"><code title=dom-Node-firstChild>firstChild</code></a>
   is null, and true otherwise.

  <p>The <dfn id=clonenodedeep
   title=dom-Node-cloneNode><code>cloneNode(<var>deep</var>)</code></dfn>
   method must return a <a href="#clone">clone</a> of the <a
   href="#context-node">context node</a>, with <var title>new
   ownerDocument</var> being the <a href="#context-node">context node</a>'s
   <a href="#ownerdocument"><code
   title=dom-Node-ownerDocument>ownerDocument</code></a>, and the <var
   title>clone children</var> flag set if <var title>deep</var> is true.

  <p>The <dfn id=issupportedfeature-version
   title=dom-Node-isSupported><code>isSupported(<var title>feature</var>,
   <var title>version</var>)</code></dfn> method must return true if the UA
   supports the given feature <var title>feature</var> of version <var
   title>version</var> on the <a href="#context-node">context node</a>, and
   false otherwise.

  <p>The <dfn id=namespaceuri
   title=dom-Node-namespaceURI><code>namespaceURI</code></dfn> attribute, on
   getting, must return the namespace that is associated with the node, if
   there is one and it's not the empty string, or null otherwise.

  <p>The <dfn id=prefix title=dom-Node-prefix><code>prefix</code></dfn>
   attribute, on getting, must return the prefix that is associated with the
   node, if there is one and it's not the empty string, or null otherwise.
   <!--On setting, it must run the following steps:

<ol>
 <li><p>Let <var title>prefix</var> be the value being assigned.
 <li>
  <p>If <var title>prefix</var> is not null, run the following substeps:
  <ol>
   <li><p>If <var title>prefix</var> doesn't match the <code title>Name</code> production in XML, raise an <code title=dom-DOMException-INVALID_CHARACTER_ERR>INVALID_CHARACTER_ERR</code> exception and abort these steps. [XML]
   <li><p>If <var title>prefix</var> doesn't match the <code title>NCName</code> production in Namespaces in XML, raise a <code title=dom-DOMException-NAMESPACE_ERR>NAMESPACE_ERR</code> exception and abort these steps. [XMLNS]
  </ol>
 <li><p class=XXX>Actually this doesn't match any browser. Let's try to drop it instead.
</ol>-->
   

  <p>The <dfn id=localname
   title=dom-Node-localName><code>localName</code></dfn> attribute, on
   getting, must return the local name that is associated with the node.

  <p>The <dfn id=hasattributes
   title=dom-Node-hasAttributes><code>hasAttributes()</code></dfn> method
   must <span class=XXX>...</span>

  <p>The <dfn id=baseuri title=dom-Node-baseURI><code>baseURI</code></dfn>
   attribute must <span class=XXX>...</span>

  <p>The <dfn id=comparedocumentpositionother
   title=dom-Node-compareDocumentPosition><code>compareDocumentPosition(<var>other</var>)</code></dfn>
   method must <span class=XXX>...</span>

  <p>The <dfn id=textcontent
   title=dom-Node-textContent><code>textContent</code></dfn> attribute, on
   getting, must return a concatenation of the <a href="#data"><code
   title=dom-CharacterData-data>data</code></a> of all the descendant <a
   href="#text"><code>Text</code></a> nodes of the <a
   href="#context-node">context node</a>, in <a href="#tree-order">tree
   order</a>. On setting, it must run the following steps:

  <ol>
   <li>
    <p>Remove all the child nodes of the <a href="#context-node">context
     node</a>.

   <li>
    <p>Let <var title>data</var> be the value being assigned.

   <li>
    <p>If <var title>data</var> is not the empty string, append a new <a
     href="#text"><code>Text</code></a> node to the <a
     href="#context-node">context node</a> whose <a href="#data"><code
     title=dom-CharacterData-data>data</code></a> is set to <var
     title>data</var>.
  </ol>

  <p>The <dfn id=issamenodeother
   title=dom-Node-isSameNode><code>isSameNode(<var>other</var>)</code></dfn>
   method must return true if <var>other</var> is a reference to the same
   object as the <a href="#context-node">context node</a>, and false
   otherwise.

  <p>The <dfn id=lookupprefixnamespaceuri
   title=dom-Node-lookupPrefix><code>lookupPrefix(<var>namespaceURI</var>)</code></dfn>
   method must <span class=XXX>...</span>

  <p>The <dfn id=isdefaultnamespacenamespaceuri
   title=dom-Node-isDefaultNamespace><code>isDefaultNamespace(<var>namespaceURI</var>)</code></dfn>
   method must <span class=XXX>...</span>

  <p>The <dfn id=lookupnamespaceuriprefix
   title=dom-Node-lookupNamespaceURI><code>lookupNamespaceURI(<var>prefix</var>)</code></dfn>
   method must <span class=XXX>...</span>

  <p>The <dfn id=isequalnodearg
   title=dom-Node-isEqualNode><code>isEqualNode(<var>arg</var>)</code></dfn>
   method must return true if all of the following conditions are true, and
   must otherwise return false:

  <ul>
   <li>
    <p><var>arg</var> implements the <a href="#node"><code>Node</code></a>
     interface.

   <li>
    <p><var>arg</var>'s <code title=dom-Node-type>type</code> is the same as
     the <a href="#context-node">context node</a>'s <code
     title=dom-Node-type>type</code>.

   <li>
    <p><var>arg</var>'s <a href="#nodename"><code
     title=dom-Node-nodeName>nodeName</code></a> is the same as the <a
     href="#context-node">context node</a>'s <a href="#nodename"><code
     title=dom-Node-nodeName>nodeName</code></a>.

   <li>
    <p><var>arg</var>'s <a href="#localname"><code
     title=dom-Node-localName>localName</code></a> is the same as the <a
     href="#context-node">context node</a>'s <a href="#localname"><code
     title=dom-Node-localName>localName</code></a>.

   <li>
    <p><var>arg</var>'s <a href="#namespaceuri"><code
     title=dom-Node-namespaceURI>namespaceURI</code></a> is the same as the
     <a href="#context-node">context node</a>'s <a href="#namespaceuri"><code
     title=dom-Node-namespaceURI>namespaceURI</code></a>.

   <li>
    <p><var>arg</var>'s <a href="#prefix"><code
     title=dom-Node-prefix>prefix</code></a> is the same as the <a
     href="#context-node">context node</a>'s <a href="#prefix"><code
     title=dom-Node-prefix>prefix</code></a>.

   <li>
    <p><var>arg</var>'s <a href="#nodevalue"><code
     title=dom-Node-nodeValue>nodeValue</code></a> is the same as the <a
     href="#context-node">context node</a>'s <a href="#nodevalue"><code
     title=dom-Node-nodeValue>nodeValue</code></a>.

   <li>
    <p><var>arg</var>'s <a href="#attributes"><code
     title=dom-Node-attributes>attributes</code></a> is the same as the <a
     href="#context-node">context node</a>'s <a href="#attributes"><code
     title=dom-Node-attributes>attributes</code></a>. <span
     class=XXX>Elaborate...</span>

   <li>
    <p><var>arg</var>'s <a href="#childnodes"><code
     title=dom-Node-childNodes>childNodes</code></a>' <a href="#length"><code
     title=dom-NodeList-length>length</code></a> is the same as the <a
     href="#context-node">context node</a>'s <a href="#childnodes"><code
     title=dom-Node-childNodes>childNodes</code></a>' <a href="#length"><code
     title=dom-NodeList-length>length</code></a>.

   <li>
    <p>Calling <code title=dom-Node-isEqual>isEqualNode</code> on each child
     node of the <a href="#context-node">context node</a>, with the child
     node of the same index in <var>arg</var> as argument returns true for
     every child node.
  </ul>

  <h3 id=interface-nodelist><span class=secno>3.6. </span>Interface <a
   href="#nodelist"><code title>NodeList</code></a></h3>

  <p>A <a href="#nodelist"><code>NodeList</code></a> is a <span
   title=collections>collection</span>, except that <a
   href="#nodelist"><code>NodeList</code></a>s can be static (as opposed to
   live) if a specification defines them to be static. [HTML5]

  <pre class=idl>interface <dfn id=nodelist>NodeList</dfn> {
  getter <a href="#node">Node</a> <a href="#itemindex" title=dom-NodeList-item>item</a>(in unsigned long index);
  readonly attribute unsigned long <a href="#length" title=dom-NodeList-length>length</a>;
};</pre>

  <p>The <dfn id=itemindex
   title=dom-NodeList-item><code>item(<var>index</var>)</code></dfn> method
   must return the <var>index</var>th node in the collection. If there is no
   <var>index</var>th node in the collection, then the method must return
   null.

  <p>The <dfn id=length title=dom-NodeList-length><code>length</code></dfn>
   attribute must, on getting, return the number of nodes <span>represented
   by the collection</span>.

  <h3 id=interface-namednodemap><span class=secno>3.7. </span>Interface <a
   href="#namednodemap"><code title>NamedNodeMap</code></a></h3>

  <pre class=idl>interface <dfn id=namednodemap>NamedNodeMap</dfn> {
  <a href="#node">Node</a> <span title=dom-NamedNodeMap-getNamedItem>getNamedItem</span>(in DOMString name);
  <a href="#node">Node</a> <span title=dom-NamedNodeMap-setNamedItem>setNamedItem</span>(in <a href="#node">Node</a> arg);
  <a href="#node">Node</a> <span title=dom-NamedNodeMap-removeNamedItem>removeNamedItem</span>(in DOMString name);
  <a href="#node">Node</a> <span title=dom-NamedNodeMap-item>item</span>(in unsigned long index);
  readonly attribute unsigned long <span title=dom-NamedNodeMap-length>length</span>;
  <a href="#node">Node</a> <span title=dom-NamedNodeMap-getNamedItemNS>getNamedItemNS</span>(in DOMString namespaceURI, in DOMString localName);
  <a href="#node">Node</a> <span title=dom-NamedNodeMap-setNamedItemNS>setNamedItemNS</span>(in <a href="#node">Node</a> arg);
  <a href="#node">Node</a> <span title=dom-NamedNodeMap-removeNamedItemNS>removeNamedItemNS</span>(in DOMString namespaceURI, in DOMString localName);
};</pre>

  <h3 id=interface-characterdata><span class=secno>3.8. </span>Interface <a
   href="#characterdata"><code title>CharacterData</code></a></h3>

  <pre
   class=idl>interface <dfn id=characterdata>CharacterData</dfn> : <a href="#node">Node</a> {
  [TreatNullAs=EmptyString] attribute DOMString <a href="#data" title=dom-CharacterData-data>data</a>;
  readonly attribute unsigned long <a href="#length0" title=dom-CharacterData-length>length</a>;
  DOMString <a href="#substringdataoffset-count" title=dom-CharacterData-substringData>substringData</a>(in unsigned long offset, in unsigned long count);
  void <span title=dom-CharacterData-appendData>appendData</span>(in DOMString arg);
  void <span title=dom-CharacterData-insertData>insertData</span>(in unsigned long offset, in DOMString arg);
  void <span title=dom-CharacterData-deleteData>deleteData</span>(in unsigned long offset, in unsigned long count);
  void <span title=dom-CharacterData-replaceData>replaceData</span>(in unsigned long offset, in unsigned long count, in DOMString arg);
};</pre>

  <p>The <dfn id=data title=dom-CharacterData-data><code>data</code></dfn>
   attribute must, on getting, return the data of the node, and on setting,
   must change the node's data to the new value.
   <!-- XXX should getting throw if length is longer than a DOMString can take? -->
   

  <p>The <dfn id=length0
   title=dom-CharacterData-length><code>length</code></dfn> attribute must,
   on getting, return the number of UTF-16 code units represented by the
   node's data.

  <p>The <dfn id=substringdataoffset-count
   title=dom-CharacterData-substringData><code>substringData(<var>offset</var>,
   <var>count</var>)</code></dfn> method must run the following steps:

  <ol>
   <li>
    <p>If <var>offset</var> is negative or is greater than the <a
     href="#context-node">context node</a>'s <a href="#length0"><code
     title=dom-CharacterData-length>length</code></a>, or if <var>count</var>
     is negative, raise an <code
     title="dom-domexception-INDEX_SIZE_ERR">INDEX_SIZE_ERR</code> exception
     and abort these steps.

   <li>
    <p>If <span><var>offset</var>+<var>count</var></span> is greater than the
     <a href="#context-node">context node</a>'s <a href="#length0"><code
     title=dom-CharacterData-length>length</code></a>, return a
     <code>DOMString</code> whose value is the UTF-16 code units from the
     <var>offset</var>th UTF-16 code unit to the end of <var
     title>data</var>.

   <li>
    <p>Return a <code>DOMString</code> whose value is the UTF-16 code units
     from the <var>offset</var>th UTF-16 code unit to the
     <span><var>offset</var>+<var>count</var></span>th UTF-16 code unit in
     <var title>data</var>.
  </ol>
  <!-- XXX should it throw if it's too long? -->

  <h3 id=interface-attr><span class=secno>3.9. </span>Interface <a
   href="#attr"><code title>Attr</code></a></h3>

  <pre
   class=idl>interface <dfn id=attr>Attr</dfn> : <a href="#node">Node</a> {
  readonly attribute DOMString <span title=dom-Attr-name>name</span>;
  readonly attribute boolean <span title=dom-Attr-specified>specified</span>;
           attribute DOMString <span title=dom-Attr-value>value</span>;
  readonly attribute Element <span title=dom-Attr-ownerElement>ownerElement</span>;<!--
  readonly attribute TypeInfo schemaTypeInfo;
  readonly attribute boolean isId;-->
};</pre>

  <h3 id=interface-element><span class=secno>3.10. </span>Interface <a
   href="#element"><code title>Element</code></a></h3>

  <pre
   class=idl>interface <dfn id=element>Element</dfn> : <a href="#node">Node</a> {
  readonly attribute DOMString <a href="#tagname" title=dom-Element-tagName>tagName</a>;
  DOMString <span title=dom-Element-getAttribute>getAttribute</span>(in DOMString name);
  void <span title=dom-Element-setAttribute>setAttribute</span>(in DOMString name, in DOMString value);
  void <span title=dom-Element-removeAttribute>removeAttribute</span>(in DOMString name);<!--
  Attr <span title=dom-Element-getAttributeNode>getAttributeNode</span>(in DOMString name);
  Attr <span title=dom-Element-setAttributeNode>setAttributeNode</span>(in Attr newAttr);
  Attr <span title=dom-Element-removeAttributeNode>removeAttributeNode</span>(in Attr oldAttr);-->
  NodeList <span title=dom-Element-getElementsByTagName>getElementsByTagName</span>(in DOMString name);
  DOMString <span title=dom-Element-getAttributeNS>getAttributeNS</span>(in DOMString namespaceURI, in DOMString localName);
  void <span title=dom-Element-setAttributeNS>setAttributeNS</span>(in DOMString namespaceURI, in DOMString qualifiedName, in DOMString value);
  void <span title=dom-Element-removeAttributeNS>removeAttributeNS</span>(in DOMString namespaceURI, in DOMString localName);<!--
  Attr <span title=dom-Element-getAttributeNodeNS>getAttributeNodeNS</span>(in DOMString namespaceURI, in DOMString localName);
  Attr getAttributeNodeNS(in DOMString namespaceURI, in DOMString localName);-->
  <a href="#nodelist">NodeList</a> <span title=dom-Element-getElementsByTagNameNS>getElementsByTagNameNS</span>(in DOMString namespaceURI, in DOMString localName);
  boolean <span title=dom-Element-hasAttribute>hasAttribute</span>(in DOMString name);
  boolean <span title=dom-Element-hasAttributeNS>hasAttributeNS</span>(in DOMString namespaceURI, in DOMString localName);<!--
  readonly attribute TypeInfo schemaTypeInfo;
  void setIdAttribute(in DOMString name, in boolean isId);
  void setIdAttributeNS(in DOMString namespaceURI, in DOMString localName, in boolean isId);
  void setIdAttributeNode(in Attr idAttr, in boolean isId);-->
           attribute <span>HTMLCollection</span> <span title=dom-Element-children>children</span>;
};</pre>

  <p class=XXX>HTMLCollection is defined in HTML5. Perhaps we should move
   that to this spec. Perhaps also DOMTokenList, DOMStringMap,
   getElementsByClassName...

  <p>The <dfn id=tagname title=dom-Element-tagName><code>tagName</code></dfn>
   attribute must, on getting, return the concatenation of <a
   href="#prefix"><code title=dom-Node-prefix>prefix</code></a>, the
   character U+003E COLON (":") and <a href="#localname"><code
   title=dom-Node-localName>localName</code></a> if <a href="#prefix"><code
   title=dom-Node-prefix>prefix</code></a> is not null, and otherwise just <a
   href="#localname"><code title=dom-Node-localName>localName</code></a>.

  <h3 id=interface-text><span class=secno>3.11. </span>Interface <a
   href="#text"><code title>Text</code></a></h3>

  <pre
   class=idl>interface <dfn id=text>Text</dfn> : <a href="#characterdata">CharacterData</a> {
  <a href="#text">Text</a> <span title=dom-Text-splitText>splitText</span>(in unsigned long offset);<!--
  readonly attribute boolean isElementContentWhitespace;-->
  readonly attribute DOMString <span title=dom-Text-wholeText>wholeText</span>;
  <a href="#text">Text</a> <span title=dom-Text-replaceWholeText>replaceWholeText</span>(in DOMString content);
};</pre>

  <h3 id=interface-comment><span class=secno>3.12. </span>Interface <a
   href="#comment"><code title>Comment</code></a></h3>

  <pre
   class=idl>interface <dfn id=comment>Comment</dfn> : <a href="#characterdata">CharacterData</a> {
};</pre>
  <!-- TypeInfo dropped -->
  <!-- UserDataHandler dropped -->
  <!-- DOMError dropped -->
  <!-- DOMErrorHandler dropped -->
  <!-- DOMLocator dropped -->
  <!-- DOMConfiguration dropped -->
  <!-- CDATASection dropped -->

  <h3 id=interface-documenttype><span class=secno>3.13. </span>Interface <a
   href="#documenttype"><code title>DocumentType</code></a></h3>

  <pre
   class=idl>interface <dfn id=documenttype>DocumentType</dfn> : <a href="#node">Node</a> {
  readonly attribute DOMString <span title=dom-DocumentType-name>name</span>;<!--
  readonly attribute NamedNodeMap entities;
  readonly attribute NamedNodeMap notations;-->
  readonly attribute DOMString <span title=dom-DocumentType-publicId>publicId</span>;
  readonly attribute DOMString <span title=dom-DocumentType-systemId>systemId</span>;<!--
  readonly attribute DOMString internalSubset;-->
};</pre>
  <!-- Notation dropped -->
  <!-- Entity dropped -->
  <!-- EntityReference dropped -->

  <h3 id=interface-processinginstruction><span class=secno>3.14.
   </span>Interface <a href="#processinginstruction"><code
   title>ProcessingInstruction</code></a></h3>

  <pre
   class=idl>interface <dfn id=processinginstruction>ProcessingInstruction</dfn> : <a href="#node">Node</a> {
  readonly attribute DOMString <span title=dom-ProcessingInstruction-target>target</span>;
           attribute DOMString <span title=dom-ProcessingInstruction-data>data</span>;
};</pre>

  <h2 class=no-num id=acknowledgements>Acknowledgements</h2>

  <p>Thanks to Anne van Kesteren and Henri Sivonen for their useful comments.
   <script
   src="http://www.whatwg.org/specs/web-apps/current-work/dfn.js"></script>
