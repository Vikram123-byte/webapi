<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><!-- saved from url=(0349)http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&process_filter=on&process_toc=on&process_xref=on&process_sub=on&process_annotate=on&filter=&annotation=&newline_char=LF&tab_char=SPACE&min_depth=2&max_depth=6&w3c_compat_xref_a_placement=on&parser=lxml.html&serializer=html5lib&output_encoding=ascii --><html lang=en><meta content="text/html; charset=ascii" http-equiv=Content-Type><title>Resource Timing</title><link href=ResourceTiming.css rel=stylesheet type=text/css><body class=draft><div class=head>


<h1>Resource Timing</h1>


<h2 class="no-num no-toc" id=working-draft-august-09-2010>Working Draft Aug. 9, 2010</h2>
  <dl><dt>This version:</dt>
    <dd><a href=http://dev.w3.org/2006/webapi/ResourceTiming/>http://dev.w3.org/2006/webapi/ResourceTiming/</a></dd>
    <dt>Latest version:</dt>
    <dt>Editors:</dt>
    <dd class=vcard>
      <span class=fn>Zhiheng Wang</span>,
      <span class=org>Google Inc.</span>,
      <span class=email>zhihengw@google.com</span>
    </dd>
    <dd class=vcard>
      <span class=fn>Anderson Quach</span>,
      <span class=org>Microsoft Inc.</span>,
      <span class=email>qauach@microsoft.com</span>
    </dd>
  </dl><p class=copyright>Copyright 2010, All Rights Reserved</p>

<h2 class="no-num no-toc" id=abstract>Abstract</h2><p>This specification defines an interface for web applications to access timing information related to HTML elements.


<h2 class="no-num no-toc" id=status-of-this-document>Status of this document</h2><p>This is a <strong>work in progress</strong> and may change without any notices.


<p>Please direct your comments regarding this document to public-web-perf@w3.org or the editors. All feedback is welcome.

<h2 class="no-num no-toc" id=table-of-contents>Table of Contents</h2><!--begin-toc-->
<ol class=toc>
 <li><a href=#introduction><span class=secno>1 </span>Introduction</a></li>
 <li><a href=#conformance-requirements><span class=secno>2 </span>Conformance requirements</a></li>
 <li><a href=#terminology><span class=secno>3 </span>Terminology</a></li>
 <li><a href=#resource-timing-0><span class=secno>4 </span>Resource Timing</a>
  <ol class=toc>
   <li><a href=#introduction-1><span class=secno>4.1 </span>Introduction</a></li>
   <li><a href=#the-resourcetiming-interface><span class=secno>4.2 </span>The
<code>ResourceTiming</code> Interface</a></li>
   <li><a href=#the-resourcetimingcollector-interface><span class=secno>4.3 </span>
The <code>ResourceTimingCollector</code> interface</a></li>
   <li><a href=#processing-model><span class=secno>4.4 </span>Processing model</a></ol></li>
 <li><a href=#privacy><span class=secno>5 </span>Privacy</a></li>
 <li><a href=#security><span class=secno>6 </span>Security</a></li>
 <li><a class=no-num href=#acknowledgements>Acknowledgements</a></ol><!--end-toc--><h2 id=introduction><span class=secno>1 </span>Introduction</h2>

<p>This section is non-normative.</p>User latency is an important quality benchmark for Web Applications.
While JavaScript-based mechanisms can provide comprehensive instrumentation
for user latency measurements within an application, in many cases, they are
unable to provide a complete end-to-end latency picture. While
<a href=http://dev.w3.org/2006/webapi/WebTiming/>NavigationTiming</a> address
part of the problem by providing timing information associated with a navigation,
this document introduces the <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">ResourceTiming</a>
interface to allow Javascript mechanisms to collect complete timing information
related to resources on a document.

<div class=XXX><p>Add examples when the interface stabilizes.</div>

<div class=example>


<p></p>
</div>


<h2 id=conformance-requirements><span class=secno>2 </span>Conformance requirements</h2>
<p>All diagrams, examples, and notes in this specification are non-normative, as are all sections explicitly marked non-normative. Everything else in this specification is normative.


<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this document are to be interpreted as described in RFC2119. For readability, these words do not appear in all uppercase letters in this specification. <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#references">[RFC2119]</a>


<p>Requirements phrased in the imperative as part of algorithms (such as "strip any leading space characters" or "return false and abort these steps") are to be interpreted with the meaning of the key word ("must", "should", "may", etc) used in introducing the algorithm.


<p>Some conformance requirements are phrased as requirements on attributes, methods or objects. Such requirements are to be interpreted as requirements on user agents.


<p>Conformance requirements phrased as algorithms or specific steps may be implemented in any manner, so long as the end result is equivalent. (In particular, the algorithms defined in this specification are intended to be easy to follow, and not intended to be performant.)


<h2 id=terminology><span class=secno>3 </span>Terminology</h2>
<p>The construction "a <code title="">Foo</code> object", where
<code title="">Foo</code> is actually an interface, is sometimes
used instead of the more accurate "an object implementing the
interface <code title="">Foo</code>".


<p>The term DOM is used to refer to the API set made available to
scripts in Web applications, and does not necessarily imply the
existence of an actual <code>Document</code> object or of any other <code>Node</code> objects as defined in the DOM Core
specifications. <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#references">[DOM3CORE]</a>


<p>A DOM attribute is said to be <em>getting</em> when its value is
being retrieved (such as by author script), and is said to be <em>setting</em> 
when a new value is assigned to it.


<p>The term "JavaScript" is used to refer to ECMA262, rather than
the official term ECMAScript, since the term JavaScript is more
widely known. <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#references">[ECMA262]</a>

<h2 id=resource-timing-0><span class=secno>4 </span>Resource Timing</h2>
<h3 id=introduction-1><span class=secno>4.1 </span>Introduction</h3>
<p>This section is non-normative</p>


<p>
The <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">ResourceTiming</a> and
<a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing-collector">ResourceTimingCollector</a> interface
facilitate timing measurement of elements on the root page. 
The <dfn id=resource-timing>ResourceTiming</dfn> attribute represents the
timing information related to an
<a href=http://dev.w3.org/html5/spec/Overview.html#elements>element</a>.
Each of the following elements must expose its timing information during a page
load using the interfaces defined in this work:
  <a href=http://dev.w3.org/html5/spec/Overview.html#the-iframe-element>iframe</a>,   
  <a href=http://dev.w3.org/html5/spec/Overview.html#the-img-element>img</a>,         
  <a href=http://dev.w3.org/html5/spec/Overview.html#script>script</a>,       
  <a href=http://dev.w3.org/html5/spec/Overview.html#the-object-element>object</a>,   
  <a href=http://dev.w3.org/html5/spec/Overview.html#the-embed-element>embed</a> and
  <a href=http://dev.w3.org/html5/spec/Overview.html#the-link-element>link</a> with the link type of
  <a href=http://dev.w3.org/html5/spec/Overview.html#link-type-stylesheet>stylesheet</a>.
  The term "resource" is also used to refer to these elements in this work.
</p>



<h3 id=the-resourcetiming-interface><span class=secno>4.2 </span>The
<code><a href=#resource-timing>ResourceTiming</a></code> Interface</h3>

<pre class=idl>interface <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">ResourceTiming</a> {
  const unsigned short <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-resourcetype-script">RESOURCE_SCRIPT</a> = 1;
  const unsigned short <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-resource-type-image">RESOURCE_IMAGE</a> = 2;
  const unsigned short <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-resource-type-cssimage">RESOURCE_CSSIMAGE</a> = 3;
  const unsigned short <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-resource-type-stylesheet">RESOURCE_STYLESHEET</a> = 4;
  const unsigned short <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-resource-type-object">RESOURCE_OBJECT</a> = 5;
  const unsigned short <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-resource-type-subdocument">RESOURCE_SUBDOCUMENT</a> = 6;
  const unsigned short <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-resource-type-xhr">RESOURCE_XHLHTTPREQUEST</a> = 7;
  readonly attribute unsigned short <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-resource-type" title=resourcetype>resourceType</a>;
  
  readonly attribute DOMString <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-url" title=url>url</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-redirect-start" title=redirectstart>redirectStart</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-redirect-end" title=redirectend>redirectEnd</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-fetch-start" title=fetchstart>fetchStart</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-domain-lookupstart" title=domainlookupstart>domainLookupStart</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-domain-lookupend" title=domainlookupend>domainLookupEnd</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-connect-start" title=connectstart>connectStart</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-connect-end" title=connectend>connectEnd</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-request-start" title=requeststart>requestStart</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-request-end" title=requestend>requestEnd</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-response-start" title=responsestart>responseStart</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-response-end" title=responseend>responseEnd</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-load-start" title=loadeventstart>loadEventStart</a>;
  readonly attribute unsigned longlong <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-load-end" title=loadeventend>loadEventEnd</a>;  
};
</pre>


<h4 id=resourcetype-attribute><code><dfn id=rt-resource-type>resourceType</dfn></code> attribute</h4>
<p>This attribute must return one of the following <dfn id=nt-resource-type>resource types</dfn>:

<dl><dt><dfn id=rt-resource-type-script>RESOURCE_SCRIPT</dfn>: the resource is script.</dt>
<dt><dfn id=rt-resource-type-image>RESOURCE_IMAGE</dfn>: the resource is an image.</dt>
<dt><dfn id=rt-resource-type-cssimage>RESOURCE_CSSIMAGE</dfn>: the resource is a CSS image.</dt>
<dt><dfn id=rt-resource-type-stylesheet>RESOURCE_STYLESHEET</dfn>: the resource is a stylesheet.</dt>
<dt><dfn id=rt-resource-type-object>RESOURCE_OBJECT</dfn>: the resource is an object.</dt>
<dt><dfn id=rt-resource-type-subdocument>RESOURCE_SUBDOCUMENT</dfn>: the resource is a document.</dt>
<dt><dfn id=rt-resource-type-xhr>RESOURCE_XMLHTTPREQUEST</dfn>: the resource is a XML HTTP request.</dt>
</dl><h4 id=url-attribute><code><dfn id=rt-url>url</dfn></code> attribute</h4>
<p>This attribute must return the <a href=http://dev.w3.org/html5/spec/Overview.html#url>URL</a> of the associated resource.</p>


<h4 id=fetchstart-attribute-0><code><dfn id=rt-fetch-start>fetchStart</dfn></code> attribute</h4>
<p>This attribute must return the number of milliseconds between midnight of
January 1, 1970 (UTC) and the time when the user agent starts to
<a href=http://dev.w3.org/html5/spec/Overview.html#fetching-resources>fetch</a>
the resource. This time should not be overwritten if the user agent retries 
fetching the same resource due to failures. When a resource is set or changed and if it results in a
<a href=http://dev.w3.org/html5/spec/Overview.html#fetch>fetch</a>, its timing
attribute must be updated.</p>

<h4 id=domainlookupstart-attribute><code><dfn id=rt-domain-lookupstart>domainLookupStart</dfn></code> attribute</h4>
<p>This attribute must return the number of milliseconds between midnight of
January 1, 1970 (UTC) and the time the user agent starts the domain name lookup
for the resource. If the resource is retrieved from
<a href=http://www.whatwg.org/specs/web-apps/current-work/#relevant-application-cache>
relevant application caches</a> or an HTML file, this attribute must return the
same value as <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#nt-fetch-start">fetchStart</a>.</p>

<h4 id=domainlookupend-attribute><code><dfn id=rt-domain-lookupend>domainLookupEnd</dfn></code> attribute</h4>
<p>This attribute must return the number of milliseconds between midnight of January 1, 1970 (UTC)
and the time the user agent finishes the domain name
lookup for the resource. If the resource is retrieved from
<a href=http://www.whatwg.org/specs/web-apps/current-work/#relevant-application-cache>
relevant application caches</a> or an HTML file, this attribute must return
the same value as <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#nt-fetch-start">fetchStart</a>.</p>

<div class=example><div class=exampleHeader>Example</div><p>
In case where the user agent already has the domain information in cache,
domainLookupStart and domainLookupEnd represent the times when the user agent
starts and ends the domain data retrieval from the cache.
</div>

<h4 id=connectstart-attribute><code><dfn id=rt-connect-start>connectStart</dfn></code> attribute</h4>
<p>This attribute must return the number of milliseconds between midnight of
January 1, 1970 (UTC) and the time when the user agent start establishing the
connection to the server to retrieve the resource. If a
<a href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1>persistent
connection</a> is used or the current document is retrieved from
<a href=http://www.whatwg.org/specs/web-apps/current-work/#relevant-application-cache>
relevant application caches</a> or an HTML file, this attribute must return the
same value as <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#nt-fetch-start">fetchStart</a>.

<h4 id=connectend-attribute><code><dfn id=rt-connect-end>connectEnd</dfn></code> attribute </h4>
<p>This attribute must return the number of milliseconds between midnight of
January 1, 1970 (UTC) and the time when the user agent finishes establishing the
connection to the server to retrieve the resource.
If a <a href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1>persistent
connection</a> is used or the resource is retrieved from
<a href=http://www.whatwg.org/specs/web-apps/current-work/#relevant-application-cache>
relevant application caches</a> or an HTML file, this attribute must return the
same value as <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#nt-fetch-start">fetchStart</a>.

<p>If the transport connection fails and the user agent reopens a
connection, <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resourcetiming-connectstart">connectStart</a> and
<a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#domtiming-connectend">connectEnd</a> should return the corresponding
values of the new connection.

</p><a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-connect-end">connectEnd</a> must include the time to establish the transport connection.
It must not include other time such as SSL handshake and SOCKS authentication.

<h4 id=requeststart-attribute><code><dfn id=rt-request-start>requestStart</dfn></code> attribute</h4>
<p>This attribute must return the number of milliseconds between midnight of
January 1, 1970 (UTC) and the time when the user agent starts requesting
the resource from the server, or from
<a href=http://www.whatwg.org/specs/web-apps/current-work/#relevant-application-cache>
relevant application caches</a>, or from an HTML file.</p>

<h4 id=requestend-attribute><code><dfn id=rt-request-end>requestEnd</dfn></code> attribute</h4>
<p>This attribute must return the number of milliseconds between midnight of
January 1, 1970 (UTC) and the time when the user agent finishes requesting
the resource from the server, or from
<a href=http://www.whatwg.org/specs/web-apps/current-work/#relevant-application-cache>
relevant application caches</a>, or from an HTML file.</p>

<p>If the transport connection fails after a request is sent and the user
agent reopens a connection and resend the request,
<a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-request-start">requestStart</a> and <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-request-end">requestEnd</a>
should return the corresponding values of the new request.</p>

<h4 id=responsestart-attribute><code><dfn id=rt-response-start>responseStart</dfn></code> attribute
</h4><p>This attribute must return the number of milliseconds between midnight of
January 1, 1970 (UTC) and the time when the user agent receives the first byte
of the response from the server, or from
<a href=http://www.whatwg.org/specs/web-apps/current-work/#relevant-application-cache>
relevant application caches</a>, or from an HTML file.</p>

<h4 id=responseend-attribute><code><dfn id=rt-response-end>responseEnd</dfn></code> attribute
</h4><p>This attribute must return the number of milliseconds between midnight of
January 1, 1970 (UTC) and the time when the user agent finishes receiving the
last byte of the resource from from
<a href=http://www.whatwg.org/specs/web-apps/current-work/#relevant-application-cache>
relevant application caches</a>, or from an HTML file.</p>

<h4 id=loadstart-attribute><code><dfn id=rt-load-start>loadEventStart</dfn></code> attribute</h4>
<p>This attribute must return the number of milliseconds between midnight
of January 1, 1970 (UTC) and the time immediately before the load event of the
the resource is fired. It must return zero when the load event is not fired yet.</p>

<h4 id=loadend-attribute><code><dfn id=rt-load-end>loadEventEnd</dfn></code> attribute</h4>
<p>This attribute must return the number of milliseconds between midnight
of January 1, 1970 (UTC) and the time when the load event of the resource
is completed. It must return zero when the load event is not fired yet.</p>

<h3 id=the-resourcetimingcollector-interface><span class=secno>4.3 </span>
The <code><dfn id=resourcetimingcollector>ResourceTimingCollector</dfn></code> interface</h3>

<pre class=idl>interface ResourceTimingEvent : Event {
 readonly attribute array[ResourceTiming] timing;
};


interface ResourceTimingCollector {
  void addEventListener(in EventListener listener)
  void removeEventListener(in EventListener listener)
};


[Supplemental]
interface Window.performance {
  ResourceTimingCollector createResourceTimingCollector()
};
</pre>


<p>ResourceTiming objects associated with embedded objects on the root document
must be saved until the root document completes loading. If a
ResourceTimingCollector object is created and an event handler is registered
using addEventListener before the root document completes loading, all
ResourceTiming objects must be delivered to the handler. If a
ResourceTimingCollector object is created after the root document finishes
loading, subsequent events should be delivered to the registered handlers as
they occur.
</p>


<div class=example><div class=exampleHeader>Example</div><p>
Any ResourceTiming object
created prior to the end of onload will receive events for all resources (even
if they complete prior to the object's creation). If a ResourceTiming object
is created after onload, it will only receive events about resources completed
after the object's creation. This allows the browser optimal opportunities to
garbage collect. </div>

<h3 id=processing-model><span class=secno>4.4 </span>Processing model</h3>
<div class=XXX>We need a solution to handle dynamic sources such as those
generated by DOM manipulation or innerHTML replacement.
</div>
<p>A user agent must allocate space to store all the <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">
ResourceTiming</a> objects generated in the following process. 
<ol><!--
  // We can't release these objects on navigation. A navigation could be
  // interrupted event after it's started, e.g., users refuse to unload the 
  // page, in which case we still want to keep these objects.
  --><li>Before a user agent fetches a resource for an element that associates
  with a ResourceTiming object, the following steps must be run:
  <ol><li>Create a new <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">ResourceTiming</a> object.</li>
    <li>Record the <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-resource-type">resourceType</a> attribute.</li>
    <li>Before a user agent runs the
    <a href=http://dev.w3.org/html5/spec/Overview.html#changesToNetworkingModel>
    fetching algorithm</a>, it must record the current time in the
    <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#nt-fetch-start">fetchStart</a> attribute.</li>
    <li>Record the time as <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#rt-load">load</a> attribute
    immediately after the user agent finishes loading the resource into DOM.</li>
    <li>If a ResourceTimingCollector object exists, dispatch a ResourceTimingEvent
    with the ResourceTiming object to all registered event handlers.</li>
    <li>Save the ResourceTiming object unless the root document has finished 
    loading.</li>
  </ol></li>
  <li>When an event handler is added by <a href="">addEventListener</a>,
  the user agent must check if there is any saved
  <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">ResourceTiming</a> objects. If so, it must dispatch
  a ResourceTimingEvent to this new event handler and pass it with all
  the ResourceTiming objects.</li>
  <li>After the root document is loaded and the
  <a href=http://dev.w3.org/html5/spec/webappapis.html#handler-window-onload>
  onload</a> event is handled, a user agent may discard all the
  <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">ResourceTiming</a> objects it saves. All these objects
  must not be discarded before this time.</li>
  <li>Saved <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">ResourceTiming</a> objects should be
  cleaned up during the
  <a href=http://dev.w3.org/html5/spec/history.html#unloading-document-cleanup-steps>
  unloading document cleanup steps</a>.</li>
</ol><div class=example><div class=exampleHeader>Example</div><p>
To avoid maintaining its own data storage while collecting timing information
of all the resources, a page can create the ResourceTimingCollector and register
the ResourceTimingEvent handler in the body onload handler.  
</div>

<p>The accuracy of the timing-related attributes in the
<a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#navigation-timing">NavigationTiming</a> and
<a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">ResourceTiming</a> interfaces is recommended to be one
millisecond or finer.


<h2 id=privacy><span class=secno>5 </span>Privacy</h2>
<p>This section is non-normative.</p>
When giving various timing information of how a resource is requested and process,
the <a href="http://pimpmyspec.net/aquarium.py/output?uri=http%3A%2F%2Fkvnwg.com%2FResourceTiming%2FOverview.html&amp;process_filter=on&amp;process_toc=on&amp;process_xref=on&amp;process_sub=on&amp;process_annotate=on&amp;filter=&amp;annotation=&amp;newline_char=LF&amp;tab_char=SPACE&amp;min_depth=2&amp;max_depth=6&amp;w3c_compat_xref_a_placement=on&amp;parser=lxml.html&amp;serializer=html5lib&amp;output_encoding=ascii#resource-timing">ResourceTiming</a> potentially exposes such
information to any page that has this resource included. To limit the access to
the ResourceTiming interface, the
<a href=http://dev.w3.org/html5/spec/origin-0.html#origin>same origin</a>
policy is enforced by default. Additionally, resource providers can explicitely
allow timing information to be collected over a resource by adding the
allow-timing meta tag to the HTML header, which specifies the domains that are allowed
to access the timing information.

<h2 id=security><span class=secno>6 </span>Security</h2>
<p>This section is non-normative.</p>
Similar to the discussion in the Privacy section.


<h2 class=no-num id=acknowledgements>Acknowledgements</h2>
<p>I would like to offer my sincere thanks to all the people that I have been
in touch with regarding this draft, including Alex Russell,
Alois Reitbauer, Annie Sullivan, Christian Biesinger, Darin Fisher,
Eric Lawrence, Jason Weber, Jonas Sicking, Kyle Scholz, Lenny Rachitsky,
Nic Jansma, Richard Rabbat, Sergey Novikov, Steve Souders, Tony Gentilcore
for their reviews and feedbacks.


</div>
